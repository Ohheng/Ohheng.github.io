<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>æœˆå…‰ä¸‹çš„MemaryğŸŒ™ | å†·é“å·åˆƒä¹‹å‰ï¼Œå¾—ä»¥çª¥è§å¤©å…‰</title>
    <link href="/2024/06/23/(%E6%9C%88%E5%85%89%E4%B8%8B%E7%9A%84Memary)%E5%86%B7%E9%93%81%E5%8D%B7%E5%88%83%E4%B9%8B%E5%89%8D%EF%BC%8C%E5%BE%97%E4%BB%A5%E7%AA%A5%E8%A7%81%E5%A4%A9%E5%85%89/"/>
    <url>/2024/06/23/(%E6%9C%88%E5%85%89%E4%B8%8B%E7%9A%84Memary)%E5%86%B7%E9%93%81%E5%8D%B7%E5%88%83%E4%B9%8B%E5%89%8D%EF%BC%8C%E5%BE%97%E4%BB%A5%E7%AA%A5%E8%A7%81%E5%A4%A9%E5%85%89/</url>
    
    <content type="html"><![CDATA[<p>â€‹æ…¢æ…¢æ˜ç™½ï¼Œç”Ÿæ´»ä¸ä¼šå› ä¸ºæŸä¸ªèŠ‚ç‚¹è€Œå˜å¾—ä¸ä¼—ä¸åŒï¼Œæœªæ¥çš„å¹¸è¿ï¼Œéƒ½æ˜¯è¿‡å¾€åŠªåŠ›çš„ç§¯æ”’ã€‚</p><p>â€‹å¯¹æ¯”é‚£ä¸ªæ¸©æŸ”è€Œåˆç»†å¿ƒçš„ç”·å­©ï¼Œæˆ‘è§‰å¾—æˆ‘ç°åœ¨è¶³å¤Ÿå¹¸è¿äº†ï¼Œå¹¸è¿åˆ°å£è¢‹é‡Œæ”’ä¸‹æ¥çš„å…‰è¶³å¤Ÿç…§äº®æˆ‘ä¹‹åä¸€ä¸ªäººè¦èµ°çš„è·¯äº†ã€‚è™½ç„¶æ€»æ˜¯æƒ³é€€å´ï¼Œä½†åªè¦æ‘¸æ‘¸è‡ªå·±çš„å£è¢‹ï¼Œå°±ä¼šè§‰å¾—è‡ªå·±æ˜¯å¤©ä¸‹æœ€å¹¸ç¦çš„å°å­©ã€‚</p><p>â€‹å½“çœ‹åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œå¸Œæœ›æˆ‘ä»¬å·²ç»å¼€å§‹å¹¸è¿èµ·æ¥ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æœˆå…‰ä¸‹çš„Memary</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Memary</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å•è¯æ‰“å­—æœº - Typing Word</title>
    <link href="/2024/06/15/(%E9%A1%B9%E7%9B%AE)%E5%8D%95%E8%AF%8D%E6%89%93%E5%AD%97%E6%9C%BA/"/>
    <url>/2024/06/15/(%E9%A1%B9%E7%9B%AE)%E5%8D%95%E8%AF%8D%E6%89%93%E5%AD%97%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<h1 align="center">  Typing Word</h1><p align="center">  å¯åœ¨ç½‘é¡µä¸Šä½¿ç”¨çš„èƒŒå•è¯è½¯ä»¶</p><h2 id="ğŸ“¸-åœ¨çº¿è®¿é—®"><a href="#ğŸ“¸-åœ¨çº¿è®¿é—®" class="headerlink" title="ğŸ“¸ åœ¨çº¿è®¿é—®"></a>ğŸ“¸ åœ¨çº¿è®¿é—®</h2><p><a href="http://word.ohheng.cn/">http://word.ohheng.cn/</a></p><h2 id="ğŸ› -åŠŸèƒ½åˆ—è¡¨"><a href="#ğŸ› -åŠŸèƒ½åˆ—è¡¨" class="headerlink" title="ğŸ›  åŠŸèƒ½åˆ—è¡¨"></a>ğŸ›  åŠŸèƒ½åˆ—è¡¨</h2><h3 id="èƒŒå•è¯"><a href="#èƒŒå•è¯" class="headerlink" title="èƒŒå•è¯"></a>èƒŒå•è¯</h3><p>å¯ä»¥é€‰æ‹©è®°å¿†æˆ–é»˜å†™å•è¯ï¼Œæä¾›äº†éŸ³æ ‡æ˜¾ç¤ºã€å‘éŸ³åŠŸèƒ½ï¼ˆå‡å¯é€‰ç¾éŸ³ã€è‹±éŸ³ï¼‰ã€é”™è¯¯ç»Ÿè®¡ </p><h3 id="èƒŒæ–‡ç« "><a href="#èƒŒæ–‡ç« " class="headerlink" title="èƒŒæ–‡ç« "></a>èƒŒæ–‡ç« </h3><p>å†…ç½®ç»å…¸æ•™æä¹¦ç±ï¼Œå¯ä»¥ç»ƒä¹ å’ŒèƒŒè¯µæ–‡ç« ï¼Œé€å¥è¾“å…¥ï¼Œè‡ªåŠ¨å‘éŸ³ã€‚ä¹Ÿå¯ä»¥è‡ªè¡Œæ·»åŠ ã€å¯¼å…¥æ–‡ç« ï¼Œæä¾›ä¸€é”®ç¿»è¯‘ã€è¯‘æ–‡å¯¹ç…§åŠŸèƒ½</p><h3 id="ç”Ÿè¯æœ¬ã€é”™è¯æœ¬ã€ç®€å•è¯"><a href="#ç”Ÿè¯æœ¬ã€é”™è¯æœ¬ã€ç®€å•è¯" class="headerlink" title="ç”Ÿè¯æœ¬ã€é”™è¯æœ¬ã€ç®€å•è¯"></a>ç”Ÿè¯æœ¬ã€é”™è¯æœ¬ã€ç®€å•è¯</h3><p>é»˜å†™å•è¯æ—¶è¾“å…¥é”™è¯¯ä¼šè‡ªåŠ¨æ·»åŠ åˆ°é”™è¯æœ¬ï¼Œä»¥ä¾¿åç»­å¤ä¹ ã€‚ä¹Ÿå¯ä»¥æ·»åŠ åˆ°ç®€å•è¯ï¼Œä¹‹åå†é‡åˆ°è¿™ä¸ªè¯ä¾¿ä¼šè‡ªåŠ¨è·³è¿‡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å°†å…¶æ·»åŠ åˆ°ç”Ÿè¯æœ¬ä¸­ï¼Œä»¥ä¾¿å·©å›ºå¤ä¹ </p><h3 id="é»˜å†™æ¨¡å¼"><a href="#é»˜å†™æ¨¡å¼" class="headerlink" title="é»˜å†™æ¨¡å¼"></a>é»˜å†™æ¨¡å¼</h3><p>åœ¨ç”¨æˆ·å®Œæˆä¸€ä¸ªç« èŠ‚çš„ç»ƒä¹ åï¼Œå¦‚æœæœ‰é”™è¯¯è¯ï¼Œé‚£ä¹ˆä¼šé‡å¤ç»ƒä¹ é”™è¯¯è¯ï¼Œç›´åˆ°æ²¡æœ‰é”™è¯¯è¯ä¸ºæ­¢ã€‚å®Œæˆä¹‹åå¼¹å‡ºé€‰é¡¹å¯é€‰æ‹©é»˜å†™æœ¬ç« ã€é‡å¤æœ¬ç« ã€ä¸‹ä¸€ç« </p><h3 id="è¯åº“"><a href="#è¯åº“" class="headerlink" title="è¯åº“"></a>è¯åº“</h3><p>å†…ç½®äº†å¸¸ç”¨çš„ CET-4 ã€CET-6 ã€GMAT ã€GRE ã€IELTS ã€SAT ã€TOEFL ã€è€ƒç ”è‹±è¯­ã€ä¸“ä¸šå››çº§è‹±è¯­ã€ä¸“ä¸šå…«çº§è‹±è¯­ï¼Œä¹Ÿæœ‰ç¨‹åºå‘˜å¸¸è§è‹±è¯­å•è¯ä»¥åŠå¤šç§ç¼–ç¨‹è¯­è¨€<br>API ç­‰è¯åº“ã€‚ å°½å¯èƒ½æ»¡è¶³å¤§éƒ¨åˆ†ç”¨æˆ·å¯¹èƒŒå•è¯çš„éœ€æ±‚ï¼Œä¹Ÿéå¸¸æ¬¢è¿ç¤¾åŒºè´¡çŒ®æ›´å¤šçš„è¯åº“ã€‚</p><h2 id="ğŸ“•-è¯åº“åˆ—è¡¨"><a href="#ğŸ“•-è¯åº“åˆ—è¡¨" class="headerlink" title="ğŸ“• è¯åº“åˆ—è¡¨"></a>ğŸ“• è¯åº“åˆ—è¡¨</h2><ul><li>CET-4ã€CET-6ã€GMATã€GREã€IELTSã€SATã€TOEFLã€BEC</li><li>è€ƒç ”è‹±è¯­ã€ä¸“ä¸šå››çº§è‹±è¯­ã€ä¸“ä¸šå…«çº§è‹±è¯­ã€å•†åŠ¡è‹±è¯­</li><li>Coder Dict ç¨‹åºå‘˜å¸¸ç”¨è¯</li><li>é«˜è€ƒã€ä¸­è€ƒã€äººæ•™ç‰ˆè‹±è¯­ 3-9 å¹´çº§</li><li>ç‹é™†é›…æ€ç‹å¬åŠ›è¯­æ–™åº“ </li><li>æ—¥è¯­å¸¸è§è¯ã€N1 ï½ N5</li></ul><h2 id="ğŸ“—-API-è¯åº“"><a href="#ğŸ“—-API-è¯åº“" class="headerlink" title="ğŸ“— API è¯åº“"></a>ğŸ“— API è¯åº“</h2><ul><li>JavaScript APIã€Node.js APIã€Java APIã€Linux Commandã€C#: List API</li></ul><p>è¯åº“å‡æ¥æºäº(é™¤æ–‡ç« ä»¥å¤–)ï¼š<a href="https://github.com/RealKai42/qwerty-learner/">qwerty-learner</a></p><p>å¦‚æœæ‚¨éœ€è¦èƒŒè¯µå…¶ä»–è¯åº“ï¼Œæ¬¢è¿åœ¨ Issue ä¸­æå‡º</p><h2 id="ğŸ™-åŠŸèƒ½ä¸å»ºè®®"><a href="#ğŸ™-åŠŸèƒ½ä¸å»ºè®®" class="headerlink" title="ğŸ™ åŠŸèƒ½ä¸å»ºè®®"></a>ğŸ™ åŠŸèƒ½ä¸å»ºè®®</h2><p>ç›®å‰é¡¹ç›®å¤„äºå¼€å‘åˆæœŸï¼Œæ–°åŠŸèƒ½æ­£åœ¨æŒç»­æ·»åŠ ä¸­ï¼Œå¦‚æœä½ å¯¹è½¯ä»¶æœ‰ä»»ä½•åŠŸèƒ½ä¸å»ºè®®ï¼Œæ¬¢è¿åœ¨ Issues ä¸­æå‡º<br>å¦‚æœä½ ä¹Ÿå–œæ¬¢æœ¬è½¯ä»¶çš„è®¾è®¡æ€æƒ³ï¼Œæ¬¢è¿æäº¤ prï¼Œéå¸¸æ„Ÿè°¢ä½ å¯¹æˆ‘ä»¬çš„æ”¯æŒï¼</p><h3 id="çµæ„Ÿæ¥æº"><a href="#çµæ„Ÿæ¥æº" class="headerlink" title="çµæ„Ÿæ¥æº"></a>çµæ„Ÿæ¥æº</h3><p><a href="https://github.com/RealKai42/qwerty-learner/">qwerty-learner</a> å¾ˆå–œæ¬¢ä½œè€…çš„è¿™ä¸ªé¡¹ç›®ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰èƒŒå•è¯æ‰€å¿…å¤‡çš„ <strong>ç”Ÿè¯æœ¬ã€é”™è¯æœ¬ã€ç®€å•è¯</strong> çš„åŠŸèƒ½ï¼Œå¯èƒ½æ˜¯ä½œè€…åå¤å¼ºè°ƒå’Œæé†’è¿™ä¸ªé¡¹ç›®æ˜¯â€œ<strong>ä¸ºé”®ç›˜å·¥ä½œè€…è®¾è®¡çš„å•è¯è®°å¿†ä¸è‹±è¯­è‚Œè‚‰è®°å¿†é”»ç‚¼è½¯ä»¶</strong>â€è€Œä¸æ˜¯ä¸€ä¸ªâ€œ<strong>èƒŒå•è¯</strong>â€çš„è½¯ä»¶å§ï¼Œå°½ç®¡ç»å¤§å¤šæ•°ç”¨æˆ·éƒ½æ˜¯ç”¨å®ƒæ¥èƒŒå•è¯ğŸ˜‚ğŸ˜‚ğŸ˜‚ã€‚</p><p>æœ¬é¡¹ç›®å‚è€ƒå…¶æ€è·¯ä½¿ç”¨ Vue é‡å†™äº†ï¼Œå¹¶æ·»åŠ äº† <strong>ç”Ÿè¯æœ¬ã€é”™è¯æœ¬ã€ç®€å•è¯</strong> ã€ <strong>æ–‡ç« ç»ƒä¹ </strong> ç­‰åŠŸèƒ½ </p>]]></content>
    
    
    <categories>
      
      <category>é¡¹ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ</title>
    <link href="/2024/06/12/(%E9%A1%B9%E7%9B%AE)%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <url>/2024/06/12/(%E9%A1%B9%E7%9B%AE)%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/Ohheng/book-manage">GitHub</a></p><h3 id="1-è®¾è®¡æ€è·¯"><a href="#1-è®¾è®¡æ€è·¯" class="headerlink" title="1. è®¾è®¡æ€è·¯"></a>1. è®¾è®¡æ€è·¯</h3><ol><li>æ•°æ®åº“è®¾è®¡ï¼šè®¾è®¡ä¸€ä¸ªé€‚åˆå­˜å‚¨å›¾ä¹¦å’Œè¯»è€…ä¿¡æ¯çš„æ•°æ®åº“ï¼ŒåŒ…æ‹¬è¡¨çš„è®¾è®¡å’Œå…³ç³»çš„å»ºç«‹ã€‚å¯ä»¥ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“å¦‚MySQLè¿›è¡Œè®¾è®¡ã€‚</li><li>ç”¨æˆ·ç•Œé¢è®¾è®¡ï¼šä½¿ç”¨æˆ·èƒ½å¤Ÿæ–¹ä¾¿åœ°è¿›è¡Œå›¾ä¹¦å’Œè¯»è€…ä¿¡æ¯çš„ç®¡ç†ã€‚ä½¿ç”¨å‰ç«¯æ¡†æ¶æŠ€æœ¯Vueå¹¶ç»“åˆå›¾å½¢ç•Œé¢åº“Element UIè¿›è¡Œè®¾è®¡ã€‚</li><li>åŠŸèƒ½æ¨¡å—åˆ’åˆ†ï¼šå°†ç³»ç»Ÿçš„åŠŸèƒ½åˆ’åˆ†ä¸ºä¸åŒçš„æ¨¡å—ï¼Œå¦‚æ·»åŠ å›¾ä¹¦æ¨¡å—ã€åˆ é™¤å›¾ä¹¦æ¨¡å—ã€ä¿®æ”¹å›¾ä¹¦æ¨¡å—ã€æŸ¥è¯¢å›¾ä¹¦æ¨¡å—å’Œå€Ÿé˜…ç®¡ç†æ¨¡å—ç­‰ã€‚æ¯ä¸ªæ¨¡å—è´Ÿè´£å¤„ç†ç‰¹å®šçš„åŠŸèƒ½ã€‚</li></ol><p>æ•°æ®åº“æ“ä½œï¼šæ ¹æ®ç”¨æˆ·çš„æ“ä½œè¯·æ±‚ï¼Œæ‰§è¡Œç›¸åº”çš„æ•°æ®åº“æ“ä½œï¼Œå¦‚æ’å…¥ã€åˆ é™¤ã€æ›´æ–°å’ŒæŸ¥è¯¢ç­‰ã€‚å¯ä»¥ä½¿ç”¨SQLè¯­å¥</p><p>å›¾ä¹¦ç®¡ç†ç³»ç»ŸHPIOå›¾</p><p><img src="http://cdn.ohheng.cn/202406122135250.jpg" alt="img"></p><p>æ•°æ®åº“ERå›¾</p><p><img src="http://cdn.ohheng.cn/202406122135251.jpg" alt="img"></p><h3 id="2-æºç ï¼ˆè¯¦ç»†è®¾è®¡ï¼‰"><a href="#2-æºç ï¼ˆè¯¦ç»†è®¾è®¡ï¼‰" class="headerlink" title="2. æºç ï¼ˆè¯¦ç»†è®¾è®¡ï¼‰"></a>2. æºç ï¼ˆè¯¦ç»†è®¾è®¡ï¼‰</h3><p><code>application.properties</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># ç«¯å£å·</span><br><span class="hljs-attr">server.port</span>=<span class="hljs-string">8092</span><br><span class="hljs-comment"># ä¸Šä¸‹æ–‡æ ¹</span><br><span class="hljs-attr">server.servlet.context-path</span>=<span class="hljs-string">/BookManager</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># é…ç½®æ•°æ®åº“</span><br><span class="hljs-attr">spring.datasource.driver-class-name</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/book_manager?useAffectedRows=true</span><br><span class="hljs-attr">spring.datasource.username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">spring.datasource.password</span>=<span class="hljs-string">root</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># é…ç½®Redis</span><br><span class="hljs-attr">spring.redis.host</span>=<span class="hljs-string">192.168.88.130</span><br><span class="hljs-attr">spring.redis.port</span>=<span class="hljs-string">6379</span><br><span class="hljs-attr">spring.redis.password</span>=<span class="hljs-string">123456</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶</span><br><span class="hljs-attr">spring.servlet.multipart.max-file-size</span>=<span class="hljs-string">10MB</span><br><span class="hljs-attr">spring.servlet.multipart.max-request-size</span>=<span class="hljs-string">100MB</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># å…³é—­multipartï¼Œè¯¥æ·»åŠ ä¼šå°†springbootçš„é»˜è®¤çš„multipartå–æ¶ˆï¼Œé¿å…ä¸Šä¼ æ–‡ä»¶æ—¶æŠ¥é”™</span><br><span class="hljs-attr">spring.servlet.multipart.enabled</span>=<span class="hljs-string">false</span><br></code></pre></td></tr></table></figure><p><strong>ä»¥å›¾ä¹¦ä¿¡æ¯ä¸šåŠ¡ä¸ºä¾‹</strong></p><p><strong>package com.zh.model;</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookInfo</span> &#123;<br><br>    <span class="hljs-keyword">private</span> Integer bookid;<br>    <span class="hljs-comment">//ä¹¦å</span><br>    <span class="hljs-keyword">private</span> String bookname;<br>    <span class="hljs-comment">//ä½œè€…</span><br>    <span class="hljs-keyword">private</span> String bookauthor;<br>    <span class="hljs-comment">//ä»·æ ¼</span><br>    <span class="hljs-keyword">private</span> BigDecimal bookprice;<br>    <span class="hljs-comment">//ç±»å‹id</span><br>    <span class="hljs-keyword">private</span> Integer booktypeid;<br>    <span class="hljs-comment">//ç±»å‹åç§°</span><br>    <span class="hljs-keyword">private</span> String booktypename;<br>    <span class="hljs-comment">//ç®€ä»‹</span><br>    <span class="hljs-keyword">private</span> String bookdesc;<br>    <span class="hljs-comment">//å€Ÿä¹¦æƒ…å†µ</span><br>    <span class="hljs-keyword">private</span> Byte isborrowed;<br>    <span class="hljs-comment">//å›¾ä¹¦ç…§ç‰‡</span><br>    <span class="hljs-keyword">private</span> String bookimg;<br><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getBookid</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bookid;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBookid</span><span class="hljs-params">(Integer bookid)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bookid = bookid;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBookname</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bookname;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBookname</span><span class="hljs-params">(String bookname)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bookname = bookname;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBookauthor</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bookauthor;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBookauthor</span><span class="hljs-params">(String bookauthor)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bookauthor = bookauthor;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title function_">getBookprice</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bookprice;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBookprice</span><span class="hljs-params">(BigDecimal bookprice)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bookprice = bookprice;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getBooktypeid</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> booktypeid;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBooktypeid</span><span class="hljs-params">(Integer booktypeid)</span> &#123;<br>        <span class="hljs-built_in">this</span>.booktypeid = booktypeid;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBooktypename</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> booktypename;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBooktypename</span><span class="hljs-params">(String booktypename)</span> &#123;<br>        <span class="hljs-built_in">this</span>.booktypename = booktypename;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBookdesc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bookdesc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBookdesc</span><span class="hljs-params">(String bookdesc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bookdesc = bookdesc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Byte <span class="hljs-title function_">getIsborrowed</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> isborrowed;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setIsborrowed</span><span class="hljs-params">(Byte isborrowed)</span> &#123;<br>        <span class="hljs-built_in">this</span>.isborrowed = isborrowed;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBookimg</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bookimg;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBookimg</span><span class="hljs-params">(String bookimg)</span> &#123;<br>        <span class="hljs-built_in">this</span>.bookimg = bookimg;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>package com.zh.controller;</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(value = &quot;/bookInfo&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookInfoController</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    BookInfoService bookInfoService;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–å›¾ä¹¦æ•°é‡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@GetMapping(value = &quot;/getCount&quot;)</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getCount</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> bookInfoService.getCount();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@GetMapping(value = &quot;/queryBookInfos&quot;)</span><br>    <span class="hljs-keyword">public</span> List&lt;BookInfo&gt; <span class="hljs-title function_">queryBookInfos</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> bookInfoService.queryBookInfos();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ†é¡µæœç´¢æŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * params: &#123;page, limit, bookname, bookauthor, booktypeid&#125;</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> params</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@GetMapping(value = &quot;/queryBookInfosByPage&quot;)</span><br>    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">queryBookInfosByPage</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> Map&lt;String, Object&gt; params)</span>&#123;<br>        MyUtils.parsePageParams(params);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> bookInfoService.getSearchCount(params);  <span class="hljs-comment">// è·å¾—æ€»æ•°</span><br>        List&lt;BookInfo&gt; bookInfos = bookInfoService.searchBookInfosByPage(params);  <span class="hljs-comment">// åˆ†é¡µæŸ¥è¯¢</span><br>        <span class="hljs-keyword">return</span> MyResult.getListResultMap(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;success&quot;</span>, count, bookInfos);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfo</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping(value = &quot;/addBookInfo&quot;)</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">addBookInfo</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> BookInfo bookInfo)</span>&#123;<br>        <span class="hljs-keyword">return</span> bookInfoService.addBookInfo(bookInfo);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfo</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@DeleteMapping(value = &quot;/deleteBookInfo&quot;)</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">deleteBookInfo</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> BookInfo bookInfo)</span>&#123;<br>        <span class="hljs-keyword">return</span> bookInfoService.deleteBookInfo(bookInfo);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤ä¸€äº›å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfos</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@DeleteMapping(value = &quot;/deleteBookInfos&quot;)</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">deleteBookInfos</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> List&lt;BookInfo&gt; bookInfos)</span>&#123;<br>        <span class="hljs-keyword">return</span> bookInfoService.deleteBookInfos(bookInfos);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›´æ–°ä¸€äº›å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfo</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PutMapping(value = &quot;/updateBookInfo&quot;)</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">updateBookInfo</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> BookInfo bookInfo)</span>&#123;<br>        <span class="hljs-keyword">return</span> bookInfoService.updateBookInfo(bookInfo);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>package com.zh.service;</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookInfoService</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–å›¾ä¹¦æ•°é‡</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    Integer <span class="hljs-title function_">getCount</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    List&lt;BookInfo&gt; <span class="hljs-title function_">queryBookInfos</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®idæŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookid</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    BookInfo <span class="hljs-title function_">queryBookInfoById</span><span class="hljs-params">(Integer bookid)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç»Ÿè®¡æœç´¢æ€»æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> params</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    Integer <span class="hljs-title function_">getSearchCount</span><span class="hljs-params">(Map&lt;String, Object&gt; params)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ†é¡µæœç´¢æŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> params</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    List&lt;BookInfo&gt; <span class="hljs-title function_">searchBookInfosByPage</span><span class="hljs-params">(Map&lt;String, Object&gt; params)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfo</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    Integer <span class="hljs-title function_">addBookInfo</span><span class="hljs-params">(BookInfo bookInfo)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfo</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    Integer <span class="hljs-title function_">deleteBookInfo</span><span class="hljs-params">(BookInfo bookInfo)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤ä¸€äº›å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfos</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    Integer <span class="hljs-title function_">deleteBookInfos</span><span class="hljs-params">(List&lt;BookInfo&gt; bookInfos)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›´æ–°ä¸€äº›å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfo</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    Integer <span class="hljs-title function_">updateBookInfo</span><span class="hljs-params">(BookInfo bookInfo)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>package com.zh.service.impl;</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookInfoServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BookInfoService</span> &#123;<br><br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> BookInfoMapper bookInfoMapper;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–å›¾ä¹¦æ•°é‡</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getCount</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bookInfoMapper.selectCount();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;BookInfo&gt; <span class="hljs-title function_">queryBookInfos</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> bookInfoMapper.selectAll();<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®idæŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookid</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> BookInfo <span class="hljs-title function_">queryBookInfoById</span><span class="hljs-params">(Integer bookid)</span> &#123;<br>        <span class="hljs-keyword">return</span> bookInfoMapper.selectByPrimaryKey(bookid);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç»Ÿè®¡æœç´¢æ€»æ•°</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> params</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getSearchCount</span><span class="hljs-params">(Map&lt;String, Object&gt; params)</span> &#123;<br>        <span class="hljs-keyword">return</span> bookInfoMapper.selectCountBySearch(params);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ†é¡µæœç´¢æŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> params</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;BookInfo&gt; <span class="hljs-title function_">searchBookInfosByPage</span><span class="hljs-params">(Map&lt;String, Object&gt; params)</span> &#123;<br>        <span class="hljs-keyword">return</span> bookInfoMapper.selectBySearch(params);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfo</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">addBookInfo</span><span class="hljs-params">(BookInfo bookInfo)</span> &#123;<br>        <span class="hljs-keyword">return</span> bookInfoMapper.insertSelective(bookInfo);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfo</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">deleteBookInfo</span><span class="hljs-params">(BookInfo bookInfo)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            count = bookInfoMapper.deleteByPrimaryKey(bookInfo.getBookid());<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> count;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤ä¸€äº›å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfos</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">deleteBookInfos</span><span class="hljs-params">(List&lt;BookInfo&gt; bookInfos)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (BookInfo bookInfo : bookInfos) &#123;<br>            count += deleteBookInfo(bookInfo);<br>        &#125;<br>        <span class="hljs-keyword">return</span> count;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›´æ–°ä¸€äº›å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookInfo</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">updateBookInfo</span><span class="hljs-params">(BookInfo bookInfo)</span> &#123;<br>        <span class="hljs-keyword">return</span> bookInfoMapper.updateByPrimaryKeySelective(bookInfo);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>package com.zh.mapper;</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookInfoMapper</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–å›¾ä¹¦æ•°é‡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    Integer <span class="hljs-title function_">selectCount</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŸ¥è¯¢æ‰€æœ‰å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    List&lt;BookInfo&gt; <span class="hljs-title function_">selectAll</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®idæŸ¥è¯¢å›¾ä¹¦</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookid</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    BookInfo <span class="hljs-title function_">selectByPrimaryKey</span><span class="hljs-params">(Integer bookid)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç»Ÿè®¡æœç´¢æ€»æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> searchParam</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">selectCountBySearch</span><span class="hljs-params">(Map&lt;String, Object&gt; searchParam)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *æœç´¢æŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> searchParam</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    List&lt;BookInfo&gt; <span class="hljs-title function_">selectBySearch</span><span class="hljs-params">(Map&lt;String, Object&gt; searchParam)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®idåˆ é™¤å›¾ä¹¦</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> bookid</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">deleteByPrimaryKey</span><span class="hljs-params">(Integer bookid)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ å›¾ä¹¦</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> record</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(BookInfo record)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ å›¾ä¹¦-åŠ¨æ€</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> record</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">insertSelective</span><span class="hljs-params">(BookInfo record)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›´æ–°å›¾ä¹¦ä¿¡æ¯-åŠ¨æ€</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> record</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">updateByPrimaryKeySelective</span><span class="hljs-params">(BookInfo record)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›´æ–°å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> record</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">updateByPrimaryKey</span><span class="hljs-params">(BookInfo record)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ†é¡µæŸ¥è¯¢å›¾ä¹¦</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> begin</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> size</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    List&lt;BookInfo&gt; <span class="hljs-title function_">selectAllByLimit</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;begin&quot;)</span> Integer begin, <span class="hljs-meta">@Param(&quot;size&quot;)</span> Integer size)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®ç§ç±»ç»Ÿè®¡å›¾ä¹¦æ•°é‡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> map</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">selectCountByType</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®ç§ç±»æŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> map</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    List&lt;BookInfo&gt; <span class="hljs-title function_">selectByType</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>BookInfoMapper.xml</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.zh.mapper.BookInfoMapper&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.zh.model.BookInfo&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;bookId&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;INTEGER&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;bookid&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;bookName&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;VARCHAR&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;bookname&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;bookAuthor&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;VARCHAR&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;bookauthor&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;bookPrice&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;DECIMAL&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;bookprice&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;bookTypeId&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;INTEGER&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;booktypeid&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;bookTypeName&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;INTEGER&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;booktypename&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;bookDesc&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;VARCHAR&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;bookdesc&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;isBorrowed&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;TINYINT&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;isborrowed&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;bookImg&quot;</span> <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">&quot;TINYINT&quot;</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;bookimg&quot;</span> /&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;Base_Column_List&quot;</span>&gt;</span><br>    bookId, bookName, bookAuthor, bookPrice, bookTypeId, bookDesc, isBorrowed, bookImg<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectCount&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>    select count(*) from book_manager.book_info<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAll&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;</span><br>    select bookId, bookName, bookAuthor,bookPrice, bookTypeId, bookDesc,isBorrowed, bookImg,<br>           (select bookTypeName from book_manager.book_type where book_manager.book_type.bookTypeId = book_manager.book_info.bookTypeId) as bookTypeName<br>    from book_manager.book_info<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectByPrimaryKey&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;</span><br>    select<br>    <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;Base_Column_List&quot;</span> /&gt;</span><br>    from book_manager.book_info<br>    where bookId = #&#123;bookid,jdbcType=INTEGER&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectCountBySearch&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>    select count(*) from book_manager.book_info<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookname != null and bookname != &#x27;&#x27; &quot;</span>&gt;</span>and bookName like concat(&#x27;%&#x27;,#&#123;bookname&#125;,&#x27;%&#x27;)<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookauthor != null and bookauthor != &#x27;&#x27; &quot;</span>&gt;</span>and bookAuthor like concat(&#x27;%&#x27;,#&#123;bookauthor&#125;,&#x27;%&#x27;)<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;booktypeid != null and booktypeid != &#x27;&#x27; &quot;</span>&gt;</span>and bookTypeId = #&#123;booktypeid&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectBySearch&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;</span><br>    select bookId, bookName, bookAuthor,bookPrice, bookTypeId, bookDesc,isBorrowed, bookImg,<br>    (select bookTypeName from book_manager.book_type where book_manager.book_type.bookTypeId = book_manager.book_info.bookTypeId) as bookTypeName<br>    from book_manager.book_info<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookname != null and bookname != &#x27;&#x27; &quot;</span>&gt;</span>and bookName like concat(&#x27;%&#x27;,#&#123;bookname&#125;,&#x27;%&#x27;)<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookauthor != null and bookauthor != &#x27;&#x27; &quot;</span>&gt;</span>and bookAuthor like concat(&#x27;%&#x27;,#&#123;bookauthor&#125;,&#x27;%&#x27;)<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;booktypeid != null and booktypeid != &#x27;&#x27; &quot;</span>&gt;</span>and bookTypeId = #&#123;booktypeid&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br>    limit #&#123;begin&#125;, #&#123;size&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteByPrimaryKey&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br>    delete from book_manager.book_info<br>    where bookId = #&#123;bookid,jdbcType=INTEGER&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insert&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.zh.model.BookInfo&quot;</span>&gt;</span><br>    insert into book_manager.book_info (bookId, bookName, bookAuthor,<br>      bookPrice, bookTypeId, bookDesc, <br>      isBorrowed, bookImg)<br>    values (#&#123;bookid,jdbcType=INTEGER&#125;, #&#123;bookname,jdbcType=VARCHAR&#125;, #&#123;bookauthor,jdbcType=VARCHAR&#125;, <br>      #&#123;bookprice,jdbcType=DECIMAL&#125;, #&#123;booktypeid,jdbcType=INTEGER&#125;, #&#123;bookdesc,jdbcType=VARCHAR&#125;, <br>      #&#123;isborrowed,jdbcType=TINYINT&#125;, #&#123;bookimg,jdbcType=TINYINT&#125;)<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;insertSelective&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.zh.model.BookInfo&quot;</span>&gt;</span><br>    insert into book_manager.book_info<br>    <span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;(&quot;</span> <span class="hljs-attr">suffix</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">suffixOverrides</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookid != null&quot;</span>&gt;</span>bookId,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookname != null&quot;</span>&gt;</span>bookName,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookauthor != null&quot;</span>&gt;</span>bookAuthor,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookprice != null&quot;</span>&gt;</span>bookPrice,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;booktypeid != null&quot;</span>&gt;</span>bookTypeId,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookdesc != null&quot;</span>&gt;</span>bookDesc,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;isborrowed != null&quot;</span>&gt;</span>isBorrowed,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookimg != null&quot;</span>&gt;</span>bookImg,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">&quot;values (&quot;</span> <span class="hljs-attr">suffix</span>=<span class="hljs-string">&quot;)&quot;</span> <span class="hljs-attr">suffixOverrides</span>=<span class="hljs-string">&quot;,&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookid != null&quot;</span>&gt;</span>#&#123;bookid,jdbcType=INTEGER&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookname != null&quot;</span>&gt;</span>#&#123;bookname,jdbcType=VARCHAR&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookauthor != null&quot;</span>&gt;</span>#&#123;bookauthor,jdbcType=VARCHAR&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookprice != null&quot;</span>&gt;</span>#&#123;bookprice,jdbcType=DECIMAL&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;booktypeid != null&quot;</span>&gt;</span>#&#123;booktypeid,jdbcType=INTEGER&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookdesc != null&quot;</span>&gt;</span>#&#123;bookdesc,jdbcType=VARCHAR&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;isborrowed != null&quot;</span>&gt;</span>#&#123;isborrowed,jdbcType=TINYINT&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookimg != null&quot;</span>&gt;</span>#&#123;bookimg,jdbcType=TINYINT&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateByPrimaryKeySelective&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.zh.model.BookInfo&quot;</span>&gt;</span><br>    update book_manager.book_info<br>    <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookname != null&quot;</span>&gt;</span>bookName = #&#123;bookname,jdbcType=VARCHAR&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookauthor != null&quot;</span>&gt;</span>bookAuthor = #&#123;bookauthor,jdbcType=VARCHAR&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookprice != null&quot;</span>&gt;</span>bookPrice = #&#123;bookprice,jdbcType=DECIMAL&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;booktypeid != null&quot;</span>&gt;</span>bookTypeId = #&#123;booktypeid,jdbcType=INTEGER&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookdesc != null&quot;</span>&gt;</span>bookDesc = #&#123;bookdesc,jdbcType=VARCHAR&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;isborrowed != null&quot;</span>&gt;</span>isBorrowed = #&#123;isborrowed,jdbcType=TINYINT&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;bookimg != null&quot;</span>&gt;</span>bookImg = #&#123;bookimg,jdbcType=TINYINT&#125;,<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br>    where bookId = #&#123;bookid,jdbcType=INTEGER&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateByPrimaryKey&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.zh.model.BookInfo&quot;</span>&gt;</span><br>    update book_manager.book_info<br>    set bookName = #&#123;bookname,jdbcType=VARCHAR&#125;,<br>      bookAuthor = #&#123;bookauthor,jdbcType=VARCHAR&#125;,<br>      bookPrice = #&#123;bookprice,jdbcType=DECIMAL&#125;,<br>      bookTypeId = #&#123;booktypeid,jdbcType=INTEGER&#125;,<br>      bookDesc = #&#123;bookdesc,jdbcType=VARCHAR&#125;,<br>      isBorrowed = #&#123;isborrowed,jdbcType=TINYINT&#125;,<br>      bookImg = #&#123;bookimg,jdbcType=TINYINT&#125;<br>    where bookId = #&#123;bookid,jdbcType=INTEGER&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectAllByLimit&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;</span><br>    select bookId, bookName, bookAuthor,bookPrice, bookTypeId, bookDesc,isBorrowed, bookImg,<br>           (select bookTypeName from book_manager.book_type where book_manager.book_type.bookTypeId = book_manager.book_info.bookTypeId) as bookTypeName<br>    from book_manager.book_info<br>    limit #&#123;begin&#125;, #&#123;size&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><br><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectCountByType&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;int&quot;</span>&gt;</span><br>    select count(*) from book_manager.book_info<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;booktypeid != null and booktypeid != &#x27;&#x27; &quot;</span>&gt;</span>and bookTypeId = #&#123;booktypeid&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectByType&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;BaseResultMap&quot;</span>&gt;</span><br>    select bookId, bookName, bookAuthor,bookPrice, bookTypeId, bookDesc,isBorrowed, bookImg,<br>    (select bookTypeName from book_manager.book_type where book_manager.book_type.bookTypeId = book_manager.book_info.bookTypeId) as bookTypeName<br>    from book_manager.book_info<br>    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;booktypeid != null and booktypeid != &#x27;&#x27; &quot;</span>&gt;</span>and bookTypeId = #&#123;booktypeid&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span><br>    limit #&#123;begin&#125;, #&#123;size&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-é¡¹ç›®æˆªå›¾"><a href="#3-é¡¹ç›®æˆªå›¾" class="headerlink" title="3.é¡¹ç›®æˆªå›¾"></a>3.é¡¹ç›®æˆªå›¾</h3><p>ç™»å½•</p><p><img src="http://cdn.ohheng.cn/202406122134476.jpg" alt="img"></p><p>å›¾ä¹¦ä¿¡æ¯ç®¡ç†</p><p><img src="http://cdn.ohheng.cn/202406122134180.jpg" alt="img"></p><p>æ·»åŠ å›¾ä¹¦</p><p><img src="http://cdn.ohheng.cn/202406122134175.jpg" alt="img"></p><p>å›¾ä¹¦ç±»å‹ç®¡ç†</p><p><img src="http://cdn.ohheng.cn/202406122134460.jpg" alt="img"></p><p>æ·»åŠ å›¾ä¹¦ç±»å‹</p><p><img src="http://cdn.ohheng.cn/202406122134183.jpg" alt="img"></p><p>å€Ÿé˜…ä¿¡æ¯ç®¡ç†</p><p><img src="http://cdn.ohheng.cn/202406122134173.jpg" alt="img"></p><p>ç”¨æˆ·ç®¡ç†</p><p><img src="http://cdn.ohheng.cn/202406122134175.jpg" alt="img"></p><p>æ·»åŠ ç”¨æˆ·</p><p><img src="http://cdn.ohheng.cn/202406122134167.jpg" alt="img"></p><p>ä¿®æ”¹å¯†ç </p><p><img src="http://cdn.ohheng.cn/202406122134030.png" alt="image-20240612213453999"></p>]]></content>
    
    
    <categories>
      
      <category>é¡¹ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SpringBoot</tag>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ’åºç®—æ³•çš„å¯è§†åŒ–</title>
    <link href="/2024/06/12/(%E9%A1%B9%E7%9B%AE)%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/"/>
    <url>/2024/06/12/(%E9%A1%B9%E7%9B%AE)%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E5%8F%AF%E8%A7%86%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h2 id="1ã€æ•°æ®ç»“æ„ä¸ç®—æ³•è®¾è®¡è¯¾ç¨‹å®è·µ"><a href="#1ã€æ•°æ®ç»“æ„ä¸ç®—æ³•è®¾è®¡è¯¾ç¨‹å®è·µ" class="headerlink" title="1ã€æ•°æ®ç»“æ„ä¸ç®—æ³•è®¾è®¡è¯¾ç¨‹å®è·µ"></a>1ã€æ•°æ®ç»“æ„ä¸ç®—æ³•è®¾è®¡è¯¾ç¨‹å®è·µ</h2><p>æ’åºæ•°æ®éšæœºäº§ç”Ÿï¼Œé’ˆå¯¹éšæœºæ¡ˆä¾‹ï¼Œå¯¹å†’æ³¡æ’åºã€å †æ’åºã€å½’å¹¶ç®—æ³•ï¼Œæä¾›æ’åºæ‰§è¡Œè¿‡ç¨‹çš„åŠ¨æ€å›¾å½¢æ¼”ç¤ºã€‚</p><p>æ‰©å±•ï¼šç›´æ¥æ’å…¥æ’åºã€é€‰æ‹©æ’åºã€å¿«é€Ÿæ’åºç®—æ³•</p><p><a href="https://github.com/Ohheng/sorting-visualizer">GitHubä»“åº“</a></p><h2 id="2ã€è¯¦ç»†åˆ†æ"><a href="#2ã€è¯¦ç»†åˆ†æ" class="headerlink" title="2ã€è¯¦ç»†åˆ†æ"></a>2ã€è¯¦ç»†åˆ†æ</h2><h3 id="2-1-æ•°æ®ç»“æ„ä¸ç®—æ³•è¯´æ˜"><a href="#2-1-æ•°æ®ç»“æ„ä¸ç®—æ³•è¯´æ˜" class="headerlink" title="2.1 æ•°æ®ç»“æ„ä¸ç®—æ³•è¯´æ˜"></a>2.1 æ•°æ®ç»“æ„ä¸ç®—æ³•è¯´æ˜</h3><h4 id="2-1-1-å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰"><a href="#2-1-1-å†’æ³¡æ’åºï¼ˆBubble-Sortï¼‰" class="headerlink" title="2.1.1 å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰"></a>2.1.1 å†’æ³¡æ’åºï¼ˆBubble Sortï¼‰</h4><p>å†’æ³¡æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°éå†è¦æ’åºçš„åˆ—è¡¨ï¼Œæ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”äº¤æ¢å®ƒä»¬çš„ä½ç½®ï¼Œç›´åˆ°æ•´ä¸ªåˆ—è¡¨æ’åºå®Œæˆã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ä»åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œä¾æ¬¡æ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ ã€‚</li><li>å¦‚æœç¬¬ä¸€ä¸ªå…ƒç´ æ¯”ç¬¬äºŒä¸ªå…ƒç´ å¤§ï¼ˆæˆ–è€…å°ï¼Œå–å†³äºå‡åºè¿˜æ˜¯é™åºï¼‰ï¼Œåˆ™äº¤æ¢å®ƒä»¬çš„ä½ç½®ã€‚</li><li>ç»§ç»­å‘åéå†åˆ—è¡¨ï¼Œé‡å¤ä¸Šè¿°æ¯”è¾ƒå’Œäº¤æ¢æ­¥éª¤ï¼Œç›´åˆ°åˆ—è¡¨æœ«å°¾ã€‚</li><li>é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œæ¯æ¬¡éå†éƒ½ä¼šå°†å½“å‰æœªæ’åºéƒ¨åˆ†çš„æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…ƒç´ â€œå†’æ³¡â€åˆ°åˆ—è¡¨çš„æœ«å°¾ã€‚</li><li>é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ•´ä¸ªåˆ—è¡¨æ’åºå®Œæˆã€‚</li></ol><p>å†’æ³¡æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n^2)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚å°½ç®¡å†’æ³¡æ’åºå®ç°ç®€å•ï¼Œä½†åœ¨å®é™…åº”ç”¨ä¸­å¾€å¾€æ•ˆç‡è¾ƒä½ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹æ•°æ®é›†ã€‚</p><h4 id="2-1-3-å †æ’åºï¼ˆHeap-Sortï¼‰"><a href="#2-1-3-å †æ’åºï¼ˆHeap-Sortï¼‰" class="headerlink" title="2.1.3 å †æ’åºï¼ˆHeap Sortï¼‰"></a>2.1.3 å †æ’åºï¼ˆHeap Sortï¼‰</h4><p>å †æ’åºæ˜¯ä¸€ç§åˆ©ç”¨å †æ•°æ®ç»“æ„çš„æ’åºç®—æ³•ã€‚å®ƒåˆ©ç”¨äº†å †çš„ç‰¹æ€§ï¼Œå°†å¾…æ’åºçš„åºåˆ—æ„é€ æˆä¸€ä¸ªå †ï¼ˆé€šå¸¸æ˜¯å¤§é¡¶å †ï¼‰ï¼Œç„¶åä¾æ¬¡å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œé‡æ–°è°ƒæ•´å †ï¼Œç›´åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>æ„å»ºåˆå§‹å †ï¼šå°†å¾…æ’åºçš„åºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ã€‚</li><li>äº¤æ¢å †é¡¶å…ƒç´ å’Œæœ«å°¾å…ƒç´ ï¼šå°†å †é¡¶å…ƒç´ ï¼ˆå½“å‰æœ€å¤§å…ƒç´ ï¼‰ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œå¹¶å°†å †çš„å¤§å°å‡ 1ã€‚</li><li>é‡æ–°è°ƒæ•´å †ï¼šå°†å‰©ä½™å…ƒç´ é‡æ–°è°ƒæ•´æˆå¤§é¡¶å †ã€‚</li><li>é‡å¤æ­¥éª¤ 2 å’Œæ­¥éª¤ 3ï¼Œç›´åˆ°å †çš„å¤§å°ä¸º 1ã€‚</li></ol><p>å †æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n log n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚å®ƒå…·æœ‰åŸåœ°æ’åºçš„ç‰¹ç‚¹ï¼Œä¸éœ€è¦é¢å¤–çš„ç©ºé—´ï¼Œå› æ­¤åœ¨ç©ºé—´æ•ˆç‡ä¸Šæ¯”è¾ƒé«˜ã€‚</p><h4 id="2-1-3-å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰"><a href="#2-1-3-å½’å¹¶æ’åºï¼ˆMerge-Sortï¼‰" class="headerlink" title="2.1.3 å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰"></a>2.1.3 å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰</h4><p>å½’å¹¶æ’åºæ˜¯ä¸€ç§åˆ†æ²»ç®—æ³•ï¼Œå®ƒå°†å¾…æ’åºæ•°ç»„åˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œç„¶åé€’å½’åœ°å¯¹å­æ•°ç»„è¿›è¡Œæ’åºï¼Œæœ€åå°†æ’å¥½åºçš„å­æ•°ç»„åˆå¹¶æˆä¸€ä¸ªæ•´ä½“æœ‰åºçš„æ•°ç»„ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆ†è§£ï¼šå°†å¾…æ’åºçš„æ•°ç»„é€’å½’åœ°åˆ†è§£æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œç›´åˆ°æ¯ä¸ªå­æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ ã€‚</li><li>åˆå¹¶ï¼šå°†ä¸¤ä¸ªæœ‰åºçš„å­æ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„ï¼ŒåŒæ—¶è¿›è¡Œæ’åºã€‚</li><li>é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰å­æ•°ç»„åˆå¹¶å®Œæˆï¼Œå¾—åˆ°æœ€ç»ˆçš„æœ‰åºæ•°ç»„ã€‚</li></ol><p>å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º O(n log n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(n)ï¼Œå› ä¸ºéœ€è¦é¢å¤–çš„ç©ºé—´æ¥å­˜å‚¨ä¸´æ—¶æ•°ç»„ã€‚å°½ç®¡å½’å¹¶æ’åºåœ¨ç©ºé—´ä¸Šç•¥é«˜ï¼Œä½†ç”±äºå…¶ç¨³å®šæ€§å’Œé€‚ç”¨æ€§ï¼Œä»ç„¶è¢«å¹¿æ³›åº”ç”¨ã€‚</p><h4 id="2-1-4-ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰"><a href="#2-1-4-ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion-Sortï¼‰" class="headerlink" title="2.1.4 ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰"></a>2.1.4 ç›´æ¥æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰</h4><p>ç›´æ¥æ’å…¥æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œå®ƒé€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºã€‚</li><li>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æã€‚</li><li>å¦‚æœå·²æ’åºçš„å…ƒç´ å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å·²æ’åºå…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ã€‚</li><li>é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ã€‚</li><li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®ä¸­ã€‚</li><li>é‡å¤æ­¥éª¤2-5ã€‚</li></ol><p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šæœ€åæƒ…å†µ O(n^2)ï¼Œæœ€å¥½æƒ…å†µ O(n) <strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1) <strong>ç‰¹ç‚¹</strong>ï¼šé€‚åˆäºå°‘é‡æ•°æ®çš„æ’åºï¼Œç¨³å®šã€‚</p><h4 id="2-1-5-é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰"><a href="#2-1-5-é€‰æ‹©æ’åºï¼ˆSelection-Sortï¼‰" class="headerlink" title="2.1.5 é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰"></a>2.1.5 é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰</h4><p>é€‰æ‹©æ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯æ¯æ¬¡ä»å¾…æ’åºçš„æ•°æ®ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œå­˜æ”¾åœ¨åºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç›´åˆ°å…¨éƒ¨å¾…æ’åºçš„æ•°æ®å…ƒç´ æ’å®Œã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>åˆå§‹çŠ¶æ€ï¼šæ— åºåŒºä¸º R[1..n]ï¼Œæœ‰åºåŒºä¸ºç©ºã€‚</li><li>ç¬¬iè¶Ÿæ’åº (i&#x3D;1,2,3â€¦n-1) å¼€å§‹æ—¶ï¼Œå½“å‰æœ‰åºåŒºå’Œæ— åºåŒºåˆ†åˆ«ä¸º R[1..i-1] å’Œ R(i..n)ã€‚è¯¥è¶Ÿæ’åºä»å½“å‰æ— åºåŒºä¸­é€‰å‡ºå…³é”®å­—æœ€å°çš„è®°å½• R[k]ï¼Œå°†å®ƒä¸æ— åºåŒºçš„ç¬¬ä¸€ä¸ªè®°å½• Räº¤æ¢ï¼Œä½¿ R[1..i] å’Œ R[i+1..n] åˆ†åˆ«å˜ä¸ºè®°å½•ä¸ªæ•°å¢åŠ 1ä¸ªçš„æ–°æœ‰åºåŒºå’Œè®°å½•ä¸ªæ•°å‡å°‘1ä¸ªçš„æ–°æ— åºåŒºã€‚</li><li>n-1è¶Ÿç»“æŸï¼Œæ•°ç»„æœ‰åºåŒ–ã€‚</li></ol><p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n^2) <strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1) <strong>ç‰¹ç‚¹</strong>ï¼šç®€å•ç›´è§‚ï¼Œé€‚åˆæ•°æ®é‡å°çš„æƒ…å†µï¼Œä¸ç¨³å®šã€‚</p><h4 id="2-1-6-å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰"><a href="#2-1-6-å¿«é€Ÿæ’åºï¼ˆQuick-Sortï¼‰" class="headerlink" title="2.1.6 å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰"></a>2.1.6 å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰</h4><p>å¿«é€Ÿæ’åºæ˜¯ä¸€ç§åˆ†æ²»ç®—æ³•ï¼Œé€šè¿‡ä¸€æ¬¡æ’åºå°†è¦æ’åºçš„æ•°æ®åˆ†å‰²æˆç‹¬ç«‹çš„ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½æ¯”å¦å¤–ä¸€éƒ¨åˆ†çš„æ‰€æœ‰æ•°æ®éƒ½è¦å°ï¼Œç„¶åå†æŒ‰æ­¤æ–¹æ³•å¯¹è¿™ä¸¤éƒ¨åˆ†æ•°æ®åˆ†åˆ«è¿›è¡Œå¿«é€Ÿæ’åºã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ä»æ•°åˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸ºâ€œåŸºå‡†â€ï¼ˆpivotï¼‰ã€‚</li><li>é‡æ–°æ’åºæ•°åˆ—ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ‘†åœ¨åŸºå‡†çš„åé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ã€‚åœ¨è¿™ä¸ªåˆ†åŒºé€€å‡ºä¹‹åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œã€‚</li><li>é€’å½’åœ°ï¼ˆrecursiveï¼‰æŠŠå°äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°åˆ—æ’åºã€‚</li></ol><p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šæœ€åæƒ…å†µ O(n^2)ï¼Œå¹³å‡æƒ…å†µ O(n log n) <strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(log n)ï¼ˆé€’å½’è°ƒç”¨é€ æˆçš„æ ˆç©ºé—´ï¼‰ <strong>ç‰¹ç‚¹</strong>ï¼šé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®çš„æ’åºï¼Œä¸ç¨³å®šã€‚</p><h3 id="2-2-è®¾è®¡æ€è·¯"><a href="#2-2-è®¾è®¡æ€è·¯" class="headerlink" title="2.2 è®¾è®¡æ€è·¯"></a>2.2 è®¾è®¡æ€è·¯</h3><ol><li><p><strong>ç›®æ ‡è®¾å®š</strong>ï¼š</p><p>åˆ›å»ºä¸€ä¸ªå¯è§†åŒ–å·¥å…·ï¼Œå±•ç¤ºä¸åŒæ’åºç®—æ³•çš„æ‰§è¡Œè¿‡ç¨‹,è®©ç”¨æˆ·èƒ½å¤Ÿç›´è§‚åœ°ç†è§£æ’åºç®—æ³•çš„å·¥ä½œåŸç†ã€‚</p></li><li><p><strong>æŠ€æœ¯é€‰å‹</strong>ï¼š</p><ul><li>é€‰æ‹©Pythonè¯­è¨€ï¼Œå› å…¶ç®€æ´æ˜“æ‡‚ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„åº“æ”¯æŒã€‚</li><li>é€‰æ‹©Matplotlibåº“ï¼Œä¸ä»…æ”¯æŒæ•°æ®å¯è§†åŒ–ï¼Œè¿˜èƒ½ç”ŸæˆåŠ¨ç”»ï¼Œä¸FFMpegç»“åˆåèƒ½ç›´æ¥è¾“å‡ºè§†é¢‘æ ¼å¼ã€‚</li></ul></li><li><p><strong>æ’åºç®—æ³•å®ç°</strong>ï¼š</p><ul><li>é‡‡ç”¨Pythonå®ç°å¤šç§æ’åºç®—æ³•ï¼Œå¦‚å†’æ³¡æ’åºã€å½’å¹¶æ’åºã€å †æ’åºç­‰ã€‚</li><li>æ¯ç§æ’åºç®—æ³•éƒ½è®¾è®¡ä¸ºèƒ½å¤Ÿè®°å½•å…¶æ‰§è¡Œè¿‡ç¨‹ä¸­çš„â€œå¸§â€ã€‚</li></ul></li><li><p><strong>åŠ¨ç”»å¸§å¤„ç†</strong>ï¼š</p><ul><li>åœ¨æ’åºç®—æ³•çš„å…³é”®æ­¥éª¤æˆªå–æ•°æ®çŠ¶æ€ï¼Œä½œä¸ºåŠ¨ç”»çš„ä¸€å¸§ã€‚</li><li>ä½¿ç”¨æ·±æ‹·è´æ¥ä¿å­˜æ¯ä¸€å¸§çš„çŠ¶æ€ï¼Œç¡®ä¿åŠ¨ç”»çš„æµç•…æ€§å’Œæ•°æ®çš„ä¸€è‡´æ€§ã€‚</li></ul></li><li><p><strong>é¢œè‰²ç¼–ç </strong>ï¼š</p><ul><li>ä¸ºäº†çªå‡ºæ˜¾ç¤ºæ’åºè¿‡ç¨‹ä¸­çš„é‡è¦æ“ä½œï¼Œé‡‡ç”¨é¢œè‰²ç¼–ç æ¥å¢å¼ºè§†è§‰æ•ˆæœã€‚ä¾‹å¦‚ï¼Œåœ¨äº¤æ¢å…ƒç´ æ—¶ï¼Œå°†æ¶‰åŠçš„å…ƒç´ æ ‡è®°ä¸ºç‰¹å®šé¢œè‰²ã€‚</li></ul></li><li><p><strong>åŠ¨ç”»å±•ç¤º</strong>ï¼š</p><ul><li>åˆ©ç”¨Matplotlibçš„åŠ¨ç”»åŠŸèƒ½ï¼Œå°†æ’åºè¿‡ç¨‹çš„å¸§è¿ç»­æ’­æ”¾ï¼Œå½¢æˆåŠ¨ç”»ã€‚</li><li>æä¾›æ’­æ”¾ã€ä¿å­˜ä¸ºHTMLæˆ–MP4æ–‡ä»¶çš„åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„å±•ç¤ºéœ€æ±‚ã€‚</li></ul></li><li><p><strong>ç”¨æˆ·äº¤äº’</strong>ï¼š</p><ul><li>å…è®¸ç”¨æˆ·é€šè¿‡å‘½ä»¤è¡Œå‚æ•°é€‰æ‹©æ’åºç®—æ³•å’Œæ•°æ®ç±»å‹ã€‚</li><li>æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰åŠ¨ç”»çš„å¸§é—´éš”å’Œæ¯ç§’å¸§æ•°ï¼ˆfpsï¼‰ã€‚</li><li>ç”¨æˆ·å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œç•Œé¢é€‰æ‹©æ’­æ”¾åŠ¨ç”»ã€ä¿å­˜ä¸ºè§†é¢‘æˆ–HTMLæ–‡ä»¶</li></ul></li><li><p><strong>ä»£ç å®ç°</strong>ï¼š</p><ul><li>å¯¹äºæ¯ç§æ’åºç®—æ³•ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸ä»…æ‰§è¡Œæ’åºï¼Œè¿˜ç”ŸæˆåŠ¨ç”»å¸§ã€‚</li><li>ä½¿ç”¨æ³¨é‡Šæ˜ç¡®åŒºåˆ†åŠ¨ç”»å¸§æ“ä½œéƒ¨åˆ†ï¼Œä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯ç»´æŠ¤æ€§ã€‚</li></ul></li><li><p><strong>æ‰©å±•æ€§</strong>ï¼š</p><ul><li>è®¾è®¡æ—¶è€ƒè™‘åˆ°æ‰©å±•æ€§ï¼Œæ–¹ä¾¿æœªæ¥æ·»åŠ æ›´å¤šçš„æ’åºç®—æ³•å’Œå±•ç¤ºç‰¹æ€§ã€‚</li></ul></li></ol><p><strong>è¿è¡Œæµç¨‹å›¾ï¼š</strong></p><p><img src="http://cdn.ohheng.cn/202405061031600.png" alt="æ’åºå¯è§†åŒ–"></p><ol><li><strong>å¼€å§‹</strong>ï¼šç”¨æˆ·å¯åŠ¨æ’åºç®—æ³•å¯è§†åŒ–è¿‡ç¨‹ã€‚</li><li><strong>è¿è¡Œ <code>output.py</code> è„šæœ¬</strong>ï¼šç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ <code>output.py</code> è„šæœ¬ï¼Œå¼€å§‹æ‰§è¡Œæ’åºç®—æ³•çš„å¯è§†åŒ–ã€‚</li><li><strong>å‘½ä»¤è¡Œå‚æ•°è§£æ</strong>ï¼šè„šæœ¬é¦–å…ˆè§£æç”¨æˆ·æä¾›çš„å‘½ä»¤è¡Œå‚æ•°ï¼Œè¿™äº›å‚æ•°å†³å®šäº†å¯è§†åŒ–çš„ç±»å‹ï¼ˆæ’­æ”¾ã€ä¿å­˜ä¸º HTML æˆ– MP4ï¼‰å’Œæ’åºç®—æ³•çš„å…·ä½“é€‰é¡¹ã€‚</li><li><strong>é€‰æ‹©æ•°æ®ç±»å‹</strong>ï¼šæ ¹æ®ç”¨æˆ·çš„é€‰æ‹©ï¼Œè„šæœ¬ç¡®å®šè¦ç”Ÿæˆçš„æ•°æ®é›†ç±»å‹ï¼Œå¦‚éšæœºã€å‡ ä¹æ’åºå¥½ã€å°‘æ•°å”¯ä¸€å€¼æˆ–é€†åºã€‚</li><li><strong>ç”Ÿæˆæ•°æ®é›†</strong>ï¼šè„šæœ¬ä½¿ç”¨é€‰å®šçš„æ•°æ®ç±»å‹ç”Ÿæˆä¸€ä¸ªå¾…æ’åºçš„æ•°æ®é›†ã€‚</li><li><strong>æ‰§è¡Œæ’åºç®—æ³•</strong>ï¼šè„šæœ¬å¯¹ç”Ÿæˆçš„æ•°æ®é›†æ‰§è¡Œç”¨æˆ·é€‰æ‹©çš„æ’åºç®—æ³•ã€‚</li><li><strong>ç”ŸæˆåŠ¨ç”»å¸§</strong>ï¼šåœ¨æ’åºè¿‡ç¨‹ä¸­ï¼Œè„šæœ¬è®°å½•æ¯ä¸€æ­¥çš„çŠ¶æ€ï¼Œç”ŸæˆåŠ¨ç”»å¸§ã€‚</li><li><strong>ä¿å­˜åŠ¨ç”»å¸§ä¸ºå›¾ç‰‡åºåˆ—</strong>ï¼šè„šæœ¬å°†ç”Ÿæˆçš„åŠ¨ç”»å¸§ä¿å­˜ä¸ºä¸€ç³»åˆ—å›¾ç‰‡æ–‡ä»¶ã€‚</li><li><strong>æ’­æ”¾åŠ¨ç”»</strong>ï¼ˆå¦‚æœç”¨æˆ·é€‰æ‹© <code>play</code>ï¼‰ï¼š<ul><li>è„šæœ¬ä½¿ç”¨ Matplotlib åœ¨çª—å£ä¸­æ’­æ”¾æ’åºè¿‡ç¨‹çš„åŠ¨ç”»ã€‚</li></ul></li><li><strong>ä¿å­˜ä¸º HTML</strong>ï¼ˆå¦‚æœç”¨æˆ·é€‰æ‹© <code>save-html</code>ï¼‰ï¼š<ul><li>è„šæœ¬åˆ›å»ºä¸€ä¸ª HTML æ–‡ä»¶ã€‚</li><li>å°†å›¾ç‰‡åºåˆ—åµŒå…¥åˆ° HTML æ–‡ä»¶ä¸­ã€‚</li><li>ä¿å­˜ HTML é¡µé¢ï¼Œç”¨æˆ·å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹åŠ¨ç”»ã€‚</li></ul></li><li><strong>ä¿å­˜ä¸º MP4</strong>ï¼ˆå¦‚æœç”¨æˆ·é€‰æ‹© <code>save-mp4</code>ï¼‰ï¼š<ul><li>è„šæœ¬æŒ‡å®šè¾“å‡ºè·¯å¾„å’Œæ–‡ä»¶åã€‚</li><li>è°ƒç”¨ FFmpeg å‘½ä»¤è¡Œå·¥å…·ï¼Œå°†å›¾ç‰‡åºåˆ—è½¬æ¢ä¸º MP4 è§†é¢‘æ–‡ä»¶ã€‚</li><li>ç”Ÿæˆ MP4 è§†é¢‘æ–‡ä»¶ã€‚</li></ul></li><li><strong>ç»“æŸ</strong>ï¼šå®ŒæˆåŠ¨ç”»çš„æ’­æ”¾æˆ–ä¿å­˜åï¼Œç¨‹åºç»“æŸã€‚</li></ol><h3 id="2-3-ç±»-æ¥å£-å‡½æ•°è®¾è®¡"><a href="#2-3-ç±»-æ¥å£-å‡½æ•°è®¾è®¡" class="headerlink" title="2.3 ç±»&#x2F;æ¥å£&#x2F;å‡½æ•°è®¾è®¡"></a>2.3 ç±»&#x2F;æ¥å£&#x2F;å‡½æ•°è®¾è®¡</h3><h4 id="2-3-1-output-py"><a href="#2-3-1-output-py" class="headerlink" title="2.3.1 output.py"></a>2.3.1 <code>output.py</code></h4><p>è¿™ä¸ªè„šæœ¬æ˜¯ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºï¼Œå®ƒå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Pythonå’Œmatplotlibæ¥åˆ›å»ºæ•™è‚²æ€§çš„æ’åºç®—æ³•å¯è§†åŒ–å·¥å…·ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œä¸ç¨‹åºäº¤äº’ï¼Œé€‰æ‹©ä¸åŒçš„æ’åºç®—æ³•å’Œæ•°æ®ç±»å‹æ¥è§‚å¯Ÿæ’åºè¿‡ç¨‹ã€‚ç¨‹åºæ”¯æŒå°†æ’åºè¿‡ç¨‹ä¿å­˜ä¸ºè§†é¢‘æ–‡ä»¶æˆ–HTMLæ–‡ä»¶ï¼Œæ–¹ä¾¿åˆ†äº«å’ŒæŸ¥çœ‹ã€‚</p><p><strong>å…¨å±€å˜é‡ï¼š</strong></p><ul><li><code>stype_dic</code>ï¼šä¸€ä¸ªå­—å…¸ï¼Œå­˜å‚¨æ’åºç®—æ³•åç§°å’Œå®ƒä»¬å¯¹åº”çš„ç´¢å¼•ã€‚</li><li><code>titles</code>ï¼šä¸€ä¸ªåˆ—è¡¨ï¼Œå­˜å‚¨æ’åºç®—æ³•çš„æ ‡é¢˜å’Œæ—¶é—´å¤æ‚åº¦ã€‚</li><li><code>funs</code>ï¼šä¸€ä¸ªåˆ—è¡¨ï¼Œå­˜å‚¨æ’åºç®—æ³•çš„å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•å¿«é€Ÿè®¿é—®ã€‚</li></ul><p><strong>å‡½æ•°å®šä¹‰ï¼š</strong></p><ul><li><code>create_original_data(dtype)</code>ï¼šæ ¹æ®æä¾›çš„ç±»å‹ï¼ˆâ€randomâ€, â€œreversedâ€, â€œfew-uniqueâ€, â€œalmost-sortedâ€ï¼‰ç”ŸæˆåŸå§‹æ•°æ®é›†ã€‚</li><li><code>draw_chart(stype, original_data, frame_interval)</code>ï¼šç»˜åˆ¶æŒ‡å®šæ’åºç®—æ³•çš„åŠ¨æ€å›¾è¡¨ã€‚</li><li><code>draw_all_charts(original_data, frame_interval)</code>ï¼šç»˜åˆ¶æ‰€æœ‰æ’åºç®—æ³•çš„åŠ¨æ€å›¾è¡¨ã€‚</li></ul><p><strong>ä¸»ç¨‹åºï¼š</strong></p><ol><li>è„šæœ¬é¦–å…ˆå°è¯•ä»ç”¨æˆ·é‚£é‡Œè·å–è¦æ’åºçš„æ•°æ®é¡¹æ•°é‡ï¼Œå¦‚æœå¤±è´¥åˆ™é»˜è®¤ä¸º32ã€‚</li><li>æ ¹æ®å‘½ä»¤è¡Œå‚æ•°ï¼Œè„šæœ¬å¯ä»¥æ‰§è¡Œä¸‰ç§æ“ä½œï¼šæ’­æ”¾åŠ¨ç”»ï¼ˆ<code>play</code>ï¼‰ã€ä¿å­˜ä¸ºHTMLï¼ˆ<code>save-html</code>ï¼‰æˆ–ä¿å­˜ä¸ºMP4æ–‡ä»¶ï¼ˆ<code>save-mp4</code>ï¼‰ã€‚</li><li>æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æ’åºç®—æ³•ç±»å‹å’Œæ•°æ®ç±»å‹ï¼Œè„šæœ¬è°ƒç”¨ç›¸åº”çš„å‡½æ•°ç”ŸæˆåŠ¨ç”»å¹¶å±•ç¤ºæˆ–ä¿å­˜ã€‚</li></ol><h4 id="2-3-2-data-py"><a href="#2-3-2-data-py" class="headerlink" title="2.3.2 data.py"></a>2.3.2 <code>data.py</code></h4><p>ç”¨äºåœ¨æ’åºç®—æ³•å¯è§†åŒ–ä¸­è¡¨ç¤ºå’ŒåŒºåˆ†æ•°æ®å…ƒç´ ã€‚é€šè¿‡åŠ¨æ€è®¾ç½®é¢œè‰²ï¼Œå®ƒå¯ä»¥å¢åŠ å¯è§†åŒ–çš„å¯è¯»æ€§å’Œå¸å¼•åŠ›ã€‚</p><p><strong>å…¨å±€å˜é‡ï¼š</strong></p><p>data_countï¼ˆintï¼‰:è¡¨ç¤ºæ•°æ®é›†ä¸­å…ƒç´ çš„æ€»æ•°,å›ºå®šä¸º32ã€‚</p><p><strong>æ„é€ å‡½æ•°ï¼š</strong></p><p><code> __init__(self, value):</code>åˆå§‹åŒ–æ•°æ®å…ƒç´ çš„å€¼ï¼Œå¹¶è°ƒç”¨ <code>set_color</code> æ–¹æ³•æ¥è®¾ç½®é¢œè‰²ã€‚</p><p><strong>ç±»æ–¹æ³•ï¼š</strong></p><p><code>set_color(self, rgba=None)</code>: è®¾ç½®æ•°æ®å…ƒç´ çš„é¢œè‰²ã€‚å¦‚æœæœªæä¾› <code>rgba</code>ï¼Œåˆ™æ ¹æ®å…ƒç´ çš„å€¼è‡ªåŠ¨è®¡ç®—é¢œè‰²ã€‚</p><h4 id="2-3-3-æ’åºç®—æ³•"><a href="#2-3-3-æ’åºç®—æ³•" class="headerlink" title="2.3.3 æ’åºç®—æ³•"></a>2.3.3 æ’åºç®—æ³•</h4><ul><li><p><strong>å†’æ³¡æ’åº<code>bubblesort.py</code></strong></p><ul><li>æ‰§è¡Œå†’æ³¡æ’åºï¼Œå¹¶é€šè¿‡æ·±æ‹·è´ï¼ˆ<code>copy.deepcopy</code>ï¼‰åœ¨æ¯ä¸ªå…³é”®æ­¥éª¤ä¿å­˜æ•°æ®çŠ¶æ€ï¼Œå½¢æˆåŠ¨ç”»å¸§åˆ—è¡¨ï¼ˆ<code>frames</code>ï¼‰ã€‚åœ¨æ¯æ¬¡å…ƒç´ äº¤æ¢æ—¶ï¼Œå°†å½“å‰çŠ¶æ€æ·»åŠ åˆ°å¸§åˆ—è¡¨ï¼Œå¹¶æ ‡è®°äº¤æ¢çš„å…ƒç´ ä¸ºçº¢è‰²ï¼Œä»¥çªå‡ºæ˜¾ç¤ºã€‚</li></ul></li><li><p><strong>å †æ’åº<code>heapsort.py</code></strong></p><p><strong>å‡½æ•°å®šä¹‰</strong></p><ol><li><strong>heap_sort(data_set)</strong>: æ‰§è¡Œå †æ’åºç®—æ³•ï¼Œå¹¶è®°å½•åŠ¨ç”»å¸§,è¿”å›ä¸€ä¸ªåŒ…å«æ’åºè¿‡ç¨‹æ¯ä¸€æ­¥éª¤çš„åŠ¨ç”»å¸§åˆ—è¡¨</li><li><strong>heap_adjust(ds, head, tail, frames)</strong>: å¯¹å †è¿›è¡Œè°ƒæ•´ï¼Œç¡®ä¿å †çš„æ€§è´¨å¾—åˆ°æ»¡è¶³</li></ol></li><li><p><strong>å½’å¹¶æ’åº<code>mergesort.py</code></strong></p><p><strong>å‡½æ•°å®šä¹‰</strong></p><ol><li><strong>merge_sort(data_set)</strong>: æ‰§è¡Œå½’å¹¶æ’åºç®—æ³•ï¼Œå¹¶è®°å½•åŠ¨ç”»å¸§ã€‚è¿”å›ä¸€ä¸ªåŒ…å«æ’åºè¿‡ç¨‹æ¯ä¸€æ­¥éª¤çš„åŠ¨ç”»å¸§</li><li><strong>split_merge(ds, head, tail, frames)</strong>: é€’å½’åœ°åˆ†å‰²æ•°æ®é›†ï¼Œå¹¶åˆå¹¶å·²æ’åºçš„å­åºåˆ—ã€‚</li></ol></li><li><p><strong>ç›´æ¥æ’å…¥æ’åº<code>insertionsort.py</code></strong></p><ul><li>æ‰§è¡Œæ’å…¥æ’åºç®—æ³•ï¼Œè®°å½•åŠ¨ç”»å¸§ã€‚è¿”å›ä¸€ä¸ªåŒ…å«æ’åºè¿‡ç¨‹æ¯ä¸€æ­¥éª¤çš„åŠ¨ç”»å¸§åˆ—è¡¨ã€‚</li></ul></li><li><p><strong>é€‰æ‹©æ’åº<code>selectionsort.py</code></strong></p><ul><li>æ‰§è¡Œé€‰æ‹©æ’åºç®—æ³•ï¼Œè®°å½•åŠ¨ç”»å¸§ã€‚è¿”å›ä¸€ä¸ªåŒ…å«æ’åºè¿‡ç¨‹æ¯ä¸€æ­¥éª¤çš„åŠ¨ç”»å¸§åˆ—è¡¨ã€‚</li></ul></li><li><p><strong>å¿«é€Ÿæ’åº<code>quicksort.py</code></strong></p><p><strong>å‡½æ•°å®šä¹‰</strong></p><ol><li><strong>quick_sort(data_set)</strong>: ä½œä¸ºå¿«é€Ÿæ’åºçš„å…¥å£å‡½æ•°ï¼Œåˆå§‹åŒ–å¸§åˆ—è¡¨å¹¶è°ƒç”¨é€’å½’çš„å¿«é€Ÿæ’åºå‡½æ•° <code>qsort</code>ã€‚è¿”å›ä¸€ä¸ªåŒ…å«æ’åºè¿‡ç¨‹æ¯ä¸€æ­¥éª¤çš„åŠ¨ç”»å¸§åˆ—è¡¨ã€‚</li><li><strong>qsort(ds, head, tail, frames)</strong>: é€’å½’å‡½æ•°ï¼Œæ‰§è¡Œå¿«é€Ÿæ’åºçš„åˆ†åŒºæ“ä½œï¼Œå¹¶é€’å½’åœ°å¯¹å­éƒ¨åˆ†è¿›è¡Œæ’åºã€‚</li></ol></li></ul><h3 id="2-4-ç±»-æ¥å£-å‡½æ•°å…³ç³»"><a href="#2-4-ç±»-æ¥å£-å‡½æ•°å…³ç³»" class="headerlink" title="2.4 ç±»&#x2F;æ¥å£&#x2F;å‡½æ•°å…³ç³»"></a>2.4 ç±»&#x2F;æ¥å£&#x2F;å‡½æ•°å…³ç³»</h3><pre><code class=" mermaid">classDiagram    class Data &#123;        +int value        +tuple color        +int data_count        __init__(value) : Data        set_color(rgba=None) : None    &#125;    class SortingAlgorithm &#123;        +vector&lt;Data&gt; dataSet        __init__(dataSet) : SortingAlgorithm        +sort() : None        +getAlgorithmName() : str        +getSortedData() : vector&lt;Data&gt;    &#125;    class BubbleSort &#123;        +frames : vector&lt;Data&gt;        +bubble_sort(data_set) : vector&lt;Data&gt;    &#125;    class MergeSort &#123;        +frames : vector&lt;Data&gt;        +merge_sort(data_set) : vector&lt;Data&gt;        +split_merge(ds, head, tail, frames) : None    &#125;    class InsertionSort &#123;        +frames : vector&lt;Data&gt;        +insertion_sort(data_set) : vector&lt;Data&gt;    &#125;    class QuickSort &#123;        +frames : vector&lt;Data&gt;        +quick_sort(data_set) : vector&lt;Data&gt;        +qsort(ds, head, tail, frames) : None    &#125;    class SelectionSort &#123;        +frames : vector&lt;Data&gt;        +selection_sort(data_set) : vector&lt;Data&gt;    &#125;    class HeapSort &#123;        +frames : vector&lt;Data&gt;        +heap_sort(data_set) : vector&lt;Data&gt;        +heap_adjust(ds, head, tail, frames) : None        +color(ds, n) : vector&lt;Data&gt;    &#125;        SortingAlgorithm &lt;|-- BubbleSort    SortingAlgorithm &lt;|-- MergeSort    SortingAlgorithm &lt;|-- InsertionSort    SortingAlgorithm &lt;|-- QuickSort    SortingAlgorithm &lt;|-- SelectionSort    SortingAlgorithm &lt;|-- HeapSort</code></pre><h2 id="3ã€ç¨‹åºå®ç°"><a href="#3ã€ç¨‹åºå®ç°" class="headerlink" title="3ã€ç¨‹åºå®ç°"></a>3ã€ç¨‹åºå®ç°</h2><h3 id="3-1-æ ¸å¿ƒä»£ç è¯´æ˜"><a href="#3-1-æ ¸å¿ƒä»£ç è¯´æ˜" class="headerlink" title="3.1 æ ¸å¿ƒä»£ç è¯´æ˜"></a>3.1 æ ¸å¿ƒä»£ç è¯´æ˜</h3><h4 id="3-1-1-output-py"><a href="#3-1-1-output-py" class="headerlink" title="3.1.1 output.py"></a>3.1.1 <code>output.py</code></h4><p>åœ¨åˆ›å»ºåŸå§‹æ•°æ®é›†çš„å‡½æ•° <code>create_original_data</code> ä¸­ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯æ ¹æ®æä¾›çš„ç±»å‹ <code>dtype</code> ç”Ÿæˆä¸€ä¸ªç‰¹å®šé¡ºåºçš„æ•´æ•°åˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨å°†ç”¨äºåç»­çš„æ’åºç®—æ³•å¯è§†åŒ–ã€‚</p><p>ä»¥ä¸‹æ˜¯æ ¸å¿ƒä»£ç çš„è¯´æ˜ï¼š</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs haskell">å¤åˆ¶def create_original_data(dtype):<br>    <span class="hljs-class"><span class="hljs-keyword">data</span> = []</span><br>    <span class="hljs-keyword">if</span> dtype == <span class="hljs-string">&quot;random&quot;</span>:  # å¯¹éšæœºåºåˆ—è¿›è¡Œæ’åº<br>        <span class="hljs-class"><span class="hljs-keyword">data</span> = list(<span class="hljs-title">range</span>(1, <span class="hljs-type">Data</span>.<span class="hljs-title">data_count</span> + 1))  # ç”Ÿæˆåºåˆ— 1 åˆ° <span class="hljs-type">Data</span>.data_count çš„æ•´æ•°åˆ—è¡¨</span><br>        random.shuffle(<span class="hljs-class"><span class="hljs-keyword">data</span>)  # éšæœºæ‰“ä¹±åˆ—è¡¨</span><br>    elif dtype == <span class="hljs-string">&quot;reversed&quot;</span>:  # æŒ‰é™åºæ’åº<br>        <span class="hljs-class"><span class="hljs-keyword">data</span> = list(<span class="hljs-title">range</span>(<span class="hljs-type">Data</span>.<span class="hljs-title">data_count</span>, 0, -1))  # ç”Ÿæˆé™åºåˆ—è¡¨</span><br>    # ... çœç•¥å…¶ä»–æ¡ä»¶åˆ†æ”¯ ...<br>    return <span class="hljs-class"><span class="hljs-keyword">data</span></span><br></code></pre></td></tr></table></figure><p>æ ¸å¿ƒåŠŸèƒ½çš„åŸç†å’Œä½œç”¨ï¼š</p><ol><li><p><strong>éšæœºåºåˆ—</strong> (<code>&quot;random&quot;</code>):</p><ul><li><p>æ¨¡æ‹Ÿå¤§å¤šæ•°å®é™…åº”ç”¨åœºæ™¯ï¼Œå…ƒç´ åˆå§‹çŠ¶æ€æ— åºã€‚</p></li><li><p>ä½¿ç”¨ <code>range(1, Data.data_count + 1)</code> ç”Ÿæˆä¸€ä¸ªä» 1 åˆ° <code>Data.data_count</code> çš„æ•´æ•°åºåˆ—ã€‚</p></li><li><p>è°ƒç”¨ <code>random.shuffle(data)</code> å°†åˆ—è¡¨ä¸­çš„å…ƒç´ éšæœºæ‰“ä¹±ï¼Œä¸ºæ’åºç®—æ³•æä¾›ä¸€ä¸ªéšæœºçš„åˆå§‹çŠ¶æ€ã€‚</p></li></ul></li><li><p><strong>é™åºåºåˆ—</strong> (<code>&quot;reversed&quot;</code>):</p><ul><li><p>æµ‹è¯•æ’åºç®—æ³•å¤„ç†å®Œå…¨é€†åºçš„æ•°æ®é›†çš„èƒ½åŠ›ã€‚</p></li><li><p>ä½¿ç”¨ <code>range(Data.data_count, 0, -1)</code> ç”Ÿæˆä¸€ä¸ªä» <code>Data.data_count</code> é€’å‡åˆ° 1 çš„æ•´æ•°åºåˆ—ï¼Œå½¢æˆä¸€ä¸ªé™åºæ’åˆ—ã€‚</p></li></ul></li><li><p><strong>éƒ¨åˆ†é‡å¤åºåˆ—</strong> (<code>&quot;few-unique&quot;</code>):</p><ul><li><p>æ¨¡æ‹Ÿå…·æœ‰å¤§é‡é‡å¤å…ƒç´ çš„æ•°æ®é›†ï¼Œæµ‹è¯•æ’åºç®—æ³•çš„æ•ˆç‡ã€‚</p></li><li><p>å°†æ•°æ®é›†åˆ’åˆ†ä¸ºå››éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†åŒ…å«æ•°æ®é›†ä¸­çš„å››åˆ†ä¹‹ä¸€å…ƒç´ ï¼Œæ¯éƒ¨åˆ†çš„å…ƒç´ å€¼åˆ†åˆ«ä¸º <code>d</code>, <code>d * 2</code>, <code>d * 3</code>ï¼Œå…¶ä¸­ <code>d = Data.data_count // 4</code>ã€‚</p></li><li><p>ç„¶åéšæœºæ‰“ä¹±æ•´ä¸ªåˆ—è¡¨ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å«éƒ¨åˆ†é‡å¤å…ƒç´ çš„æ•°æ®é›†ã€‚</p></li></ul></li><li><p><strong>å‡ ä¹å·²æ’åºåºåˆ—</strong> (<code>&quot;almost-sorted&quot;</code>):</p><ul><li><p>æµ‹è¯•æ’åºç®—æ³•å¤„ç†æ¥è¿‘æœ‰åºçš„æ•°æ®é›†çš„æ€§èƒ½ã€‚</p></li><li><p>é¦–å…ˆç”Ÿæˆä¸€ä¸ªä» 1 åˆ° <code>Data.data_count</code> çš„å‡åºåˆ—è¡¨ã€‚</p></li><li><p>éšæœºé€‰æ‹©ä¸¤ä¸ªä½ç½® <code>a</code> å’Œ <code>b</code>ï¼Œå¦‚æœç›¸åŒåˆ™é‡æ–°é€‰æ‹© <code>b</code>ï¼Œä¿è¯ <code>a != b</code>ã€‚</p></li><li><p>äº¤æ¢è¿™ä¸¤ä¸ªä½ç½®çš„å…ƒç´ ï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªé™¤äº†ä¸€å¯¹å…ƒç´ å¤–éƒ½å·²æ’åºçš„æ•°æ®é›†ã€‚</p></li></ul></li></ol><p>åœ¨ <code>draw_chart</code> å‡½æ•°ä¸­ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯ç”Ÿæˆä¸€ä¸ªåŠ¨æ€å›¾è¡¨æ¥å±•ç¤ºç‰¹å®šæ’åºç®—æ³•çš„è¿‡ç¨‹ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³é”®ä»£ç æ®µçš„è¯´æ˜ï¼š</p><p><strong>å…³é”®ä»£ç æ®µ</strong></p><ol><li><p><strong>åˆå§‹åŒ–å›¾è¡¨å’Œå­å›¾</strong>ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">fig</span> = plt.figure(<span class="hljs-number">1</span>, figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>))<br><span class="hljs-attribute">axs</span> = fig.add_subplot(<span class="hljs-number">111</span>)<br><span class="hljs-attribute">axs</span>.set_xticks([])<br><span class="hljs-attribute">axs</span>.set_yticks([])<br><span class="hljs-attribute">plt</span>.subplots_adjust(left=<span class="hljs-number">0</span>.<span class="hljs-number">01</span>, bottom=<span class="hljs-number">0</span>.<span class="hljs-number">02</span>, right=<span class="hljs-number">0</span>.<span class="hljs-number">99</span>, top=<span class="hljs-number">0</span>.<span class="hljs-number">95</span>, wspace=<span class="hljs-number">0</span>.<span class="hljs-number">05</span>, hspace=<span class="hljs-number">0</span>.<span class="hljs-number">15</span>)<br></code></pre></td></tr></table></figure><ul><li>åˆ›å»ºä¸€ä¸ªæ–°å›¾è¡¨ï¼Œå¹¶è®¾ç½®ä¸º16:9çš„å°ºå¯¸ã€‚</li><li>æ·»åŠ ä¸€ä¸ªå­å›¾ã€‚</li><li>éšè—åæ ‡è½´åˆ»åº¦ï¼Œä»¥ä¾¿ä¸“æ³¨äºæ’åºåŠ¨ç”»ã€‚</li></ul></li><li><p><strong>è½¬æ¢åŸå§‹æ•°æ®å¹¶åˆå§‹åŒ–åŠ¨ç”»å¸§</strong>ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">data_set</span> = [Data(d) for d in original_data]<br><span class="hljs-attr">frames</span> = funs[stype](data_set)<br></code></pre></td></tr></table></figure><ul><li>å°†åŸå§‹æ•°æ®è½¬æ¢ä¸º <code>Data</code> å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åŒ…å«äº†æ’åºæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¦‚å€¼å’Œé¢œè‰²ã€‚</li><li>è°ƒç”¨æ’åºç®—æ³•å‡½æ•°ï¼Œè·å–æ•´ä¸ªæ’åºè¿‡ç¨‹çš„åŠ¨ç”»å¸§ã€‚</li></ul></li><li><p><strong>æ‰“å°æ’åºç®—æ³•ä¿¡æ¯</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;%s: %d frames.&quot;</span> % (re.findall(<span class="hljs-string">r&quot;\w+ Sort&quot;</span>, titles[stype])[<span class="hljs-number">0</span>], <span class="hljs-built_in">len</span>(frames)))<br></code></pre></td></tr></table></figure><ul><li>æ‰“å°æ’åºç®—æ³•çš„åç§°å’ŒåŠ¨ç”»å¸§æ€»æ•°ã€‚</li></ul></li><li><p><strong>å®šä¹‰åŠ¨ç”»å‡½æ•°</strong>ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-keyword">def</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params">fi</span>):<br>    <span class="hljs-comment"># ... åŠ¨ç”»ç»˜åˆ¶ä»£ç  ...</span><br></code></pre></td></tr></table></figure><ul><li>æ ¹æ®å½“å‰å¸§ç¼–å· <code>fi</code> ç»˜åˆ¶æŸ±çŠ¶å›¾ï¼Œè¡¨ç¤ºæ’åºç®—æ³•çš„å½“å‰çŠ¶æ€ã€‚</li></ul></li><li><p><strong>åˆ›å»ºåŠ¨ç”»å¯¹è±¡</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">anim = animation.FuncAnimation(fig, animate, <span class="hljs-attribute">frames</span>=len(frames), <span class="hljs-attribute">interval</span>=frame_interval)<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ <code>FuncAnimation</code> åˆ›å»ºåŠ¨ç”»å¯¹è±¡ï¼ŒæŒ‡å®šåŠ¨ç”»å‡½æ•°ã€å¸§æ•°å’Œå¸§é—´éš”ã€‚</li></ul></li><li><p><strong>è¿”å›ç»˜å›¾å¯¹è±¡å’ŒåŠ¨ç”»å¯¹è±¡</strong>ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin"><span class="hljs-keyword">return</span> plt, anim<br></code></pre></td></tr></table></figure><ul><li>è¿”å›Matplotlibçš„ç»˜å›¾å¯¹è±¡å’ŒåŠ¨ç”»å¯¹è±¡ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥æ“ä½œæˆ–å±•ç¤ºã€‚</li></ul></li></ol><p>åœ¨ <code>draw_all_charts</code> å‡½æ•°ä¸­ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰æ’åºç®—æ³•åŠ¨æ€å›¾è¡¨çš„å¤åˆå›¾è¡¨ã€‚</p><p>ä»¥ä¸‹æ˜¯å…³é”®ä»£ç æ®µåŠå…¶è¯´æ˜ï¼š</p><p><strong>å…³é”®ä»£ç æ®µ</strong></p><ol><li><p><strong>åˆå§‹åŒ–å›¾è¡¨å’Œå­å›¾</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">fig = plt.figure(<span class="hljs-number">1</span>, figsize=(<span class="hljs-number">16</span>, <span class="hljs-number">9</span>))<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">6</span>):<br>    axs.append(fig.add_subplot(<span class="hljs-number">331</span> + i))<br></code></pre></td></tr></table></figure><ul><li>åˆ›å»ºä¸€ä¸ªæ–°çš„å›¾è¡¨ï¼Œå¹¶ä¸ºå…­ç§æ’åºç®—æ³•è®¾ç½®å­å›¾ã€‚</li></ul></li><li><p><strong>éšè—åæ ‡è½´</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">axs[-<span class="hljs-number">1</span>].set_xticks([])<br>axs[-<span class="hljs-number">1</span>].set_yticks([])<br></code></pre></td></tr></table></figure><ul><li>éšè—æ‰€æœ‰å­å›¾çš„åæ ‡è½´åˆ»åº¦ï¼Œä»¥ä¾¿ä¸“æ³¨äºæ’åºåŠ¨ç”»ã€‚</li></ul></li><li><p><strong>è°ƒæ•´å­å›¾å¸ƒå±€</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">plt.subplots_adjust(left=<span class="hljs-number">0.01</span>, bottom=<span class="hljs-number">0.02</span>, right=<span class="hljs-number">0.99</span>, top=<span class="hljs-number">0.95</span>, wspace=<span class="hljs-number">0.05</span>, hspace=<span class="hljs-number">0.15</span>)<br></code></pre></td></tr></table></figure><ul><li>åœ¨ä¸€ä¸ªå›¾è¡¨ä¸­å±•ç¤ºå¤šç§æ’åºç®—æ³•ï¼Œæ¯ç§ç®—æ³•ä¸€ä¸ªå­å›¾ï¼Œæ–¹ä¾¿æ¯”è¾ƒå®ƒä»¬çš„æ•ˆç‡å’Œæ’åºè¿‡ç¨‹ã€‚</li><li>è°ƒæ•´å­å›¾çš„ä½ç½®å’Œé—´è·ï¼Œç¡®ä¿å®ƒä»¬åœ¨å›¾è¡¨ä¸­çš„å¸ƒå±€æ•´æ´ä¸”èˆ’é€‚ã€‚</li></ul></li><li><p><strong>è·å–æ’åºç®—æ³•çš„åŠ¨ç”»å¸§</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">6</span>):<br>    frames.append(funs[i](data_set))<br></code></pre></td></tr></table></figure><ul><li>ä¸ºæ¯ç§æ’åºç®—æ³•æ”¶é›†åŠ¨ç”»å¸§ï¼Œæ¯ä¸ªåŠ¨ç”»å¸§ä»£è¡¨æ’åºè¿‡ç¨‹ä¸­çš„ä¸€ä¸ªæ­¥éª¤ã€‚</li></ul></li><li><p><strong>æ‰“å°æ’åºç®—æ³•ä¿¡æ¯</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">6</span>):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;%-*s %*d frames&quot;</span> % (max_name_length, names[i], max_frame_length, frame_counts[i]))<br></code></pre></td></tr></table></figure><ul><li>æä¾›ç”¨æˆ·å‹å¥½çš„åé¦ˆï¼Œå‘ŠçŸ¥ç”¨æˆ·æ¯ç§æ’åºç®—æ³•çš„åç§°å’Œæ¶‰åŠçš„åŠ¨ç”»å¸§æ•°ã€‚</li></ul></li><li><p><strong>å®šä¹‰åŠ¨ç”»å‡½æ•°</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params">fi</span>):<br>    <span class="hljs-comment"># ... åŠ¨ç”»ç»˜åˆ¶ä»£ç  ...</span><br></code></pre></td></tr></table></figure><ul><li>å¯¹äºæ¯ç§æ’åºç®—æ³•ï¼Œç»˜åˆ¶å½“å‰å¸§çš„æŸ±çŠ¶å›¾ã€‚</li></ul></li><li><p><strong>åˆ›å»ºåŠ¨ç”»å¯¹è±¡</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">anim = animation.FuncAnimation(fig, animate, frames=<span class="hljs-built_in">max</span>(<span class="hljs-built_in">len</span>(f) <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> frames), interval=frame_interval)<br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ <code>FuncAnimation</code> è¿ç»­æ’­æ”¾æ‰€æœ‰æ’åºç®—æ³•çš„åŠ¨ç”»ï¼Œå…è®¸ç”¨æˆ·åŒæ—¶è§‚å¯Ÿæ‰€æœ‰ç®—æ³•çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</li></ul></li><li><p><strong>è¿”å›ç»˜å›¾å¯¹è±¡å’ŒåŠ¨ç”»å¯¹è±¡</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">return</span> plt, anim<br></code></pre></td></tr></table></figure><ul><li>è¿”å›Matplotlibçš„ç»˜å›¾å¯¹è±¡å’ŒåŠ¨ç”»å¯¹è±¡ã€‚</li></ul></li></ol><h4 id="3-1-2-æ’åºåŠ¨ç”»"><a href="#3-1-2-æ’åºåŠ¨ç”»" class="headerlink" title="3.1.2 æ’åºåŠ¨ç”»"></a>3.1.2 æ’åºåŠ¨ç”»</h4><p><strong>å®ç°æ­¥éª¤ï¼š</strong></p><ol><li>åˆå§‹åŒ–åŠ¨ç”»å¸§åˆ—è¡¨ <code>frames</code>ã€‚</li><li>å¤åˆ¶æ•°æ®é›† <code>ds</code> ä»¥é¿å…ç›´æ¥ä¿®æ”¹åŸå§‹æ•°æ®ã€‚</li><li>é€šè¿‡ä¸¤å±‚å¾ªç¯å®ç°å†’æ³¡æ’åºï¼Œå¤–å±‚æ§åˆ¶æ’åºè½®æ•°ï¼Œå†…å±‚æ‰§è¡Œç›¸é‚»å…ƒç´ çš„æ¯”è¾ƒå’Œäº¤æ¢ã€‚</li><li>æ¯æ¬¡äº¤æ¢åï¼Œæ·»åŠ å½“å‰çŠ¶æ€åˆ°åŠ¨ç”»å¸§åˆ—è¡¨ï¼Œå¹¶æ ‡è®°äº¤æ¢å…ƒç´ ã€‚</li><li>å¦‚æœä¸€è½®æ’åºæœªå‘ç”Ÿäº¤æ¢ï¼Œæå‰ç»“æŸæ’åºï¼Œå› ä¸ºæ•°æ®å·²ç»æœ‰åºã€‚</li><li>æ’åºå®Œæˆåï¼Œå°†æœ€ç»ˆæ’åºçŠ¶æ€æ·»åŠ åˆ°åŠ¨ç”»å¸§åˆ—è¡¨ã€‚</li><li>è¿”å›åŠ¨ç”»å¸§åˆ—è¡¨ï¼Œä¾›åŠ¨ç”»å±•ç¤ºä½¿ç”¨ã€‚</li></ol><h3 id="3-2-ç¨‹åºè¿è¡Œ"><a href="#3-2-ç¨‹åºè¿è¡Œ" class="headerlink" title="3.2 ç¨‹åºè¿è¡Œ"></a>3.2 ç¨‹åºè¿è¡Œ</h3><p>è¿è¡Œå¦‚ä¸‹å‘½ä»¤è°ƒç”¨æ‰€æœ‰å‡½æ•°:</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">python output.py arg1 <span class="hljs-comment">[arg2 <span class="hljs-comment">[arg3]</span>]</span>  <br></code></pre></td></tr></table></figure><p><strong>å‚æ•°è¯¦æƒ…ï¼š</strong></p><p>å‚æ•°1</p><ul><li><code>play</code>ï¼šåœ¨æ–°çª—å£ä¸­æ’­æ”¾ç‰¹å®šæ’åºç®—æ³•æˆ–æ‰€æœ‰ç®—æ³•çš„åŠ¨ç”»ï¼Œä½œä¸ºMatplotlibçš„â€œå›¾å½¢â€ã€‚</li><li><code>save-html</code>ï¼šå°†åŠ¨ç”»ä¿å­˜ä¸ºä¸€ç³»åˆ—å›¾åƒçš„HTMLé¡µé¢ã€‚</li><li><code>save-mp4</code>ï¼šå°†åŠ¨ç”»ä¿å­˜ä¸ºMP4è§†é¢‘ã€‚</li></ul><p>å‚æ•°2</p><ul><li><code>all</code> (é»˜è®¤)ï¼šåœ¨åŠ¨ç”»ä¸­æ˜¾ç¤ºæ‰€æœ‰æ’åºç®—æ³•çš„å¯è§†åŒ–ã€‚</li><li><code>bubble-sort</code>ï¼šä»…åœ¨åŠ¨ç”»ä¸­æ˜¾ç¤ºå†’æ³¡æ’åºç®—æ³•çš„å¯è§†åŒ–ã€‚</li><li><code>heap-sort</code>: ä»…åœ¨åŠ¨ç”»ä¸­æ˜¾ç¤ºå †æ’åºç®—æ³•çš„å¯è§†åŒ–ã€‚</li><li><code>merge-sort</code>: ä»…åœ¨åŠ¨ç”»ä¸­æ˜¾ç¤ºå½’å¹¶æ’åºç®—æ³•çš„å¯è§†åŒ–ã€‚</li><li><code>insertion-sort</code>: ä»…åœ¨åŠ¨ç”»ä¸­æ˜¾ç¤ºç›´æ¥æ’å…¥æ’åºç®—æ³•çš„å¯è§†åŒ–ã€‚</li><li><code>selection-sort</code>: ä»…åœ¨åŠ¨ç”»ä¸­æ˜¾ç¤ºé€‰æ‹©æ’åºç®—æ³•çš„å¯è§†åŒ–ã€‚</li><li><code>quick-sort</code>: ä»…åœ¨åŠ¨ç”»ä¸­æ˜¾ç¤ºå¿«é€Ÿæ’åºç®—æ³•çš„å¯è§†åŒ–ã€‚</li></ul><p>å‚æ•°3</p><ul><li><p><code>random</code> (é»˜è®¤)ï¼šå¯¹éšæœºåºåˆ—è¿›è¡Œæ’åºã€‚</p></li><li><p><code>almost-sorted</code>ï¼šå¯¹å‡ ä¹å·²æ’åºçš„åºåˆ—è¿›è¡Œæ’åºã€‚</p></li><li><p><code>few-unique</code>ï¼šå¯¹ä¸€äº›éƒ¨åˆ†é‡å¤çš„åºåˆ—è¿›è¡Œæ’åºã€‚</p></li><li><p><code>reversed</code>ï¼šå¯¹é™åºåºåˆ—è¿›è¡Œæ’åºã€‚</p></li></ul><p><strong>ç¤ºä¾‹</strong></p><ul><li>å†’æ³¡ç®—æ³•å¯¹é™åºåºåˆ—æ’åº</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">python output.py play bubble<span class="hljs-literal">-sort</span> reversed  <br></code></pre></td></tr></table></figure><table><thead><tr><th>æ’åºå‰</th><th>æ’åºå</th></tr></thead><tbody><tr><td><img src="http://cdn.ohheng.cn/202406121809579.jpg" alt="img"></td><td><img src="http://cdn.ohheng.cn/202406121809596.jpg" alt="img"></td></tr></tbody></table><ul><li>å †æ’åºç®—æ³•å¯¹éšæœºåºåˆ—æ’åº</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">python output.py play heap<span class="hljs-literal">-sort</span>  <br></code></pre></td></tr></table></figure><table><thead><tr><th>æ’åºå‰</th><th>æ’åºå</th></tr></thead><tbody><tr><td><img src="http://cdn.ohheng.cn/202406121809589.jpg" alt="img"></td><td><img src="http://cdn.ohheng.cn/202406121809598.jpg" alt="img"></td></tr></tbody></table><ul><li>å½’å¹¶æ’åºç®—æ³•å¯¹ä¸€äº›éƒ¨åˆ†é‡å¤çš„åºåˆ—æ’åº</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">python output.py play <span class="hljs-built_in">merge-sort</span> few<span class="hljs-literal">-unique</span>  <br></code></pre></td></tr></table></figure><table><thead><tr><th>æ’åºå‰</th><th>æ’åºå</th></tr></thead><tbody><tr><td><img src="http://cdn.ohheng.cn/202406121809603.jpg" alt="img"></td><td><img src="http://cdn.ohheng.cn/202406121809607.jpg" alt="img"></td></tr></tbody></table><ul><li>ç›´æ¥æ’å…¥æ’åºç®—æ³•å¯¹å‡ ä¹å·²æ’åºçš„åºåˆ—æ’åº</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">python output.py play insertion<span class="hljs-literal">-sort</span>  almost<span class="hljs-literal">-sorted</span>     <br></code></pre></td></tr></table></figure><table><thead><tr><th>æ’åºå‰</th><th>æ’åºå</th></tr></thead><tbody><tr><td><img src="http://cdn.ohheng.cn/202406121812220.jpg" alt="img"></td><td><img src="http://cdn.ohheng.cn/202406121812980.jpg" alt="img"></td></tr></tbody></table><ul><li>æ‰€æœ‰æ’åºç®—æ³•å¯¹éšæœºçš„åºåˆ—æ’åº</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">python output.py play     <br></code></pre></td></tr></table></figure><table><thead><tr><th>æ’åºå‰</th><th>æ’åºå</th></tr></thead><tbody><tr><td><img src="http://cdn.ohheng.cn/202406121809141.jpg" alt="img"></td><td><img src="http://cdn.ohheng.cn/202406121812496.jpg" alt="img"></td></tr></tbody></table><h2 id="4ã€æµ‹è¯•ä¸åˆ†æ"><a href="#4ã€æµ‹è¯•ä¸åˆ†æ" class="headerlink" title="4ã€æµ‹è¯•ä¸åˆ†æ"></a>4ã€æµ‹è¯•ä¸åˆ†æ</h2><table><thead><tr><th><strong>ç®—æ³•åç§°</strong></th><th><strong>æ—¶é—´å¤æ‚åº¦ï¼ˆå¹³å‡ï¼‰</strong></th><th><strong>æ—¶é—´å¤æ‚åº¦ï¼ˆæœ€åï¼‰</strong></th><th><strong>ç©ºé—´å¤æ‚åº¦</strong></th><th><strong>ç¨³å®šæ€§</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th><th><strong>ç¤ºä¾‹æ•°æ®é›†è¡¨ç°</strong></th></tr></thead><tbody><tr><td><strong>å†’æ³¡æ’åº</strong></td><td>O(n^2)</td><td>O(n^2)</td><td>O(1)</td><td>ç¨³å®š</td><td>å°è§„æ¨¡æ•°æ®æˆ–éƒ¨åˆ†æ’åº</td><td>æ…¢</td></tr><tr><td><strong>å †æ’åº</strong></td><td>O(n log n)</td><td>O(n log n)</td><td>O(1)</td><td>ä¸ç¨³å®š</td><td>å¤§è§„æ¨¡æ•°æ®é›†</td><td>å¿«</td></tr><tr><td><strong>å½’å¹¶æ’åº</strong></td><td>O(n log n)</td><td>O(n log n)</td><td>O(n)</td><td>ç¨³å®š</td><td>é€‚åˆå¤§æ•°æ®é‡ï¼Œå¯å¹¶è¡Œå¤„ç†</td><td>å¿«</td></tr><tr><td><strong>ç›´æ¥æ’å…¥æ’åº</strong></td><td>O(n^2)</td><td>O(n^2)</td><td>O(1)</td><td>ç¨³å®š</td><td>å°è§„æ¨¡æ•°æ®é›†æˆ–åˆå§‹æœ‰åºæ•°æ®</td><td>è¾ƒæ…¢</td></tr><tr><td><strong>é€‰æ‹©æ’åº</strong></td><td>O(n^2)</td><td>O(n^2)</td><td>O(1)</td><td>ä¸ç¨³å®š</td><td>å®æ—¶æ·»åŠ å…ƒç´ çš„åœºæ™¯</td><td>æ…¢</td></tr><tr><td><strong>å¿«é€Ÿæ’åº</strong></td><td>O(n log n)</td><td>O(n^2)</td><td>O(log n)</td><td>ä¸ç¨³å®š</td><td>å¤§è§„æ¨¡æ•°æ®é›†</td><td>å¿«ï¼ˆå¹³å‡æƒ…å†µï¼‰</td></tr></tbody></table><p>æ’åºç®—æ³•çš„é€‰æ‹©å–å†³äºæ•°æ®è§„æ¨¡ã€å†…å­˜é™åˆ¶ä»¥åŠæ˜¯å¦éœ€è¦ç®—æ³•ç¨³å®šæ€§ã€‚å¯¹äºå°æ•°æ®é›†ï¼Œç®€å•ç®—æ³•å¦‚å†’æ³¡æ’åºæˆ–ç›´æ¥æ’å…¥æ’åºè¶³å¤Ÿæœ‰æ•ˆã€‚å¯¹äºå¤§æ•°æ®é›†ï¼Œæ›´é«˜æ•ˆçš„ç®—æ³•å¦‚å †æ’åºã€å½’å¹¶æ’åºå’Œå¿«é€Ÿæ’åºæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚å½’å¹¶æ’åºè™½ç„¶å†…å­˜éœ€æ±‚è¾ƒé«˜ï¼Œä½†æä¾›äº†ç¨³å®šæ€§å’Œå¹¶è¡Œå¤„ç†èƒ½åŠ›ã€‚å¿«é€Ÿæ’åºåœ¨å¹³å‡æƒ…å†µä¸‹é€Ÿåº¦æœ€å¿«ï¼Œä½†åœ¨æœ€åæƒ…å†µä¸‹æ€§èƒ½ä¼šä¸‹é™ã€‚æ€»ä½“è€Œè¨€ï¼Œç®—æ³•çš„é€‰æ‹©éœ€è¦å¹³è¡¡æ—¶é—´æ•ˆç‡ã€ç©ºé—´æ¶ˆè€—å’Œç¨³å®šæ€§ã€‚</p><h2 id="5ã€ç»“è®ºä¸å¿ƒå¾—"><a href="#5ã€ç»“è®ºä¸å¿ƒå¾—" class="headerlink" title="5ã€ç»“è®ºä¸å¿ƒå¾—"></a>5ã€ç»“è®ºä¸å¿ƒå¾—</h2><p>åœ¨è¿™æ¬¡è¯¾ç¨‹è®¾è®¡ä¸­ï¼Œæˆ‘æ·±åˆ»ä½“ä¼šåˆ°äº†ç†è®ºä¸å®è·µç›¸ç»“åˆçš„é‡è¦æ€§ã€‚é¡¹ç›®çš„æ ¸å¿ƒæ˜¯å¼€å‘ä¸€ä¸ªæ’åºç®—æ³•å¯è§†åŒ–å·¥å…·ï¼Œè¿™ä¸ä»…è®©æˆ‘å¯¹å†’æ³¡æ’åºã€å¿«é€Ÿæ’åºç­‰ç»å…¸ç®—æ³•æœ‰äº†æ›´æ·±å…¥çš„ç†è§£ï¼Œä¹Ÿé”»ç‚¼äº†æˆ‘çš„ç¼–ç¨‹å®è·µèƒ½åŠ›ã€‚åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œæˆ‘é‡åˆ°äº†ä¸å°‘æŒ‘æˆ˜ï¼Œæ¯”å¦‚åŠ¨ç”»çš„æµç•…æ€§ã€æ€§èƒ½ä¼˜åŒ–ä»¥åŠç”¨æˆ·äº¤äº’è®¾è®¡ç­‰ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘æŸ¥é˜…äº†å¤§é‡èµ„æ–™ï¼Œå­¦ä¹ äº†æ–°çš„æŠ€æœ¯å’Œæ–¹æ³•ï¼Œè¿™ä¸ªè¿‡ç¨‹è™½ç„¶å……æ»¡æŒ‘æˆ˜ï¼Œä½†ä¹Ÿè®©æˆ‘è·å¾—äº†å·¨å¤§çš„æˆå°±æ„Ÿã€‚</p><p>æˆ‘å­¦ä¼šäº†å¦‚ä½•åˆç†è§„åˆ’æ—¶é—´ï¼Œå°†å¤§ç›®æ ‡åˆ†è§£ä¸ºå°ä»»åŠ¡ï¼Œå¹¶ä¸€æ­¥æ­¥åœ°å®Œæˆå®ƒä»¬ã€‚åœ¨è°ƒè¯•ä»£ç æ—¶ï¼Œæˆ‘æ„è¯†åˆ°äº†ä»£ç è§„èŒƒå’Œæ¨¡å—åŒ–è®¾è®¡çš„é‡è¦æ€§ï¼Œè¿™æœ‰åŠ©äºå¿«é€Ÿå®šä½å¹¶è§£å†³é—®é¢˜ã€‚æ­¤å¤–ï¼Œæˆ‘ä¹Ÿè®¤è¯†åˆ°äº†å›¢é˜Ÿåä½œçš„åŠ›é‡ï¼Œä¸é˜Ÿå‹çš„æœ‰æ•ˆæ²Ÿé€šå’Œåˆ†å·¥åˆä½œæ˜¯é¡¹ç›®æˆåŠŸçš„å…³é”®ã€‚</p><p>å°½ç®¡é¡¹ç›®ä¸­æœ‰è®¸å¤šå›°éš¾ï¼Œä½†é€šè¿‡ä¸æ‡ˆåŠªåŠ›ï¼Œæˆ‘å…‹æœäº†è¿™äº›éšœç¢ï¼Œå¹¶ä»ä¸­å­¦åˆ°äº†å¾ˆå¤šã€‚ä¾‹å¦‚ï¼Œæˆ‘å­¦ä¼šäº†å¦‚ä½•ä½¿ç”¨Matplotlibåº“æ¥åˆ¶ä½œåŠ¨ç”»ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è®©ç”¨æˆ·è‡ªå®šä¹‰æ’åºç®—æ³•å’Œæ•°æ®ç±»å‹ã€‚è¿™äº›æŠ€èƒ½å¯¹æˆ‘æœªæ¥çš„å­¦ä¹ å’Œå·¥ä½œéƒ½å°†äº§ç”Ÿç§¯æçš„å½±å“ã€‚</p><p>é—æ†¾çš„æ˜¯ï¼Œç”±äºæ—¶é—´é™åˆ¶ï¼Œé¡¹ç›®ä¸­ä»æœ‰ä¸€äº›æƒ³æ³•æœªèƒ½å®ç°ï¼Œæ¯”å¦‚å¢åŠ æ›´å¤šæ’åºç®—æ³•çš„å±•ç¤ºï¼Œä»¥åŠè¿›ä¸€æ­¥ä¼˜åŒ–ç”¨æˆ·ç•Œé¢ã€‚è¿™äº›æœªå®Œæˆçš„éƒ¨åˆ†ä¹Ÿç»™äº†æˆ‘æœªæ¥åŠªåŠ›çš„æ–¹å‘ã€‚æˆ‘è®¡åˆ’åœ¨æ¥ä¸‹æ¥çš„æ—¶é—´é‡Œï¼Œç»§ç»­å®Œå–„è¿™ä¸ªé¡¹ç›®ï¼Œæ¢ç´¢æ›´å¤šçš„åŠŸèƒ½å’Œä¼˜åŒ–ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œè¿™æ¬¡è¯¾ç¨‹è®¾è®¡æ˜¯ä¸€æ¬¡å®è´µçš„å­¦ä¹ ç»å†ã€‚å®ƒä¸ä»…æå‡äº†æˆ‘çš„æŠ€æœ¯èƒ½åŠ›ï¼Œè¿˜é”»ç‚¼äº†æˆ‘çš„é—®é¢˜è§£å†³èƒ½åŠ›å’Œåˆ›æ–°æ€ç»´ã€‚æˆ‘ç›¸ä¿¡ï¼Œé€šè¿‡è¿™æ¬¡é¡¹ç›®çš„ç»éªŒï¼Œæˆ‘å°†æ›´åŠ è‡ªä¿¡åœ°é¢å¯¹å°†æ¥çš„æŒ‘æˆ˜ï¼Œå¹¶ä¸æ–­è¿½æ±‚å“è¶Šã€‚</p>]]></content>
    
    
    <categories>
      
      <category>é¡¹ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºç¡€æ•°æ®ç»“æ„</title>
    <link href="/2024/06/12/(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95)%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    <url>/2024/06/12/(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95)%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
    
    <content type="html"><![CDATA[<h2 id="1-æ•°ç»„"><a href="#1-æ•°ç»„" class="headerlink" title="1. æ•°ç»„"></a>1. æ•°ç»„</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><strong>å®šä¹‰</strong></p><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ•°ç»„æ˜¯ç”±ä¸€ç»„å…ƒç´ ï¼ˆå€¼æˆ–å˜é‡ï¼‰ç»„æˆçš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªå…ƒç´ æœ‰è‡³å°‘ä¸€ä¸ªç´¢å¼•æˆ–é”®æ¥æ ‡è¯†</p><blockquote><p>In computer science, an <strong>array</strong> is a data structure consisting of a collection of <em>elements</em> (values or variables), each identified by at least one <em>array index</em> or <em>key</em></p></blockquote><p>å› ä¸ºæ•°ç»„å†…çš„å…ƒç´ æ˜¯<strong>è¿ç»­å­˜å‚¨</strong>çš„ï¼Œæ‰€ä»¥æ•°ç»„ä¸­å…ƒç´ çš„åœ°å€ï¼Œå¯ä»¥é€šè¿‡å…¶ç´¢å¼•è®¡ç®—å‡ºæ¥ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] array = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>&#125;<br></code></pre></td></tr></table></figure><p>çŸ¥é“äº†æ•°ç»„çš„<strong>æ•°æ®</strong>èµ·å§‹åœ°å€ $BaseAddress$ï¼Œå°±å¯ä»¥ç”±å…¬å¼ $BaseAddress + i * size$ è®¡ç®—å‡ºç´¢å¼• $i$ å…ƒç´ çš„åœ°å€</p><ul><li>$i$ å³ç´¢å¼•ï¼Œåœ¨ Javaã€C ç­‰è¯­è¨€éƒ½æ˜¯ä» 0 å¼€å§‹</li><li>$size$ æ˜¯æ¯ä¸ªå…ƒç´ å ç”¨å­—èŠ‚ï¼Œä¾‹å¦‚ $int$ å  $4$ï¼Œ$double$ å  $8$</li></ul><p><strong>å°æµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">byte</span>[] array = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>&#125;<br></code></pre></td></tr></table></figure><p>å·²çŸ¥ array çš„<strong>æ•°æ®</strong>çš„èµ·å§‹åœ°å€æ˜¯ 0x7138f94c8ï¼Œé‚£ä¹ˆå…ƒç´  3 çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ</p><blockquote><p>ç­”ï¼š0x7138f94c8 + 2 * 1 &#x3D; 0x7138f94ca</p></blockquote><p><strong>ç©ºé—´å ç”¨</strong></p><p>Java ä¸­æ•°ç»„ç»“æ„ä¸º</p><ul><li>8 å­—èŠ‚ markword</li><li>4 å­—èŠ‚ class æŒ‡é’ˆï¼ˆå‹ç¼© class æŒ‡é’ˆçš„æƒ…å†µï¼‰</li><li>4 å­—èŠ‚ æ•°ç»„å¤§å°ï¼ˆå†³å®šäº†æ•°ç»„æœ€å¤§å®¹é‡æ˜¯ $2^{32}$ï¼‰</li><li>æ•°ç»„å…ƒç´  + å¯¹é½å­—èŠ‚ï¼ˆjava ä¸­æ‰€æœ‰å¯¹è±¡å¤§å°éƒ½æ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€[^12]ï¼Œä¸è¶³çš„è¦ç”¨å¯¹é½å­—èŠ‚è¡¥è¶³ï¼‰</li></ul><p>ä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[] array = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br></code></pre></td></tr></table></figure><p>çš„å¤§å°ä¸º 40 ä¸ªå­—èŠ‚ï¼Œç»„æˆå¦‚ä¸‹</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">8 </span>+ <span class="hljs-number">4</span> + <span class="hljs-number">4</span> + <span class="hljs-number">5</span>*<span class="hljs-number">4</span> + <span class="hljs-number">4</span>(alignment)<br></code></pre></td></tr></table></figure><p><strong>éšæœºè®¿é—®æ€§èƒ½</strong></p><p>å³æ ¹æ®ç´¢å¼•æŸ¥æ‰¾å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$</p><h3 id="åŠ¨æ€æ•°ç»„"><a href="#åŠ¨æ€æ•°ç»„" class="headerlink" title="åŠ¨æ€æ•°ç»„"></a>åŠ¨æ€æ•°ç»„</h3><p><strong>java ç‰ˆæœ¬</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicArray</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterable</span>&lt;Integer&gt; &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// é€»è¾‘å¤§å°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">capacity</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>; <span class="hljs-comment">// å®¹é‡</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] array = &#123;&#125;;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å‘æœ€åä½ç½® [size] æ·»åŠ å…ƒç´ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> element å¾…æ·»åŠ å…ƒç´ </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addLast</span><span class="hljs-params">(<span class="hljs-type">int</span> element)</span> &#123;<br>        add(size, element);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å‘ [0 .. size] ä½ç½®æ·»åŠ å…ƒç´ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> index   ç´¢å¼•ä½ç½®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> element å¾…æ·»åŠ å…ƒç´ </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">int</span> element)</span> &#123;<br>        checkAndGrow();<br><br>        <span class="hljs-comment">// æ·»åŠ é€»è¾‘</span><br>        <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span> &amp;&amp; index &lt; size) &#123;<br>            <span class="hljs-comment">// å‘åæŒªåŠ¨, ç©ºå‡ºå¾…æ’å…¥ä½ç½®</span><br>            System.arraycopy(array, index,<br>                    array, index + <span class="hljs-number">1</span>, size - index);<br>        &#125;<br>        array[index] = element;<br>        size++;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkAndGrow</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// å®¹é‡æ£€æŸ¥</span><br>        <span class="hljs-keyword">if</span> (size == <span class="hljs-number">0</span>) &#123;<br>            array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[capacity];<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (size == capacity) &#123;<br>            <span class="hljs-comment">// è¿›è¡Œæ‰©å®¹, 1.5 1.618 2</span><br>            capacity += capacity &gt;&gt; <span class="hljs-number">1</span>;<br>            <span class="hljs-type">int</span>[] newArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[capacity];<br>            System.arraycopy(array, <span class="hljs-number">0</span>,<br>                    newArray, <span class="hljs-number">0</span>, size);<br>            array = newArray;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä» [0 .. size) èŒƒå›´åˆ é™¤å…ƒç´ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> index ç´¢å¼•ä½ç½®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> è¢«åˆ é™¤å…ƒç´ </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123; <span class="hljs-comment">// [0..size)</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> array[index];<br>        <span class="hljs-keyword">if</span> (index &lt; size - <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-comment">// å‘å‰æŒªåŠ¨</span><br>            System.arraycopy(array, index + <span class="hljs-number">1</span>,<br>                    array, index, size - index - <span class="hljs-number">1</span>);<br>        &#125;<br>        size--;<br>        <span class="hljs-keyword">return</span> removed;<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŸ¥è¯¢å…ƒç´ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> index ç´¢å¼•ä½ç½®, åœ¨ [0..size) åŒºé—´å†…</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> è¯¥ç´¢å¼•ä½ç½®çš„å…ƒç´ </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-keyword">return</span> array[index];<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * éå†æ–¹æ³•1</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> consumer éå†è¦æ‰§è¡Œçš„æ“ä½œ, å…¥å‚: æ¯ä¸ªå…ƒç´ </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">foreach</span><span class="hljs-params">(Consumer&lt;Integer&gt; consumer)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>            <span class="hljs-comment">// æä¾› array[i]</span><br>            <span class="hljs-comment">// è¿”å› void</span><br>            consumer.accept(array[i]);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * éå†æ–¹æ³•2 - è¿­ä»£å™¨éå†</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;Integer&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;Integer&gt;() &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">// æœ‰æ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span><br>                <span class="hljs-keyword">return</span> i &lt; size;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123; <span class="hljs-comment">// è¿”å›å½“å‰å…ƒç´ ,å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ </span><br>                <span class="hljs-keyword">return</span> array[i++];<br>            &#125;<br>        &#125;;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * éå†æ–¹æ³•3 - stream éå†</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> stream æµ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> IntStream <span class="hljs-title function_">stream</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> IntStream.of(Arrays.copyOfRange(array, <span class="hljs-number">0</span>, size));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>è¿™äº›æ–¹æ³•å®ç°ï¼Œéƒ½ç®€åŒ–äº† index çš„æœ‰æ•ˆæ€§åˆ¤æ–­ï¼Œå‡è®¾è¾“å…¥çš„ index éƒ½æ˜¯åˆæ³•çš„</li></ul><p><strong>æ’å…¥æˆ–åˆ é™¤æ€§èƒ½</strong></p><p>å¤´éƒ¨ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$</p><p>ä¸­é—´ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$</p><p>å°¾éƒ¨ä½ç½®ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ $O(1)$ï¼ˆå‡æ‘Šæ¥è¯´ï¼‰</p><h3 id="äºŒç»´æ•°ç»„"><a href="#äºŒç»´æ•°ç»„" class="headerlink" title="äºŒç»´æ•°ç»„"></a>äºŒç»´æ•°ç»„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span>[][] array = &#123;<br>    &#123;<span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>&#125;,<br>    &#123;<span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>&#125;,<br>    &#123;<span class="hljs-number">31</span>, <span class="hljs-number">32</span>, <span class="hljs-number">33</span>, <span class="hljs-number">34</span>, <span class="hljs-number">35</span>&#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>å†…å­˜å›¾å¦‚ä¸‹</p><img src="http://cdn.ohheng.cn/202406121512332.png" alt="image-20221104114132056" style="zoom:67%;" /><ul><li><p>äºŒç»´æ•°ç»„å  32 ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­ array[0]ï¼Œarray[1]ï¼Œarray[2] ä¸‰ä¸ªå…ƒç´ åˆ†åˆ«ä¿å­˜äº†æŒ‡å‘ä¸‰ä¸ªä¸€ç»´æ•°ç»„çš„å¼•ç”¨</p></li><li><p>ä¸‰ä¸ªä¸€ç»´æ•°ç»„å„å  40 ä¸ªå­—èŠ‚</p></li><li><p>å®ƒä»¬åœ¨å†…å±‚å¸ƒå±€ä¸Šæ˜¯<strong>è¿ç»­</strong>çš„</p></li></ul><p>æ›´ä¸€èˆ¬çš„ï¼Œå¯¹ä¸€ä¸ªäºŒç»´æ•°ç»„ $Array[m][n]$</p><ul><li>$m$ æ˜¯å¤–å±‚æ•°ç»„çš„é•¿åº¦ï¼Œå¯ä»¥çœ‹ä½œ row è¡Œ</li><li>$n$ æ˜¯å†…å±‚æ•°ç»„çš„é•¿åº¦ï¼Œå¯ä»¥çœ‹ä½œ column åˆ—</li><li>å½“è®¿é—® $Array[i][j]$ï¼Œ$0\leq i \lt m, 0\leq j \lt n$æ—¶ï¼Œå°±ç›¸å½“äº<ul><li>å…ˆæ‰¾åˆ°ç¬¬ $i$ ä¸ªå†…å±‚æ•°ç»„ï¼ˆè¡Œï¼‰</li><li>å†æ‰¾åˆ°æ­¤å†…å±‚æ•°ç»„ä¸­ç¬¬ $j$ ä¸ªå…ƒç´ ï¼ˆåˆ—ï¼‰</li></ul></li></ul><p><strong>å°æµ‹è¯•</strong></p><p>Java ç¯å¢ƒä¸‹ï¼ˆä¸è€ƒè™‘ç±»æŒ‡é’ˆå’Œå¼•ç”¨å‹ç¼©ï¼Œæ­¤ä¸ºé»˜è®¤æƒ…å†µï¼‰ï¼Œæœ‰ä¸‹é¢çš„äºŒç»´æ•°ç»„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">byte</span>[][] array = &#123;<br>    &#123;<span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>, <span class="hljs-number">15</span>&#125;,<br>    &#123;<span class="hljs-number">21</span>, <span class="hljs-number">22</span>, <span class="hljs-number">23</span>, <span class="hljs-number">24</span>, <span class="hljs-number">25</span>&#125;,<br>    &#123;<span class="hljs-number">31</span>, <span class="hljs-number">32</span>, <span class="hljs-number">33</span>, <span class="hljs-number">34</span>, <span class="hljs-number">35</span>&#125;,<br>&#125;;<br></code></pre></td></tr></table></figure><p>å·²çŸ¥ array <strong>å¯¹è±¡</strong>èµ·å§‹åœ°å€æ˜¯ 0x1000ï¼Œé‚£ä¹ˆ 23 è¿™ä¸ªå…ƒç´ çš„åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ</p><blockquote><p>ç­”ï¼š</p><ul><li>èµ·å§‹åœ°å€ 0x1000</li><li>å¤–å±‚æ•°ç»„å¤§å°ï¼š16å­—èŠ‚å¯¹è±¡å¤´ + 3å…ƒç´  * æ¯ä¸ªå¼•ç”¨4å­—èŠ‚ + 4 å¯¹é½å­—èŠ‚ &#x3D; 32 &#x3D; 0x20</li><li>ç¬¬ä¸€ä¸ªå†…å±‚æ•°ç»„å¤§å°ï¼š16å­—èŠ‚å¯¹è±¡å¤´ + 5å…ƒç´  * æ¯ä¸ªbyte1å­—èŠ‚ + 3 å¯¹é½å­—èŠ‚ &#x3D; 24 &#x3D; 0x18</li><li>ç¬¬äºŒä¸ªå†…å±‚æ•°ç»„ï¼Œ16å­—èŠ‚å¯¹è±¡å¤´ &#x3D; 0x10ï¼Œå¾…æŸ¥æ‰¾å…ƒç´ ç´¢å¼•ä¸º 2</li><li>æœ€åç»“æœ &#x3D; 0x1000 + 0x20 + 0x18 + 0x10 + 2*1 &#x3D; 0x104a</li></ul></blockquote><h3 id="å±€éƒ¨æ€§åŸç†"><a href="#å±€éƒ¨æ€§åŸç†" class="headerlink" title="å±€éƒ¨æ€§åŸç†"></a>å±€éƒ¨æ€§åŸç†</h3><p>è¿™é‡Œåªè®¨è®ºç©ºé—´å±€éƒ¨æ€§</p><ul><li>cpu è¯»å–å†…å­˜ï¼ˆé€Ÿåº¦æ…¢ï¼‰æ•°æ®åï¼Œä¼šå°†å…¶æ”¾å…¥é«˜é€Ÿç¼“å­˜ï¼ˆé€Ÿåº¦å¿«ï¼‰å½“ä¸­ï¼Œå¦‚æœåæ¥çš„è®¡ç®—å†ç”¨åˆ°æ­¤æ•°æ®ï¼Œåœ¨ç¼“å­˜ä¸­èƒ½è¯»åˆ°çš„è¯ï¼Œå°±ä¸å¿…è¯»å†…å­˜äº†</li><li>ç¼“å­˜çš„æœ€å°å­˜å‚¨å•ä½æ˜¯ç¼“å­˜è¡Œï¼ˆcache lineï¼‰ï¼Œä¸€èˆ¬æ˜¯ 64 bytesï¼Œä¸€æ¬¡è¯»çš„æ•°æ®å°‘äº†ä¸åˆ’ç®—å•Šï¼Œå› æ­¤æœ€å°‘è¯» 64 bytes å¡«æ»¡ä¸€ä¸ªç¼“å­˜è¡Œï¼Œå› æ­¤è¯»å…¥æŸä¸ªæ•°æ®æ—¶ä¹Ÿä¼šè¯»å–å…¶<strong>ä¸´è¿‘çš„æ•°æ®</strong>ï¼Œè¿™å°±æ˜¯æ‰€è°“<strong>ç©ºé—´å±€éƒ¨æ€§</strong></li></ul><p><strong>å¯¹æ•ˆç‡çš„å½±å“</strong></p><p>æ¯”è¾ƒä¸‹é¢ ij å’Œ ji ä¸¤ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ•ˆç‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000000</span>;<br><span class="hljs-type">int</span> <span class="hljs-variable">columns</span> <span class="hljs-operator">=</span> <span class="hljs-number">14</span>;<br><span class="hljs-type">int</span>[][] a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[rows][columns];<br><br><span class="hljs-type">StopWatch</span> <span class="hljs-variable">sw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StopWatch</span>();<br>sw.start(<span class="hljs-string">&quot;ij&quot;</span>);<br>ij(a, rows, columns);<br>sw.stop();<br>sw.start(<span class="hljs-string">&quot;ji&quot;</span>);<br>ji(a, rows, columns);<br>sw.stop();<br>System.out.println(sw.prettyPrint());<br></code></pre></td></tr></table></figure><p>ij æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ij</span><span class="hljs-params">(<span class="hljs-type">int</span>[][] a, <span class="hljs-type">int</span> rows, <span class="hljs-type">int</span> columns)</span> &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; rows; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; columns; j++) &#123;<br>            sum += a[i][j];<br>        &#125;<br>    &#125;<br>    System.out.println(sum);<br>&#125;<br></code></pre></td></tr></table></figure><p>ji æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ji</span><span class="hljs-params">(<span class="hljs-type">int</span>[][] a, <span class="hljs-type">int</span> rows, <span class="hljs-type">int</span> columns)</span> &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0L</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; columns; j++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; rows; i++) &#123;<br>            sum += a[i][j];<br>        &#125;<br>    &#125;<br>    System.out.println(sum);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœ</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">0<br>0<br><span class="hljs-section">StopWatch &#x27;&#x27;: running time = 96283300 ns</span><br><span class="hljs-section">---------------------------------------------</span><br><span class="hljs-section">ns         %     Task name</span><br><span class="hljs-section">---------------------------------------------</span><br>016196200  017%  ij<br>080087100  083%  ji<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° ij çš„æ•ˆç‡æ¯” ji å¿«å¾ˆå¤šï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>ç¼“å­˜æ˜¯æœ‰é™çš„ï¼Œå½“æ–°æ•°æ®æ¥äº†åï¼Œä¸€äº›æ—§çš„ç¼“å­˜è¡Œæ•°æ®å°±ä¼šè¢«è¦†ç›–</li><li>å¦‚æœä¸èƒ½å……åˆ†åˆ©ç”¨ç¼“å­˜çš„æ•°æ®ï¼Œå°±ä¼šé€ æˆæ•ˆç‡ä½ä¸‹</li></ul><p>ä»¥ ji æ‰§è¡Œä¸ºä¾‹ï¼Œç¬¬ä¸€æ¬¡å†…å¾ªç¯è¦è¯»å…¥ $[0,0]$ è¿™æ¡æ•°æ®ï¼Œç”±äºå±€éƒ¨æ€§åŸç†ï¼Œè¯»å…¥ $[0,0]$ çš„åŒæ—¶ä¹Ÿè¯»å…¥äº† $[0,1] â€¦ [0,13]$ï¼Œå¦‚å›¾æ‰€ç¤º</p><p><img src="http://cdn.ohheng.cn/202406121517637.png" alt="image-20221104164329026"></p><p>ä½†å¾ˆé—æ†¾ï¼Œç¬¬äºŒæ¬¡å†…å¾ªç¯è¦çš„æ˜¯ $[1,0]$ è¿™æ¡æ•°æ®ï¼Œç¼“å­˜ä¸­æ²¡æœ‰ï¼Œäºæ˜¯å†è¯»å…¥äº†ä¸‹å›¾çš„æ•°æ®</p><p><img src="http://cdn.ohheng.cn/202406121518343.png" alt="image-20221104164716282"></p><p>è¿™æ˜¾ç„¶æ˜¯ä¸€ç§æµªè´¹ï¼Œå› ä¸º $[0,1] â€¦ [0,13]$ åŒ…æ‹¬ $[1,1] â€¦ [1,13]$ è¿™äº›æ•°æ®è™½ç„¶è¯»å…¥äº†ç¼“å­˜ï¼Œå´æ²¡æœ‰åŠæ—¶ç”¨ä¸Šï¼Œè€Œç¼“å­˜çš„å¤§å°æ˜¯æœ‰é™çš„ï¼Œç­‰æ‰§è¡Œåˆ°ç¬¬ä¹æ¬¡å†…å¾ªç¯æ—¶</p><p><img src="http://cdn.ohheng.cn/202406121514921.png" alt="image-20221104164947154"></p><p>ç¼“å­˜çš„ç¬¬ä¸€è¡Œæ•°æ®å·²ç»è¢«æ–°çš„æ•°æ® $[8,0] â€¦ [8,13]$ è¦†ç›–æ‰äº†ï¼Œä»¥åå¦‚æœå†æƒ³è¯»ï¼Œæ¯”å¦‚ $[0,1]$ï¼Œåˆå¾—åˆ°å†…å­˜å»è¯»äº†</p><p>åŒç†å¯ä»¥åˆ†æ ij å‡½æ•°åˆ™èƒ½å……åˆ†åˆ©ç”¨å±€éƒ¨æ€§åŸç†åŠ è½½åˆ°çš„ç¼“å­˜æ•°æ®</p><p><strong>ä¸¾ä¸€åä¸‰</strong></p><ol><li><p>I&#x2F;O è¯»å†™æ—¶åŒæ ·å¯ä»¥ä½“ç°å±€éƒ¨æ€§åŸç†</p></li><li><p>æ•°ç»„å¯ä»¥å……åˆ†åˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œé‚£ä¹ˆé“¾è¡¨å‘¢ï¼Ÿ</p><blockquote><p>ç­”ï¼šé“¾è¡¨ä¸è¡Œï¼Œå› ä¸ºé“¾è¡¨çš„å…ƒç´ å¹¶éç›¸é‚»å­˜å‚¨</p></blockquote></li></ol><h3 id="è¶Šç•Œæ£€æŸ¥"><a href="#è¶Šç•Œæ£€æŸ¥" class="headerlink" title="è¶Šç•Œæ£€æŸ¥"></a>è¶Šç•Œæ£€æŸ¥</h3><p>java ä¸­å¯¹æ•°ç»„å…ƒç´ çš„è¯»å†™éƒ½æœ‰è¶Šç•Œæ£€æŸ¥ï¼Œç±»ä¼¼äºä¸‹é¢çš„ä»£ç </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">is_within_bounds</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> <span class="hljs-type">const</span>        </span><br><span class="hljs-function"></span>&#123; <br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> &lt;= index &amp;&amp; index &lt; <span class="hljs-built_in">length</span>(); <br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ä»£ç ä½ç½®ï¼š<code>openjdk\src\hotspot\share\oops\arrayOop.hpp</code></li></ul><p>åªä¸è¿‡æ­¤æ£€æŸ¥ä»£ç ï¼Œä¸éœ€è¦ç”±ç¨‹åºå‘˜è‡ªå·±æ¥è°ƒç”¨ï¼ŒJVM ä¼šå¸®æˆ‘ä»¬è°ƒç”¨</p><h2 id="2-é“¾è¡¨"><a href="#2-é“¾è¡¨" class="headerlink" title="2. é“¾è¡¨"></a>2. é“¾è¡¨</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><strong>å®šä¹‰</strong></p><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé“¾è¡¨æ˜¯æ•°æ®å…ƒç´ çš„çº¿æ€§é›†åˆï¼Œå…¶æ¯ä¸ªå…ƒç´ éƒ½æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ å­˜å‚¨ä¸Šå¹¶ä¸è¿ç»­</p><blockquote><p>In computer science, a <strong>linked list</strong> is a linear collection of data elements whose order is not given by their physical placement in memory. Instead, each element points to the next. </p></blockquote><p>å¯ä»¥åˆ†ç±»ä¸º[^5]</p><ul><li>å•å‘é“¾è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åªçŸ¥é“å…¶ä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯è°</li></ul><p><img src="http://cdn.ohheng.cn/202406121513167.png" alt="image-20221110083407176"></p><ul><li>åŒå‘é“¾è¡¨ï¼Œæ¯ä¸ªå…ƒç´ çŸ¥é“å…¶ä¸Šä¸€ä¸ªå…ƒç´ å’Œä¸‹ä¸€ä¸ªå…ƒç´ </li></ul><p><img src="http://cdn.ohheng.cn/202406121518471.png" alt="image-20221110083427372"></p><ul><li>å¾ªç¯é“¾è¡¨ï¼Œé€šå¸¸çš„é“¾è¡¨å°¾èŠ‚ç‚¹ tail æŒ‡å‘çš„éƒ½æ˜¯ nullï¼Œè€Œå¾ªç¯é“¾è¡¨çš„ tail æŒ‡å‘çš„æ˜¯å¤´èŠ‚ç‚¹ head</li></ul><p><img src="http://cdn.ohheng.cn/202406121519158.png" alt="image-20221110083538273"></p><p>é“¾è¡¨å†…è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„èŠ‚ç‚¹ç§°ä¸ºå“¨å…µï¼ˆSentinelï¼‰èŠ‚ç‚¹ï¼Œä¹Ÿå«åšå“‘å…ƒï¼ˆ Dummyï¼‰èŠ‚ç‚¹ï¼Œå®ƒä¸å­˜å‚¨æ•°æ®ï¼Œé€šå¸¸ç”¨ä½œå¤´å°¾ï¼Œç”¨æ¥ç®€åŒ–è¾¹ç•Œåˆ¤æ–­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="http://cdn.ohheng.cn/202406121519892.png" alt="image-20221110084611550"></p><p><strong>éšæœºè®¿é—®æ€§èƒ½</strong></p><p>æ ¹æ® index æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n)$</p><p><strong>æ’å…¥æˆ–åˆ é™¤æ€§èƒ½</strong></p><ul><li>èµ·å§‹ä½ç½®ï¼š$O(1)$</li><li>ç»“æŸä½ç½®ï¼šå¦‚æœå·²çŸ¥ tail å°¾èŠ‚ç‚¹æ˜¯ $O(1)$ï¼Œä¸çŸ¥é“ tail å°¾èŠ‚ç‚¹æ˜¯ $O(n)$</li><li>ä¸­é—´ä½ç½®ï¼šæ ¹æ® index æŸ¥æ‰¾æ—¶é—´ + $O(1)$</li></ul><h3 id="å•å‘é“¾è¡¨"><a href="#å•å‘é“¾è¡¨" class="headerlink" title="å•å‘é“¾è¡¨"></a>å•å‘é“¾è¡¨</h3><p>æ ¹æ®å•å‘é“¾è¡¨çš„å®šä¹‰ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªå­˜å‚¨ value å’Œ next æŒ‡é’ˆçš„ç±» Nodeï¼Œå’Œä¸€ä¸ªæè¿°å¤´éƒ¨èŠ‚ç‚¹çš„å¼•ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> Node head; <span class="hljs-comment">// å¤´éƒ¨èŠ‚ç‚¹</span><br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123; <span class="hljs-comment">// èŠ‚ç‚¹ç±»</span><br>        <span class="hljs-type">int</span> value;<br>        Node next;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(<span class="hljs-type">int</span> value, Node next)</span> &#123;<br>            <span class="hljs-built_in">this</span>.value = value;<br>            <span class="hljs-built_in">this</span>.next = next;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Node å®šä¹‰ä¸ºå†…éƒ¨ç±»ï¼Œæ˜¯ä¸ºäº†å¯¹å¤–<strong>éšè—</strong>å®ç°ç»†èŠ‚ï¼Œæ²¡å¿…è¦è®©ç±»çš„ä½¿ç”¨è€…å…³å¿ƒ Node ç»“æ„</li><li>å®šä¹‰ä¸º static å†…éƒ¨ç±»ï¼Œæ˜¯å› ä¸º Node <strong>ä¸éœ€è¦</strong>ä¸ SinglyLinkedList å®ä¾‹ç›¸å…³ï¼Œå¤šä¸ª SinglyLinkedListå®ä¾‹èƒ½å…±ç”¨ Node ç±»å®šä¹‰</li></ul><p><strong>å¤´éƒ¨æ·»åŠ </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addFirst</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br><span class="hljs-built_in">this</span>.head = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(value, <span class="hljs-built_in">this</span>.head);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœ this.head &#x3D;&#x3D; nullï¼Œæ–°å¢èŠ‚ç‚¹æŒ‡å‘ nullï¼Œå¹¶ä½œä¸ºæ–°çš„ this.head</li><li>å¦‚æœ this.head !&#x3D; nullï¼Œæ–°å¢èŠ‚ç‚¹æŒ‡å‘åŸæ¥çš„ this.headï¼Œå¹¶ä½œä¸ºæ–°çš„ this.head<ul><li>æ³¨æ„èµ‹å€¼æ“ä½œæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦</li></ul></li></ul><p><strong>while éå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loop</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.head;<br>        <span class="hljs-keyword">while</span> (curr != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">// åšä¸€äº›äº‹</span><br>            curr = curr.next;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>for éå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loop</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">Node</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.head; curr != <span class="hljs-literal">null</span>; curr = curr.next) &#123;<br>            <span class="hljs-comment">// åšä¸€äº›äº‹</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ä»¥ä¸Šä¸¤ç§éå†éƒ½å¯ä»¥æŠŠ<strong>è¦åšçš„äº‹</strong>ä»¥ Consumer å‡½æ•°çš„æ–¹å¼ä¼ é€’è¿›æ¥<ul><li>Consumer çš„è§„åˆ™æ˜¯<strong>ä¸€ä¸ªå‚æ•°</strong>ï¼Œ<strong>æ— è¿”å›å€¼</strong>ï¼Œå› æ­¤åƒ System.out::println æ–¹æ³•ç­‰éƒ½æ˜¯ Consumer</li><li>è°ƒç”¨ Consumer æ—¶ï¼Œå°†å½“å‰èŠ‚ç‚¹ curr.value ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒ</li></ul></li></ul><p><strong>è¿­ä»£å™¨éå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterable</span>&lt;Integer&gt; &#123;<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NodeIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span>&lt;Integer&gt; &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> head;<br>        <br>        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">return</span> curr != <span class="hljs-literal">null</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> curr.value;<br>            curr = curr.next;<br>            <span class="hljs-keyword">return</span> value;<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> Iterator&lt;Integer&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeIterator</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>hasNext ç”¨æ¥åˆ¤æ–­æ˜¯å¦è¿˜æœ‰å¿…è¦è°ƒç”¨ next</li><li>next åšä¸¤ä»¶äº‹<ul><li>è¿”å›å½“å‰èŠ‚ç‚¹çš„ value</li><li>æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</li></ul></li><li>NodeIterator è¦å®šä¹‰ä¸º<strong>é static å†…éƒ¨ç±»</strong>ï¼Œæ˜¯å› ä¸ºå®ƒä¸ SinglyLinkedList å®ä¾‹ç›¸å…³ï¼Œæ˜¯å¯¹æŸä¸ª SinglyLinkedList å®ä¾‹çš„è¿­ä»£</li></ul><p><strong>é€’å½’éå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterable</span>&lt;Integer&gt; &#123;<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loop</span><span class="hljs-params">()</span> &#123;<br>        recursion(<span class="hljs-built_in">this</span>.head);<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recursion</span><span class="hljs-params">(Node curr)</span> &#123;<br>        <span class="hljs-keyword">if</span> (curr == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">// å‰é¢åšäº›äº‹</span><br>        recursion(curr.next);<br>        <span class="hljs-comment">// åé¢åšäº›äº‹</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å°¾éƒ¨æ·»åŠ </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">findLast</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.head == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        Node curr;<br>        <span class="hljs-keyword">for</span> (curr = <span class="hljs-built_in">this</span>.head; curr.next != <span class="hljs-literal">null</span>; ) &#123;<br>            curr = curr.next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> curr;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addLast</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> findLast();<br>        <span class="hljs-keyword">if</span> (last == <span class="hljs-literal">null</span>) &#123;<br>            addFirst(value);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        last.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(value, <span class="hljs-literal">null</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ³¨æ„ï¼Œæ‰¾æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»ˆæ­¢æ¡ä»¶æ˜¯ curr.next &#x3D;&#x3D; null </li><li>åˆ†æˆä¸¤ä¸ªæ–¹æ³•æ˜¯ä¸ºäº†ä»£ç æ¸…æ™°ï¼Œè€Œä¸” findLast() ä¹‹åè¿˜èƒ½å¤ç”¨</li></ul><p><strong>å°¾éƒ¨æ·»åŠ å¤šä¸ª</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> &#123;<br>    <span class="hljs-comment">// ...</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addLast</span><span class="hljs-params">(<span class="hljs-type">int</span> first, <span class="hljs-type">int</span>... rest)</span> &#123;<br>        <br>        <span class="hljs-type">Node</span> <span class="hljs-variable">sublist</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(first, <span class="hljs-literal">null</span>);<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> sublist;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> value : rest) &#123;<br>            curr.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(value, <span class="hljs-literal">null</span>);<br>            curr = curr.next;<br>        &#125;<br>        <br>        <span class="hljs-type">Node</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> findLast();<br>        <span class="hljs-keyword">if</span> (last == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-built_in">this</span>.head = sublist;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        last.next = sublist;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å…ˆä¸²æˆä¸€ä¸² sublist</li><li>å†ä½œä¸ºä¸€ä¸ªæ•´ä½“æ·»åŠ </li></ul><p><strong>æ ¹æ®ç´¢å¼•è·å–</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> &#123;<br>    <span class="hljs-comment">// ...</span><br><span class="hljs-keyword">private</span> Node <span class="hljs-title function_">findNode</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">Node</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.head; curr != <span class="hljs-literal">null</span>; curr = curr.next, i++) &#123;<br>            <span class="hljs-keyword">if</span> (index == i) &#123;<br>                <span class="hljs-keyword">return</span> curr;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <br>    <span class="hljs-keyword">private</span> IllegalArgumentException <span class="hljs-title function_">illegalIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(String.format(<span class="hljs-string">&quot;index [%d] ä¸åˆæ³•%n&quot;</span>, index));<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> findNode(index);<br>        <span class="hljs-keyword">if</span> (node != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> node.value;<br>        &#125;<br>        <span class="hljs-keyword">throw</span> illegalIndex(index);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åŒæ ·ï¼Œåˆ†æ–¹æ³•å¯ä»¥å®ç°å¤ç”¨</li></ul><p><strong>æ’å…¥</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> &#123;<br>    <span class="hljs-comment">// ...</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-keyword">if</span> (index == <span class="hljs-number">0</span>) &#123;<br>            addFirst(value);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> findNode(index - <span class="hljs-number">1</span>); <span class="hljs-comment">// æ‰¾åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹</span><br>        <span class="hljs-keyword">if</span> (prev == <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// æ‰¾ä¸åˆ°</span><br>            <span class="hljs-keyword">throw</span> illegalIndex(index);<br>        &#125;<br>        prev.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(value, prev.next);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ’å…¥åŒ…æ‹¬ä¸‹é¢çš„åˆ é™¤ï¼Œéƒ½å¿…é¡»æ‰¾åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹</li></ul><p><strong>åˆ é™¤</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedList</span> &#123;<br>    <span class="hljs-comment">// ...</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-keyword">if</span> (index == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.head != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-built_in">this</span>.head = <span class="hljs-built_in">this</span>.head.next;<br>                <span class="hljs-keyword">return</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">throw</span> illegalIndex(index);<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> findNode(index - <span class="hljs-number">1</span>);<br>        Node curr;<br>        <span class="hljs-keyword">if</span> (prev != <span class="hljs-literal">null</span> &amp;&amp; (curr = prev.next) != <span class="hljs-literal">null</span>) &#123;<br>            prev.next = curr.next;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">throw</span> illegalIndex(index);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€ä¸ª if å—å¯¹åº”ç€ removeFirst æƒ…å†µ</li><li>æœ€åä¸€ä¸ª if å—å¯¹åº”ç€è‡³å°‘å¾—ä¸¤ä¸ªèŠ‚ç‚¹çš„æƒ…å†µ<ul><li>ä¸ä»…ä»…åˆ¤æ–­ä¸Šä¸€ä¸ªèŠ‚ç‚¹éç©ºï¼Œè¿˜è¦ä¿è¯å½“å‰èŠ‚ç‚¹éç©º</li></ul></li></ul><h3 id="å•å‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"><a href="#å•å‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰" class="headerlink" title="å•å‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"></a>å•å‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰</h3><p>è§‚å¯Ÿä¹‹å‰å•å‘é“¾è¡¨çš„å®ç°ï¼Œå‘ç°æ¯ä¸ªæ–¹æ³•å†…å‡ ä¹éƒ½æœ‰åˆ¤æ–­æ˜¯ä¸æ˜¯ head è¿™æ ·çš„ä»£ç ï¼Œèƒ½ä¸èƒ½ç®€åŒ–å‘¢ï¼Ÿ</p><p>ç”¨ä¸€ä¸ªä¸å‚ä¸æ•°æ®å­˜å‚¨çš„ç‰¹æ®Š Node ä½œä¸ºå“¨å…µï¼Œå®ƒä¸€èˆ¬è¢«ç§°ä¸ºå“¨å…µæˆ–å“‘å…ƒï¼Œæ‹¥æœ‰å“¨å…µèŠ‚ç‚¹çš„é“¾è¡¨ç§°ä¸ºå¸¦å¤´é“¾è¡¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedListSentinel</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Node</span> <span class="hljs-variable">head</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(Integer.MIN_VALUE, <span class="hljs-literal">null</span>);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å…·ä½“å­˜ä»€ä¹ˆå€¼æ— æ‰€è°“ï¼Œå› ä¸ºä¸ä¼šç”¨åˆ°å®ƒçš„å€¼</li></ul><p>åŠ å…¥å“¨å…µèŠ‚ç‚¹åï¼Œä»£ç ä¼šå˜å¾—æ¯”è¾ƒç®€å•ï¼Œå…ˆçœ‹å‡ ä¸ªå·¥å…·æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedListSentinel</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-comment">// æ ¹æ®ç´¢å¼•è·å–èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">findNode</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">Node</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.head; curr != <span class="hljs-literal">null</span>; curr = curr.next, i++) &#123;<br>            <span class="hljs-keyword">if</span> (i == index) &#123;<br>                <span class="hljs-keyword">return</span> curr;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>    <br>    <span class="hljs-comment">// è·å–æœ€åä¸€ä¸ªèŠ‚ç‚¹</span><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">findLast</span><span class="hljs-params">()</span> &#123;<br>        Node curr;<br>        <span class="hljs-keyword">for</span> (curr = <span class="hljs-built_in">this</span>.head; curr.next != <span class="hljs-literal">null</span>; ) &#123;<br>            curr = curr.next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> curr;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>findNode ä¸ä¹‹å‰ç±»ä¼¼ï¼Œåªæ˜¯ i åˆå§‹å€¼è®¾ç½®ä¸º -1 å¯¹åº”å“¨å…µï¼Œå®é™…ä¼ å…¥çš„ index ä¹Ÿæ˜¯ $[-1, \infty)$</li><li>findLast ç»ä¸ä¼šè¿”å› null äº†ï¼Œå°±ç®—æ²¡æœ‰å…¶å®ƒèŠ‚ç‚¹ï¼Œä¹Ÿä¼šè¿”å›å“¨å…µä½œä¸ºæœ€åä¸€ä¸ªèŠ‚ç‚¹</li></ul><p>è¿™æ ·ï¼Œä»£ç ç®€åŒ–ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SinglyLinkedListSentinel</span> &#123;<br>    <span class="hljs-comment">// ...</span><br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addLast</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> findLast();<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        æ”¹åŠ¨å‰</span><br><span class="hljs-comment">        if (last == null) &#123;</span><br><span class="hljs-comment">            this.head = new Node(value, null);</span><br><span class="hljs-comment">            return;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br>        last.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(value, <span class="hljs-literal">null</span>);<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        æ”¹åŠ¨å‰</span><br><span class="hljs-comment">        if (index == 0) &#123;</span><br><span class="hljs-comment">            this.head = new Node(value, this.head);</span><br><span class="hljs-comment">            return;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br>        <span class="hljs-comment">// index ä¼ å…¥ 0 æ—¶ï¼Œè¿”å›çš„æ˜¯å“¨å…µ</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> findNode(index - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (prev != <span class="hljs-literal">null</span>) &#123;<br>            prev.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(value, prev.next);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">throw</span> illegalIndex(index);<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        æ”¹åŠ¨å‰</span><br><span class="hljs-comment">        if (index == 0) &#123;</span><br><span class="hljs-comment">            if (this.head != null) &#123;</span><br><span class="hljs-comment">                this.head = this.head.next;</span><br><span class="hljs-comment">                return;</span><br><span class="hljs-comment">            &#125; else &#123;</span><br><span class="hljs-comment">                throw illegalIndex(index);</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        */</span><br>        <span class="hljs-comment">// index ä¼ å…¥ 0 æ—¶ï¼Œè¿”å›çš„æ˜¯å“¨å…µ</span><br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> findNode(index - <span class="hljs-number">1</span>);<br>        Node curr;<br>        <span class="hljs-keyword">if</span> (prev != <span class="hljs-literal">null</span> &amp;&amp; (curr = prev.next) != <span class="hljs-literal">null</span>) &#123;<br>            prev.next = curr.next;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">throw</span> illegalIndex(index);<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addFirst</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        æ”¹åŠ¨å‰</span><br><span class="hljs-comment">        this.head = new Node(value, this.head);</span><br><span class="hljs-comment">        */</span><br><span class="hljs-built_in">this</span>.head.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(value, <span class="hljs-built_in">this</span>.head.next);<br>        <span class="hljs-comment">// ä¹Ÿå¯ä»¥è§†ä¸º insert çš„ç‰¹ä¾‹, å³ insert(0, value);</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å¯¹äºåˆ é™¤ï¼Œå‰é¢è¯´äº†ã€æœ€åä¸€ä¸ª if å—å¯¹åº”ç€è‡³å°‘å¾—ä¸¤ä¸ªèŠ‚ç‚¹çš„æƒ…å†µã€‘ï¼Œç°åœ¨æœ‰äº†å“¨å…µï¼Œå°±å‡‘è¶³äº†ä¸¤ä¸ªèŠ‚ç‚¹</li></ul><h3 id="åŒå‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"><a href="#åŒå‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰" class="headerlink" title="åŒå‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"></a>åŒå‘é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DoublyLinkedListSentinel</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterable</span>&lt;Integer&gt; &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Node head;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Node tail;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DoublyLinkedListSentinel</span><span class="hljs-params">()</span> &#123;<br>        head = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-literal">null</span>, <span class="hljs-number">666</span>, <span class="hljs-literal">null</span>);<br>        tail = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-literal">null</span>, <span class="hljs-number">888</span>, <span class="hljs-literal">null</span>);<br>        head.next = tail;<br>        tail.prev = head;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">findNode</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">Node</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> head; p != tail; p = p.next, i++) &#123;<br>            <span class="hljs-keyword">if</span> (i == index) &#123;<br>                <span class="hljs-keyword">return</span> p;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addFirst</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        insert(<span class="hljs-number">0</span>, value);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeFirst</span><span class="hljs-params">()</span> &#123;<br>        remove(<span class="hljs-number">0</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addLast</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> tail.prev;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(prev, value, tail);<br>        prev.next = added;<br>        tail.prev = added;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeLast</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> tail.prev;<br>        <span class="hljs-keyword">if</span> (removed == head) &#123;<br>            <span class="hljs-keyword">throw</span> illegalIndex(<span class="hljs-number">0</span>);<br>        &#125;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> removed.prev;<br>        prev.next = tail;<br>        tail.prev = prev;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> findNode(index - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (prev == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">throw</span> illegalIndex(index);<br>        &#125;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> prev.next;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">inserted</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(prev, value, next);<br>        prev.next = inserted;<br>        next.prev = inserted;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> findNode(index - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (prev == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">throw</span> illegalIndex(index);<br>        &#125;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> prev.next;<br>        <span class="hljs-keyword">if</span> (removed == tail) &#123;<br>            <span class="hljs-keyword">throw</span> illegalIndex(index);<br>        &#125;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> removed.next;<br>        prev.next = next;<br>        next.prev = prev;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> IllegalArgumentException <span class="hljs-title function_">illegalIndex</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<br>                String.format(<span class="hljs-string">&quot;index [%d] ä¸åˆæ³•%n&quot;</span>, index));<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;Integer&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;Integer&gt;() &#123;<br>            <span class="hljs-type">Node</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> head.next;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p != tail;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> p.value;<br>                p = p.next;<br>                <span class="hljs-keyword">return</span> value;<br>            &#125;<br>        &#125;;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123;<br>        Node prev;<br>        <span class="hljs-type">int</span> value;<br>        Node next;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(Node prev, <span class="hljs-type">int</span> value, Node next)</span> &#123;<br>            <span class="hljs-built_in">this</span>.prev = prev;<br>            <span class="hljs-built_in">this</span>.value = value;<br>            <span class="hljs-built_in">this</span>.next = next;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç¯å½¢é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"><a href="#ç¯å½¢é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰" class="headerlink" title="ç¯å½¢é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰"></a>ç¯å½¢é“¾è¡¨ï¼ˆå¸¦å“¨å…µï¼‰</h3><p>åŒå‘ç¯å½¢é“¾è¡¨å¸¦å“¨å…µï¼Œè¿™æ—¶å“¨å…µ<strong>æ—¢ä½œä¸ºå¤´ï¼Œä¹Ÿä½œä¸ºå°¾</strong></p><p><img src="http://cdn.ohheng.cn/202406121519007.png" alt="image-20221229144232651"></p><p><img src="http://cdn.ohheng.cn/202406121520940.png" alt="image-20221229143756065"></p><p><img src="http://cdn.ohheng.cn/202406121520246.png" alt="image-20221229153338425"></p><p><img src="http://cdn.ohheng.cn/202406121520474.png" alt="image-20221229154248800"></p><p>å‚è€ƒå®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DoublyLinkedListSentinel</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterable</span>&lt;Integer&gt; &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;Integer&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;&gt;() &#123;<br>            <span class="hljs-type">Node</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> sentinel.next;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p != sentinel;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> p.value;<br>                p = p.next;<br>                <span class="hljs-keyword">return</span> value;<br>            &#125;<br>        &#125;;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> &#123;<br>        Node prev;<br>        <span class="hljs-type">int</span> value;<br>        Node next;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(Node prev, <span class="hljs-type">int</span> value, Node next)</span> &#123;<br>            <span class="hljs-built_in">this</span>.prev = prev;<br>            <span class="hljs-built_in">this</span>.value = value;<br>            <span class="hljs-built_in">this</span>.next = next;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Node</span> <span class="hljs-variable">sentinel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-literal">null</span>, -<span class="hljs-number">1</span>, <span class="hljs-literal">null</span>); <span class="hljs-comment">// å“¨å…µ</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DoublyLinkedListSentinel</span><span class="hljs-params">()</span> &#123;<br>        sentinel.next = sentinel;<br>        sentinel.prev = sentinel;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ åˆ°ç¬¬ä¸€ä¸ª</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value å¾…æ·»åŠ å€¼</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addFirst</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> sentinel.next;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> sentinel;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(prev, value, next);<br>        prev.next = added;<br>        next.prev = added;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ åˆ°æœ€åä¸€ä¸ª</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value å¾…æ·»åŠ å€¼</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addLast</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> sentinel.prev;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> sentinel;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">added</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(prev, value, next);<br>        prev.next = added;<br>        next.prev = added;<br>    &#125;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤ç¬¬ä¸€ä¸ª</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeFirst</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> sentinel.next;<br>        <span class="hljs-keyword">if</span> (removed == sentinel) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;éæ³•&quot;</span>);<br>        &#125;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> sentinel;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> removed.next;<br>        a.next = b;<br>        b.prev = a;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤æœ€åä¸€ä¸ª</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeLast</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> sentinel.prev;<br>        <span class="hljs-keyword">if</span> (removed == sentinel) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;éæ³•&quot;</span>);<br>        &#125;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> removed.prev;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> sentinel;<br>        a.next = b;<br>        b.prev = a;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®å€¼åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-comment">     * &lt;p&gt;å‡å®š value åœ¨é“¾è¡¨ä¸­ä½œä¸º key, æœ‰å”¯ä¸€æ€§&lt;/p&gt;</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value å¾…åˆ é™¤å€¼</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeByValue</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">removed</span> <span class="hljs-operator">=</span> findNodeByValue(value);<br>        <span class="hljs-keyword">if</span> (removed != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-type">Node</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> removed.prev;<br>            <span class="hljs-type">Node</span> <span class="hljs-variable">next</span> <span class="hljs-operator">=</span> removed.next;<br>            prev.next = next;<br>            next.prev = prev;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">findNodeByValue</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> sentinel.next;<br>        <span class="hljs-keyword">while</span> (p != sentinel) &#123;<br>            <span class="hljs-keyword">if</span> (p.value == value) &#123;<br>                <span class="hljs-keyword">return</span> p;<br>            &#125;<br>            p = p.next;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3-é€’å½’"><a href="#3-é€’å½’" class="headerlink" title="3. é€’å½’"></a>3. é€’å½’</h2><h3 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><strong>å®šä¹‰</strong></p><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé€’å½’æ˜¯ä¸€ç§è§£å†³è®¡ç®—é—®é¢˜çš„æ–¹æ³•ï¼Œå…¶ä¸­è§£å†³æ–¹æ¡ˆå–å†³äºåŒä¸€ç±»é—®é¢˜çš„æ›´å°å­é›†</p><blockquote><p>In computer science, <strong>recursion</strong> is a method of solving a computational problem where the solution depends on solutions to smaller instances of the same problem.</p></blockquote><p>æ¯”å¦‚å•é“¾è¡¨é€’å½’éå†çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(Node node)</span> &#123;<br>    <span class="hljs-keyword">if</span>(node == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    println(<span class="hljs-string">&quot;before:&quot;</span> + node.value)<br>    f(node.next);<br>    println(<span class="hljs-string">&quot;after:&quot;</span> + node.value)<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ol><li>è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œå¦‚æœè¯´æ¯ä¸ªå‡½æ•°å¯¹åº”ç€ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œè‡ªå·±è°ƒç”¨è‡ªå·±æ„å‘³ç€è§£å†³æ–¹æ¡ˆæ˜¯ä¸€æ ·çš„ï¼ˆæœ‰è§„å¾‹çš„ï¼‰</li><li>æ¯æ¬¡è°ƒç”¨ï¼Œå‡½æ•°å¤„ç†çš„æ•°æ®ä¼šè¾ƒä¸Šæ¬¡ç¼©å‡ï¼ˆå­é›†ï¼‰ï¼Œè€Œä¸”æœ€åä¼šç¼©å‡è‡³æ— éœ€ç»§ç»­é€’å½’</li><li>å†…å±‚å‡½æ•°è°ƒç”¨ï¼ˆå­é›†å¤„ç†ï¼‰å®Œæˆï¼Œå¤–å±‚å‡½æ•°æ‰èƒ½ç®—è°ƒç”¨å®Œæˆ</li></ol><p><strong>åŸç†</strong></p><p>å‡è®¾é“¾è¡¨ä¸­æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼Œvalue åˆ†åˆ«ä¸º 1ï¼Œ2ï¼Œ3ï¼Œä»¥ä¸Šä»£ç çš„æ‰§è¡Œæµç¨‹å°±ç±»ä¼¼äºä¸‹é¢çš„<strong>ä¼ªç </strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 1 -&gt; 2 -&gt; 3 -&gt; null  f(1)</span><br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(Node node = <span class="hljs-number">1</span>)</span> &#123;<br>    println(<span class="hljs-string">&quot;before:&quot;</span> + node.value) <span class="hljs-comment">// 1</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(Node node = <span class="hljs-number">2</span>)</span> &#123;<br>        println(<span class="hljs-string">&quot;before:&quot;</span> + node.value) <span class="hljs-comment">// 2</span><br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(Node node = <span class="hljs-number">3</span>)</span> &#123;<br>            println(<span class="hljs-string">&quot;before:&quot;</span> + node.value) <span class="hljs-comment">// 3</span><br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">f</span><span class="hljs-params">(Node node = <span class="hljs-literal">null</span>)</span> &#123;<br>                <span class="hljs-keyword">if</span>(node == <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br>            &#125;<br>            println(<span class="hljs-string">&quot;after:&quot;</span> + node.value) <span class="hljs-comment">// 3</span><br>        &#125;<br>        println(<span class="hljs-string">&quot;after:&quot;</span> + node.value) <span class="hljs-comment">// 2</span><br>    &#125;<br>    println(<span class="hljs-string">&quot;after:&quot;</span> + node.value) <span class="hljs-comment">// 1</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ€è·¯</strong></p><ol><li>ç¡®å®šèƒ½å¦ä½¿ç”¨é€’å½’æ±‚è§£</li><li>æ¨å¯¼å‡ºé€’æ¨å…³ç³»ï¼Œå³çˆ¶é—®é¢˜ä¸å­é—®é¢˜çš„å…³ç³»ï¼Œä»¥åŠé€’å½’çš„ç»“æŸæ¡ä»¶</li></ol><p>ä¾‹å¦‚ä¹‹å‰éå†é“¾è¡¨çš„é€’æ¨å…³ç³»ä¸º<br>$$<br>f(n) &#x3D;<br>\begin{cases}<br>åœæ­¢&amp; n &#x3D; null \<br>f(n.next) &amp; n \neq null<br>\end{cases}<br>$$</p><ul><li>æ·±å…¥åˆ°æœ€é‡Œå±‚å«åš<strong>é€’</strong></li><li>ä»æœ€é‡Œå±‚å‡ºæ¥å«åš<strong>å½’</strong></li><li>åœ¨<strong>é€’</strong>çš„è¿‡ç¨‹ä¸­ï¼Œå¤–å±‚å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ï¼ˆä»¥åŠæ–¹æ³•å‚æ•°ï¼‰å¹¶æœªæ¶ˆå¤±ï¼Œ<strong>å½’</strong>çš„æ—¶å€™è¿˜å¯ä»¥ç”¨åˆ°</li></ul><h3 id="å•è·¯é€’å½’-Single-Recursion"><a href="#å•è·¯é€’å½’-Single-Recursion" class="headerlink" title="å•è·¯é€’å½’ Single Recursion"></a>å•è·¯é€’å½’ Single Recursion</h3><p><strong>E01. é˜¶ä¹˜</strong></p><p>ç”¨é€’å½’æ–¹æ³•æ±‚é˜¶ä¹˜ </p><ul><li><p>é˜¶ä¹˜çš„å®šä¹‰ $n!&#x3D; 1â‹…2â‹…3â‹¯(n-2)â‹…(n-1)â‹…n$ï¼Œå…¶ä¸­ $n$ ä¸ºè‡ªç„¶æ•°ï¼Œå½“ç„¶ $0! &#x3D; 1$</p></li><li><p>é€’æ¨å…³ç³»</p></li></ul><p>$$<br>f(n) &#x3D;<br>\begin{cases}<br>1 &amp; n &#x3D; 1\<br>n * f(n-1) &amp; n &gt; 1<br>\end{cases}<br>$$</p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> n * f(n - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‹†è§£<strong>ä¼ªç </strong>å¦‚ä¸‹ï¼Œå‡è®¾ n åˆå§‹å€¼ä¸º 3</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">f(<span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>) &#123; <span class="hljs-comment">// è§£å†³ä¸äº†,é€’</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">3</span> * f(<span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>) &#123; <span class="hljs-comment">// è§£å†³ä¸äº†,ç»§ç»­é€’</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * f(<span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// å¯ä»¥è§£å†³, å¼€å§‹å½’</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>E02. åå‘æ‰“å°å­—ç¬¦ä¸²</strong></p><p>ç”¨é€’å½’åå‘æ‰“å°å­—ç¬¦ä¸²ï¼Œn ä¸ºå­—ç¬¦åœ¨æ•´ä¸ªå­—ç¬¦ä¸² str ä¸­çš„ç´¢å¼•ä½ç½®</p><ul><li><strong>é€’</strong>ï¼šn ä» 0 å¼€å§‹ï¼Œæ¯æ¬¡ n + 1ï¼Œä¸€ç›´é€’åˆ° n &#x3D;&#x3D; str.length() - 1</li><li><strong>å½’</strong>ï¼šä» n &#x3D;&#x3D; str.length() å¼€å§‹å½’ï¼Œä»å½’æ‰“å°ï¼Œè‡ªç„¶æ˜¯é€†åºçš„</li></ul><p>é€’æ¨å…³ç³»<br>$$<br>f(n) &#x3D;<br>\begin{cases}<br>åœæ­¢ &amp; n &#x3D; str.length() \<br>f(n+1) &amp; 0 \leq n \leq str.length() - 1<br>\end{cases}<br>$$<br>ä»£ç ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reversePrint</span><span class="hljs-params">(String str, <span class="hljs-type">int</span> index)</span> &#123;<br>    <span class="hljs-keyword">if</span> (index == str.length()) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    reversePrint(str, index + <span class="hljs-number">1</span>);<br>    System.out.println(str.charAt(index));<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‹†è§£<strong>ä¼ªç </strong>å¦‚ä¸‹ï¼Œå‡è®¾å­—ç¬¦ä¸²ä¸º â€œabcâ€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">reversePrint</span><span class="hljs-params">(String str, <span class="hljs-type">int</span> index = <span class="hljs-number">0</span>)</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">reversePrint</span><span class="hljs-params">(String str, <span class="hljs-type">int</span> index = <span class="hljs-number">1</span>)</span> &#123;<br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">reversePrint</span><span class="hljs-params">(String str, <span class="hljs-type">int</span> index = <span class="hljs-number">2</span>)</span> &#123;<br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">reversePrint</span><span class="hljs-params">(String str, <span class="hljs-type">int</span> index = <span class="hljs-number">3</span>)</span> &#123; <br>                <span class="hljs-keyword">if</span> (index == str.length()) &#123;<br>                    <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å¼€å§‹å½’</span><br>                &#125;<br>            &#125;<br>            System.out.println(str.charAt(index)); <span class="hljs-comment">// æ‰“å° c</span><br>        &#125;<br>        System.out.println(str.charAt(index)); <span class="hljs-comment">// æ‰“å° b</span><br>    &#125;<br>    System.out.println(str.charAt(index)); <span class="hljs-comment">// æ‰“å° a</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¤šè·¯é€’å½’-Multi-Recursion"><a href="#å¤šè·¯é€’å½’-Multi-Recursion" class="headerlink" title="å¤šè·¯é€’å½’ Multi Recursion"></a>å¤šè·¯é€’å½’ Multi Recursion</h3><p><strong>E01. æ–æ³¢é‚£å¥‘æ•°åˆ—</strong></p><ul><li>ä¹‹å‰çš„ä¾‹å­æ˜¯æ¯ä¸ªé€’å½’å‡½æ•°åªåŒ…å«ä¸€ä¸ªè‡ªèº«çš„è°ƒç”¨ï¼Œè¿™ç§°ä¹‹ä¸º single recursion</li><li>å¦‚æœæ¯ä¸ªé€’å½’å‡½æ•°ä¾‹åŒ…å«å¤šä¸ªè‡ªèº«è°ƒç”¨ï¼Œç§°ä¹‹ä¸º multi recursion</li></ul><p><strong>é€’æ¨å…³ç³»</strong><br>$$<br>f(n) &#x3D;<br>\begin{cases}<br>0 &amp; n&#x3D;0 \<br>1 &amp; n&#x3D;1 \<br>f(n-1) + f(n-2) &amp; n&gt;1<br>\end{cases}<br>$$</p><p>ä¸‹é¢çš„è¡¨æ ¼åˆ—å‡ºäº†æ•°åˆ—çš„å‰å‡ é¡¹</p><table><thead><tr><th><em>F</em>0</th><th><em>F</em>1</th><th><em>F</em>2</th><th><em>F</em>3</th><th><em>F</em>4</th><th><em>F</em>5</th><th><em>F</em>6</th><th><em>F</em>7</th><th><em>F</em>8</th><th><em>F</em>9</th><th><em>F</em>10</th><th><em>F</em>11</th><th><em>F</em>12</th><th><em>F</em>13</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>1</td><td>2</td><td>3</td><td>5</td><td>8</td><td>13</td><td>21</td><td>34</td><td>55</td><td>89</td><td>144</td><td>233</td></tr></tbody></table><p><strong>å®ç°</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> f(n - <span class="hljs-number">1</span>) + f(n - <span class="hljs-number">2</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ‰§è¡Œæµç¨‹</strong></p><p><img src="http://cdn.ohheng.cn/202406121542616.gif" alt="2"></p><ul><li>ç»¿è‰²ä»£è¡¨æ­£åœ¨æ‰§è¡Œï¼ˆå¯¹åº”é€’ï¼‰ï¼Œç°è‰²ä»£è¡¨æ‰§è¡Œç»“æŸï¼ˆå¯¹åº”å½’ï¼‰</li><li>é€’ä¸åˆ°å¤´ï¼Œä¸èƒ½å½’ï¼Œå¯¹åº”ç€æ·±åº¦ä¼˜å…ˆæœç´¢</li></ul><p><strong>æ—¶é—´å¤æ‚åº¦</strong></p><ul><li>é€’å½’çš„æ¬¡æ•°ä¹Ÿç¬¦åˆæ–æ³¢é‚£å¥‘è§„å¾‹ï¼Œ$2 * f(n+1)-1$</li><li>æ—¶é—´å¤æ‚åº¦æ¨å¯¼è¿‡ç¨‹<ul><li>æ–æ³¢é‚£å¥‘é€šé¡¹å…¬å¼ $f(n) &#x3D; \frac{1}{\sqrt{5}}*({\frac{1+\sqrt{5}}{2}}^n - {\frac{1-\sqrt{5}}{2}}^n)$</li><li>ç®€åŒ–ä¸ºï¼š$f(n) &#x3D; \frac{1}{2.236}*({1.618}^n - {(-0.618)}^n)$</li><li>å¸¦å…¥é€’å½’æ¬¡æ•°å…¬å¼ $2<em>\frac{1}{2.236}</em>({1.618}^{n+1} - {(-0.618)}^{n+1})-1$</li><li>æ—¶é—´å¤æ‚åº¦ä¸º $\Theta(1.618^n)$</li></ul></li></ul><blockquote><ol><li>æ›´å¤š Fibonacci å‚è€ƒ[^8][^9][^10]</li><li>ä»¥ä¸Šæ—¶é—´å¤æ‚åº¦åˆ†æï¼Œæœªè€ƒè™‘å¤§æ•°ç›¸åŠ çš„å› ç´ </li></ol></blockquote><p><strong>å˜ä½“1 - å…”å­é—®é¢˜[^8]</strong></p><p><img src="http://cdn.ohheng.cn/202406121541788.png" alt="image-20221110155655827"></p><ul><li>ç¬¬ä¸€ä¸ªæœˆï¼Œæœ‰ä¸€å¯¹æœªæˆç†Ÿçš„å…”å­ï¼ˆé»‘è‰²ï¼Œæ³¨æ„å›¾ä¸­ä¸ªå¤´è¾ƒå°ï¼‰</li><li>ç¬¬äºŒä¸ªæœˆï¼Œå®ƒä»¬æˆç†Ÿ</li><li>ç¬¬ä¸‰ä¸ªæœˆï¼Œå®ƒä»¬èƒ½äº§ä¸‹ä¸€å¯¹æ–°çš„å°å…”å­ï¼ˆè“è‰²ï¼‰</li><li>æ‰€æœ‰å…”å­éµå¾ªç›¸åŒè§„å¾‹ï¼Œæ±‚ç¬¬ $n$ ä¸ªæœˆçš„å…”å­æ•°</li></ul><p><strong>åˆ†æ</strong></p><p>å…”å­é—®é¢˜å¦‚ä½•ä¸æ–æ³¢é‚£å¥‘è”ç³»èµ·æ¥å‘¢ï¼Ÿè®¾ç¬¬ n ä¸ªæœˆå…”å­æ•°ä¸º $f(n)$</p><ul><li>$f(n)$ &#x3D; ä¸Šä¸ªæœˆå…”å­æ•° + æ–°ç”Ÿçš„å°å…”å­æ•°</li><li>è€Œã€æ–°ç”Ÿçš„å°å…”å­æ•°ã€‘å®é™…å°±æ˜¯ã€ä¸Šä¸ªæœˆæˆç†Ÿçš„å…”å­æ•°ã€‘</li><li>å› ä¸ºéœ€è¦ä¸€ä¸ªæœˆå…”å­å°±æˆç†Ÿï¼Œæ‰€ä»¥ã€ä¸Šä¸ªæœˆæˆç†Ÿçš„å…”å­æ•°ã€‘ä¹Ÿå°±æ˜¯ã€ä¸Šä¸Šä¸ªæœˆçš„å…”å­æ•°ã€‘</li><li>ä¸Šä¸ªæœˆå…”å­æ•°ï¼Œå³ $f(n-1)$</li><li>ä¸Šä¸Šä¸ªæœˆçš„å…”å­æ•°ï¼Œå³ $f(n-2)$</li></ul><p>å› æ­¤æœ¬è´¨è¿˜æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œåªæ˜¯ä»å…¶ç¬¬ä¸€é¡¹å¼€å§‹</p><p><strong>å˜ä½“2 - é’è›™çˆ¬æ¥¼æ¢¯</strong></p><ul><li>æ¥¼æ¢¯æœ‰ $n$ é˜¶</li><li>é’è›™è¦çˆ¬åˆ°æ¥¼é¡¶ï¼Œå¯ä»¥ä¸€æ¬¡è·³ä¸€é˜¶ï¼Œä¹Ÿå¯ä»¥ä¸€æ¬¡è·³ä¸¤é˜¶</li><li>åªèƒ½å‘ä¸Šè·³ï¼Œé—®æœ‰å¤šå°‘ç§è·³æ³•</li></ul><p><strong>åˆ†æ</strong></p><table><thead><tr><th>n</th><th>è·³æ³•</th><th>è§„å¾‹</th></tr></thead><tbody><tr><td>1</td><td>(1)</td><td>æš‚æ—¶çœ‹ä¸å‡º</td></tr><tr><td>2</td><td>(1,1)  (2)</td><td>æš‚æ—¶çœ‹ä¸å‡º</td></tr><tr><td>3</td><td>(1,1,1)  (1,2)  (2,1)</td><td>æš‚æ—¶çœ‹ä¸å‡º</td></tr><tr><td>4</td><td>(1,1,1,1)    (1,2,1)    (2,1,1)<br />(1,1,2)  (2,2)</td><td>æœ€åä¸€è·³ï¼Œè·³ä¸€ä¸ªå°é˜¶çš„ï¼ŒåŸºäºf(3)<br />æœ€åä¸€è·³ï¼Œè·³ä¸¤ä¸ªå°é˜¶çš„ï¼ŒåŸºäºf(2)</td></tr><tr><td>5</td><td>â€¦</td><td>â€¦</td></tr></tbody></table><ul><li><p>å› æ­¤æœ¬è´¨ä¸Šè¿˜æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œåªæ˜¯ä»å…¶ç¬¬äºŒé¡¹å¼€å§‹</p></li><li><p>å¯¹åº” leetcode é¢˜ç›® <a href="https://leetcode.cn/problems/climbing-stairs/">70. çˆ¬æ¥¼æ¢¯ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></p></li></ul><h3 id="é€’å½’ä¼˜åŒ–-è®°å¿†æ³•"><a href="#é€’å½’ä¼˜åŒ–-è®°å¿†æ³•" class="headerlink" title="é€’å½’ä¼˜åŒ–-è®°å¿†æ³•"></a>é€’å½’ä¼˜åŒ–-è®°å¿†æ³•</h3><p>ä¸Šè¿°ä»£ç å­˜åœ¨å¾ˆå¤šé‡å¤çš„è®¡ç®—ï¼Œä¾‹å¦‚æ±‚ $f(5)$ é€’å½’åˆ†è§£è¿‡ç¨‹</p><p><img src="http://cdn.ohheng.cn/202406121543230.png" alt="image-20221207092417933"></p><p>å¯ä»¥çœ‹åˆ°ï¼ˆé¢œè‰²ç›¸åŒçš„æ˜¯é‡å¤çš„ï¼‰ï¼š</p><ul><li>$f(3)$ é‡å¤äº† 2 æ¬¡</li><li>$f(2)$ é‡å¤äº† 3 æ¬¡</li><li>$f(1)$ é‡å¤äº† 5 æ¬¡</li><li>$f(0)$ é‡å¤äº† 3 æ¬¡</li></ul><p>éšç€  $n$ çš„å¢å¤§ï¼Œé‡å¤æ¬¡æ•°éå¸¸å¯è§‚ï¼Œå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ</p><p><strong>Memoization</strong> è®°å¿†æ³•ï¼ˆä¹Ÿç§°å¤‡å¿˜å½•ï¼‰æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œé€šè¿‡å­˜å‚¨å‡½æ•°è°ƒç”¨ç»“æœï¼ˆé€šå¸¸æ¯”è¾ƒæ˜‚è´µï¼‰ï¼Œå½“å†æ¬¡å‡ºç°ç›¸åŒçš„è¾“å…¥ï¼ˆå­é—®é¢˜ï¼‰æ—¶ï¼Œå°±èƒ½å®ç°åŠ é€Ÿæ•ˆæœï¼Œæ”¹è¿›åçš„ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">13</span>;<br>    <span class="hljs-type">int</span>[] cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>];<br>    Arrays.fill(cache, -<span class="hljs-number">1</span>);<br>    cache[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>    cache[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    System.out.println(f(cache, n));<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span>[] cache, <span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (cache[n] != -<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> cache[n];<br>    &#125;<br><br>    cache[n] = f(cache, n - <span class="hljs-number">1</span>) + f(cache, n - <span class="hljs-number">2</span>);<br>    <span class="hljs-keyword">return</span> cache[n];<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¼˜åŒ–åçš„å›¾ç¤ºï¼Œåªè¦ç»“æœè¢«ç¼“å­˜ï¼Œå°±<strong>ä¸ä¼šæ‰§è¡Œå…¶å­é—®é¢˜</strong></p><p><img src="http://cdn.ohheng.cn/202406121520594.png" alt="image-20221213173225807"></p><ul><li>æ”¹è¿›åçš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$</li><li>è¯·è‡ªè¡ŒéªŒè¯æ”¹è¿›åçš„æ•ˆæœ</li><li>è¯·è‡ªè¡Œåˆ†ææ”¹è¿›åçš„ç©ºé—´å¤æ‚åº¦</li></ul><blockquote><p><strong>æ³¨æ„</strong></p><ol><li>è®°å¿†æ³•æ˜¯åŠ¨æ€è§„åˆ’çš„ä¸€ç§æƒ…å†µï¼Œå¼ºè°ƒçš„æ˜¯è‡ªé¡¶å‘ä¸‹çš„è§£å†³</li><li>è®°å¿†æ³•çš„æœ¬è´¨æ˜¯ç©ºé—´æ¢æ—¶é—´</li></ol></blockquote><h3 id="é€’å½’ä¼˜åŒ–-å°¾é€’å½’"><a href="#é€’å½’ä¼˜åŒ–-å°¾é€’å½’" class="headerlink" title="é€’å½’ä¼˜åŒ–-å°¾é€’å½’"></a>é€’å½’ä¼˜åŒ–-å°¾é€’å½’</h3><p><strong>çˆ†æ ˆ</strong></p><p>ç”¨é€’å½’åš $n + (n-1) + (n-2) â€¦ + 1$</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">long</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">long</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> n + sum(n - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨æˆ‘çš„æœºå™¨ä¸Š  $n &#x3D; 12000$ æ—¶ï¼Œçˆ†æ ˆäº†</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs coq">Exception <span class="hljs-built_in">in</span> thread <span class="hljs-string">&quot;main&quot;</span> java.lang.StackOverflowError<br><span class="hljs-built_in">at</span> <span class="hljs-keyword">Test</span>.<span class="hljs-built_in">sum</span>(<span class="hljs-keyword">Test</span>.java:<span class="hljs-number">10</span>)<br><span class="hljs-built_in">at</span> <span class="hljs-keyword">Test</span>.<span class="hljs-built_in">sum</span>(<span class="hljs-keyword">Test</span>.java:<span class="hljs-number">10</span>)<br><span class="hljs-built_in">at</span> <span class="hljs-keyword">Test</span>.<span class="hljs-built_in">sum</span>(<span class="hljs-keyword">Test</span>.java:<span class="hljs-number">10</span>)<br><span class="hljs-built_in">at</span> <span class="hljs-keyword">Test</span>.<span class="hljs-built_in">sum</span>(<span class="hljs-keyword">Test</span>.java:<span class="hljs-number">10</span>)<br><span class="hljs-built_in">at</span> <span class="hljs-keyword">Test</span>.<span class="hljs-built_in">sum</span>(<span class="hljs-keyword">Test</span>.java:<span class="hljs-number">10</span>)<br>...<br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><ul><li>æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ˜¯éœ€è¦æ¶ˆè€—ä¸€å®šçš„æ ˆå†…å­˜çš„ï¼Œè¿™äº›å†…å­˜ç”¨æ¥å­˜å‚¨æ–¹æ³•å‚æ•°ã€æ–¹æ³•å†…å±€éƒ¨å˜é‡ã€è¿”å›åœ°å€ç­‰ç­‰</li><li>æ–¹æ³•è°ƒç”¨å ç”¨çš„å†…å­˜éœ€è¦ç­‰åˆ°<strong>æ–¹æ³•ç»“æŸæ—¶</strong>æ‰ä¼šé‡Šæ”¾</li><li>è€Œé€’å½’è°ƒç”¨æˆ‘ä»¬ä¹‹å‰è®²è¿‡ï¼Œä¸åˆ°æœ€æ·±ä¸ä¼šå›å¤´ï¼Œæœ€å†…å±‚æ–¹æ³•æ²¡å®Œæˆä¹‹å‰ï¼Œå¤–å±‚æ–¹æ³•éƒ½ç»“æŸä¸äº†<ul><li>ä¾‹å¦‚ï¼Œ$sum(3)$ è¿™ä¸ªæ–¹æ³•å†…æœ‰ä¸ªéœ€è¦æ‰§è¡Œ $3 + sum(2)$ï¼Œ$sum(2)$ æ²¡è¿”å›å‰ï¼ŒåŠ å·å‰é¢çš„ $3$ ä¸èƒ½é‡Šæ”¾ </li><li>çœ‹ä¸‹é¢ä¼ªç </li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">long</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">long</span> n = <span class="hljs-number">3</span>)</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">3</span> + <span class="hljs-type">long</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">long</span> n = <span class="hljs-number">2</span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> + <span class="hljs-type">long</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">long</span> n = <span class="hljs-number">1</span>)</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å°¾è°ƒç”¨</strong></p><p>å¦‚æœå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆç§°ä¸ºå°¾è°ƒç”¨ï¼Œä¾‹å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">b</span>()<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢ä¸‰æ®µä»£ç <strong>ä¸èƒ½</strong>å«åšå°¾è°ƒç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> c = <span class="hljs-title function_">b</span>()<br>    <span class="hljs-keyword">return</span> c<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å› ä¸ºæœ€åä¸€æ­¥å¹¶éè°ƒç”¨å‡½æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">b</span>() + <span class="hljs-number">1</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æœ€åä¸€æ­¥æ‰§è¡Œçš„æ˜¯åŠ æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params">x</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">b</span>() + x<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æœ€åä¸€æ­¥æ‰§è¡Œçš„æ˜¯åŠ æ³•</li></ul><p><strong>ä¸€äº›è¯­è¨€</strong>[^11]çš„ç¼–è¯‘å™¨èƒ½å¤Ÿå¯¹å°¾è°ƒç”¨åšä¼˜åŒ–ï¼Œä¾‹å¦‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// åšå‰é¢çš„äº‹</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">b</span>() <br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">b</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// åšå‰é¢çš„äº‹</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">c</span>()<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">c</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1000</span><br>&#125;<br><br><span class="hljs-title function_">a</span>()<br></code></pre></td></tr></table></figure><p>æ²¡ä¼˜åŒ–ä¹‹å‰çš„<strong>ä¼ªç </strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">b</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">c</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1000</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¼˜åŒ–å<strong>ä¼ªç </strong>å¦‚ä¸‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">a</span>()<br><span class="hljs-title function_">b</span>()<br><span class="hljs-title function_">c</span>()<br></code></pre></td></tr></table></figure><p>ä¸ºä½•å°¾é€’å½’æ‰èƒ½ä¼˜åŒ–ï¼Ÿ</p><p>è°ƒç”¨ a æ—¶</p><ul><li>a è¿”å›æ—¶å‘ç°ï¼šæ²¡ä»€ä¹ˆå¯ç•™ç»™ b çš„ï¼Œå°†æ¥è¿”å›çš„ç»“æœ b æä¾›å°±å¯ä»¥äº†ï¼Œç”¨ä¸ç€æˆ‘ a äº†ï¼Œæˆ‘çš„å†…å­˜å°±å¯ä»¥é‡Šæ”¾</li></ul><p>è°ƒç”¨ b æ—¶</p><ul><li>b è¿”å›æ—¶å‘ç°ï¼šæ²¡ä»€ä¹ˆå¯ç•™ç»™ c çš„ï¼Œå°†æ¥è¿”å›çš„ç»“æœ c æä¾›å°±å¯ä»¥äº†ï¼Œç”¨ä¸ç€æˆ‘ b äº†ï¼Œæˆ‘çš„å†…å­˜å°±å¯ä»¥é‡Šæ”¾</li></ul><p>å¦‚æœè°ƒç”¨ a æ—¶</p><ul><li>ä¸æ˜¯å°¾è°ƒç”¨ï¼Œä¾‹å¦‚ return b() + 1ï¼Œé‚£ä¹ˆ a å°±ä¸èƒ½æå‰ç»“æŸï¼Œå› ä¸ºå®ƒè¿˜å¾—åˆ©ç”¨ b çš„ç»“æœåšåŠ æ³•</li></ul><p><strong>å°¾é€’å½’</strong></p><p>å°¾é€’å½’æ˜¯å°¾è°ƒç”¨çš„ä¸€ç§ç‰¹ä¾‹ï¼Œä¹Ÿå°±æ˜¯æœ€åä¸€æ­¥æ‰§è¡Œçš„æ˜¯åŒä¸€ä¸ªå‡½æ•°</p><p><strong>å°¾é€’å½’é¿å…çˆ†æ ˆ</strong></p><p>å®‰è£… Scala</p><p><img src="http://cdn.ohheng.cn/202406121521837.png" alt="image-20221111122709227"></p><p>Scala å…¥é—¨</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Main</span> </span>&#123;<br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = &#123;<br>    println(<span class="hljs-string">&quot;Hello Scala&quot;</span>)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Scala æ˜¯ java çš„è¿‘äº²ï¼Œjava ä¸­çš„ç±»éƒ½å¯ä»¥æ‹¿æ¥é‡ç”¨</li><li>ç±»å‹æ˜¯æ”¾åœ¨å˜é‡åé¢çš„</li><li>Unit è¡¨ç¤ºæ— è¿”å›å€¼ï¼Œç±»ä¼¼äº void</li><li>ä¸éœ€è¦ä»¥åˆ†å·ä½œä¸ºç»“å°¾ï¼Œå½“ç„¶åŠ ä¸Šä¹Ÿå¯¹</li></ul><p>è¿˜æ˜¯å…ˆå†™ä¸€ä¸ªä¼šçˆ†æ ˆçš„å‡½æ•°</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span></span>(n: <span class="hljs-type">Long</span>): <span class="hljs-type">Long</span> = &#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> n + sum(n - <span class="hljs-number">1</span>)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Scala æœ€åä¸€è¡Œä»£ç è‹¥ä½œä¸ºè¿”å›å€¼ï¼Œå¯ä»¥çœç•¥ return</li></ul><p>ä¸å‡ºæ‰€æ–™ï¼Œåœ¨ $n &#x3D; 11000$ æ—¶ï¼Œè¿˜æ˜¯å‡ºäº†å¼‚å¸¸</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs scala">println(sum(<span class="hljs-number">11000</span>))<br><br><span class="hljs-type">Exception</span> in thread <span class="hljs-string">&quot;main&quot;</span> java.lang.<span class="hljs-type">StackOverflowError</span><br>at <span class="hljs-type">Main</span>$.sum(<span class="hljs-type">Main</span>.scala:<span class="hljs-number">25</span>)<br>at <span class="hljs-type">Main</span>$.sum(<span class="hljs-type">Main</span>.scala:<span class="hljs-number">25</span>)<br>at <span class="hljs-type">Main</span>$.sum(<span class="hljs-type">Main</span>.scala:<span class="hljs-number">25</span>)<br>at <span class="hljs-type">Main</span>$.sum(<span class="hljs-type">Main</span>.scala:<span class="hljs-number">25</span>)<br>...<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºä»¥ä¸Šä»£ç ï¼Œè¿˜ä¸æ˜¯å°¾è°ƒç”¨ï¼Œè¦æƒ³æˆä¸ºå°¾è°ƒç”¨ï¼Œé‚£ä¹ˆï¼š</p><ol><li>æœ€åä¸€è¡Œä»£ç ï¼Œå¿…é¡»æ˜¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨</li><li>å†…å±‚å‡½æ•°å¿…é¡»<strong>æ‘†è„±</strong>ä¸å¤–å±‚å‡½æ•°çš„å…³ç³»ï¼Œå†…å±‚å‡½æ•°<strong>æ‰§è¡Œå</strong>ä¸ä¾èµ–äºå¤–å±‚çš„å˜é‡æˆ–å¸¸é‡</li></ol><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span></span>(n: <span class="hljs-type">Long</span>): <span class="hljs-type">Long</span> = &#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> n + sum(n - <span class="hljs-number">1</span>)  <span class="hljs-comment">// ä¾èµ–äºå¤–å±‚å‡½æ•°çš„ n å˜é‡</span><br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚ä½•è®©å®ƒæ‰§è¡Œåå°±æ‘†è„±å¯¹ n çš„ä¾èµ–å‘¢ï¼Ÿ</p><ul><li>ä¸èƒ½ç­‰é€’å½’å›æ¥å†åšåŠ æ³•ï¼Œé‚£æ ·å°±å¿…é¡»ä¿ç•™å¤–å±‚çš„ n</li><li>æŠŠ n å½“åšå†…å±‚å‡½æ•°çš„ä¸€ä¸ªå‚æ•°ä¼ è¿›å»ï¼Œè¿™æ—¶ n å°±å±äºå†…å±‚å‡½æ•°äº†</li><li>ä¼ å‚æ—¶å°±å®Œæˆç´¯åŠ , ä¸å¿…ç­‰å›æ¥æ—¶ç´¯åŠ </li></ul><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel"><span class="hljs-built_in">sum</span>(<span class="hljs-built_in">n</span> - <span class="hljs-number">1</span>, <span class="hljs-built_in">n</span> + ç´¯åŠ å™¨)<br></code></pre></td></tr></table></figure><p>æ”¹å†™åä»£ç å¦‚ä¸‹</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-meta">@tailrec</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span></span>(n: <span class="hljs-type">Long</span>, accumulator: <span class="hljs-type">Long</span>): <span class="hljs-type">Long</span> = &#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + accumulator<br>    &#125; <br>    <span class="hljs-keyword">return</span> sum(n - <span class="hljs-number">1</span>, n + accumulator)<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>accumulator ä½œä¸ºç´¯åŠ å™¨</li><li>@tailrec æ³¨è§£æ˜¯ scala æä¾›çš„ï¼Œç”¨æ¥æ£€æŸ¥æ–¹æ³•æ˜¯å¦ç¬¦åˆå°¾é€’å½’</li><li>è¿™å› sum(10000000, 0) ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œæ‰“å° 50000005000000</li></ul><p>æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼Œä»¥<strong>ä¼ªç </strong>è¡¨ç¤º $sum(4, 0)$</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">// é¦–æ¬¡è°ƒç”¨</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span></span>(n = <span class="hljs-number">4</span>, accumulator = <span class="hljs-number">0</span>): <span class="hljs-type">Long</span> = &#123;<br>    <span class="hljs-keyword">return</span> sum(<span class="hljs-number">4</span> - <span class="hljs-number">1</span>, <span class="hljs-number">4</span> + accumulator)<br>&#125;<br><br><span class="hljs-comment">// æ¥ä¸‹æ¥è°ƒç”¨å†…å±‚ sum, ä¼ å‚æ—¶å°±å®Œæˆäº†ç´¯åŠ , ä¸å¿…ç­‰å›æ¥æ—¶ç´¯åŠ ï¼Œå½“å†…å±‚ sum è°ƒç”¨åï¼Œå¤–å±‚ sum ç©ºé—´æ²¡å¿…è¦ä¿ç•™</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span></span>(n = <span class="hljs-number">3</span>, accumulator = <span class="hljs-number">4</span>): <span class="hljs-type">Long</span> = &#123;<br>    <span class="hljs-keyword">return</span> sum(<span class="hljs-number">3</span> - <span class="hljs-number">1</span>, <span class="hljs-number">3</span> + accumulator)<br>&#125;<br><br><span class="hljs-comment">// ç»§ç»­è°ƒç”¨å†…å±‚ sum</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span></span>(n = <span class="hljs-number">2</span>, accumulator = <span class="hljs-number">7</span>): <span class="hljs-type">Long</span> = &#123;<br>    <span class="hljs-keyword">return</span> sum(<span class="hljs-number">2</span> - <span class="hljs-number">1</span>, <span class="hljs-number">2</span> + accumulator)<br>&#125;<br><br><span class="hljs-comment">// ç»§ç»­è°ƒç”¨å†…å±‚ sum, è¿™æ˜¯æœ€åçš„ sum è°ƒç”¨å®Œå°±è¿”å›æœ€åç»“æœ 10, å‰é¢æ‰€æœ‰å…¶å®ƒ sum çš„ç©ºé—´æ—©å·²é‡Šæ”¾</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span></span>(n = <span class="hljs-number">1</span>, accumulator = <span class="hljs-number">9</span>): <span class="hljs-type">Long</span> = &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-number">1</span> == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + accumulator<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ¬è´¨ä¸Šï¼Œå°¾é€’å½’ä¼˜åŒ–æ˜¯å°†å‡½æ•°çš„<strong>é€’å½’</strong>è°ƒç”¨ï¼Œå˜æˆäº†å‡½æ•°çš„<strong>å¾ªç¯</strong>è°ƒç”¨</p><p><strong>æ”¹å¾ªç¯é¿å…çˆ†æ ˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-number">100000000</span>;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n; i &gt;= <span class="hljs-number">1</span>; i--) &#123;<br>        sum += i;<br>    &#125;<br>    System.out.println(sum);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é€’å½’æ—¶é—´å¤æ‚åº¦-Master-theorem-14"><a href="#é€’å½’æ—¶é—´å¤æ‚åº¦-Master-theorem-14" class="headerlink" title="é€’å½’æ—¶é—´å¤æ‚åº¦-Master theorem[^14]"></a>é€’å½’æ—¶é—´å¤æ‚åº¦-Master theorem[^14]</h3><p>è‹¥æœ‰é€’å½’å¼<br>$$<br>T(n) &#x3D; aT(\frac{n}{b}) + f(n)<br>$$<br>å…¶ä¸­ </p><ul><li>$T(n)$ æ˜¯é—®é¢˜çš„è¿è¡Œæ—¶é—´ï¼Œ$n$ æ˜¯æ•°æ®è§„æ¨¡</li><li>$a$ æ˜¯å­é—®é¢˜ä¸ªæ•°</li><li>$T(\frac{n}{b})$ æ˜¯å­é—®é¢˜è¿è¡Œæ—¶é—´ï¼Œæ¯ä¸ªå­é—®é¢˜è¢«æ‹†æˆåŸé—®é¢˜æ•°æ®è§„æ¨¡çš„ $\frac{n}{b}$</li><li>$f(n)$ æ˜¯é™¤é€’å½’å¤–æ‰§è¡Œçš„è®¡ç®—</li></ul><p>ä»¤ $x &#x3D; \log_{b}{a}$ï¼Œå³ $x &#x3D; \log_{å­é—®é¢˜ç¼©å°å€æ•°}{å­é—®é¢˜ä¸ªæ•°}$</p><p>é‚£ä¹ˆ<br>$$<br>T(n) &#x3D;<br>\begin{cases}<br>\Theta(n^x) &amp; f(n) &#x3D; O(n^c) å¹¶ä¸” c \lt x\<br>\Theta(n^x\log{n}) &amp; f(n) &#x3D; \Theta(n^x)\<br>\Theta(n^c) &amp; f(n) &#x3D; \Omega(n^c) å¹¶ä¸” c \gt x<br>\end{cases}<br>$$</p><p><strong>ä¾‹1</strong></p><p>$T(n) &#x3D; 2T(\frac{n}{2}) + n^4$ </p><ul><li>æ­¤æ—¶ $x &#x3D; 1 &lt; 4$ï¼Œç”±åè€…å†³å®šæ•´ä¸ªæ—¶é—´å¤æ‚åº¦ $\Theta(n^4)$</li><li>å¦‚æœè§‰å¾—å¯¹æ•°ä¸å¥½ç®—ï¼Œå¯ä»¥æ¢ä¸ºæ±‚ã€$b$ çš„å‡ æ¬¡æ–¹èƒ½ç­‰äº $a$ã€‘</li></ul><p><strong>ä¾‹2</strong></p><p>$T(n) &#x3D; T(\frac{7n}{10}) + n$</p><ul><li>$a&#x3D;1, b&#x3D;\frac{10}{7}, x&#x3D;0, c&#x3D;1$</li><li>æ­¤æ—¶ $x &#x3D; 0 &lt; 1$ï¼Œç”±åè€…å†³å®šæ•´ä¸ªæ—¶é—´å¤æ‚åº¦ $\Theta(n)$</li></ul><p><strong>ä¾‹3</strong></p><p>$T(n) &#x3D; 16T(\frac{n}{4}) + n^2$</p><ul><li>$a&#x3D;16, b&#x3D;4, x&#x3D;2, c&#x3D;2$</li><li>æ­¤æ—¶ $x&#x3D;2 &#x3D; c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(n^2 \log{n})$</li></ul><p><strong>ä¾‹4</strong></p><p>$T(n)&#x3D;7T(\frac{n}{3}) + n^2$</p><ul><li>$a&#x3D;7, b&#x3D;3, x&#x3D;1.?, c&#x3D;2$</li><li>æ­¤æ—¶ $x &#x3D; \log_{3}{7} &lt; 2$ï¼Œç”±åè€…å†³å®šæ•´ä¸ªæ—¶é—´å¤æ‚åº¦ $\Theta(n^2)$</li></ul><p><strong>ä¾‹5</strong></p><p>$T(n) &#x3D; 7T(\frac{n}{2}) + n^2$</p><ul><li>$a&#x3D;7, b&#x3D;2, x&#x3D;2.?, c&#x3D;2$</li><li>æ­¤æ—¶ $x &#x3D; log_2{7} &gt; 2$ï¼Œç”±å‰è€…å†³å®šæ•´ä¸ªæ—¶é—´å¤æ‚åº¦ $\Theta(n^{\log_2{7}})$</li></ul><p><strong>ä¾‹6</strong></p><p>$T(n) &#x3D; 2T(\frac{n}{4}) + \sqrt{n}$</p><ul><li>$a&#x3D;2, b&#x3D;4, x &#x3D; 0.5, c&#x3D;0.5$</li><li>æ­¤æ—¶ $x &#x3D; 0.5 &#x3D; c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(\sqrt{n}\ \log{n})$</li></ul><p><strong>ä¾‹7. äºŒåˆ†æŸ¥æ‰¾é€’å½’</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> <span class="hljs-title function_">f</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>    <span class="hljs-keyword">if</span> (i &gt; j) &#123;<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<br>        <span class="hljs-keyword">return</span> f(a, target, i, m - <span class="hljs-number">1</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123;<br>        <span class="hljs-keyword">return</span> f(a, target, m + <span class="hljs-number">1</span>, j);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> m;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å­é—®é¢˜ä¸ªæ•° $a &#x3D; 1$</li><li>å­é—®é¢˜æ•°æ®è§„æ¨¡ç¼©å°å€æ•° $b &#x3D; 2$</li><li>é™¤é€’å½’å¤–æ‰§è¡Œçš„è®¡ç®—æ˜¯å¸¸æ•°çº§ $c&#x3D;0$</li></ul><p>$T(n) &#x3D; T(\frac{n}{2}) + n^0$</p><ul><li>æ­¤æ—¶ $x&#x3D;0 &#x3D; c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(\log{n})$</li></ul><p><strong>ä¾‹8. å½’å¹¶æ’åºé€’å½’</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">void split(B[], i, j, A[])<br>&#123;<br>    <span class="hljs-keyword">if</span> (j - i &lt;= <span class="hljs-number">1</span>)                    <br>        <span class="hljs-keyword">return</span>;                                <br>    m = (i + j) / <span class="hljs-number">2</span>;             <br>    <br>    // é€’å½’<br>    split(A, i, m, B);  <br>    split(A, m, j, B); <br>    <br>    // åˆå¹¶<br>    merge(B, i, m, j, A);<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å­é—®é¢˜ä¸ªæ•° $a&#x3D;2$</li><li>å­é—®é¢˜æ•°æ®è§„æ¨¡ç¼©å°å€æ•° $b&#x3D;2$</li><li>é™¤é€’å½’å¤–ï¼Œä¸»è¦æ—¶é—´èŠ±åœ¨åˆå¹¶ä¸Šï¼Œå®ƒå¯ä»¥ç”¨ $f(n) &#x3D; n$ è¡¨ç¤º</li></ul><p>$T(n) &#x3D; 2T(\frac{n}{2}) + n$</p><ul><li>æ­¤æ—¶ $x&#x3D;1&#x3D;c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(n\log{n})$</li></ul><p><strong>ä¾‹9. å¿«é€Ÿæ’åºé€’å½’</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">algorithm quicksort(A, lo, hi) <span class="hljs-keyword">is</span> <br>  <span class="hljs-keyword">if</span> lo &gt;= hi || lo &lt; <span class="hljs-number">0</span> then <br>    <span class="hljs-keyword">return</span><br>  <br>  // åˆ†åŒº<br>  p := partition(A, lo, hi) <br>  <br>  // é€’å½’<br>  quicksort(A, lo, p - <span class="hljs-number">1</span>) <br>  quicksort(A, p + <span class="hljs-number">1</span>, hi) <br></code></pre></td></tr></table></figure><ul><li>å­é—®é¢˜ä¸ªæ•° $a&#x3D;2$</li><li>å­é—®é¢˜æ•°æ®è§„æ¨¡ç¼©å°å€æ•°<ul><li>å¦‚æœåˆ†åŒºåˆ†çš„å¥½ï¼Œ$b&#x3D;2$</li><li>å¦‚æœåˆ†åŒºæ²¡åˆ†å¥½ï¼Œä¾‹å¦‚åˆ†åŒº1 çš„æ•°æ®æ˜¯ 0ï¼Œåˆ†åŒº 2 çš„æ•°æ®æ˜¯ $n-1$</li></ul></li><li>é™¤é€’å½’å¤–ï¼Œä¸»è¦æ—¶é—´èŠ±åœ¨åˆ†åŒºä¸Šï¼Œå®ƒå¯ä»¥ç”¨ $f(n) &#x3D; n$ è¡¨ç¤º</li></ul><p>æƒ…å†µ1 - åˆ†åŒºåˆ†çš„å¥½</p><p>$T(n) &#x3D; 2T(\frac{n}{2}) + n$</p><ul><li>æ­¤æ—¶ $x&#x3D;1&#x3D;c$ï¼Œæ—¶é—´å¤æ‚åº¦ $\Theta(n\log{n})$</li></ul><p>æƒ…å†µ2 - åˆ†åŒºæ²¡åˆ†å¥½</p><p>$T(n) &#x3D; T(n-1) + T(1) + n$</p><ul><li>æ­¤æ—¶ä¸èƒ½ç”¨ä¸»å®šç†æ±‚è§£</li></ul><h3 id="é€’å½’æ—¶é—´å¤æ‚åº¦-å±•å¼€æ±‚è§£"><a href="#é€’å½’æ—¶é—´å¤æ‚åº¦-å±•å¼€æ±‚è§£" class="headerlink" title="é€’å½’æ—¶é—´å¤æ‚åº¦-å±•å¼€æ±‚è§£"></a>é€’å½’æ—¶é—´å¤æ‚åº¦-å±•å¼€æ±‚è§£</h3><p>åƒä¸‹é¢çš„é€’å½’å¼ï¼Œéƒ½ä¸èƒ½ç”¨ä¸»å®šç†æ±‚è§£</p><p><strong>ä¾‹1 - é€’å½’æ±‚å’Œ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">long</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">long</span> n)</span> &#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> n + sum(n - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>$T(n) &#x3D; T(n-1) + c$ï¼Œ$T(1) &#x3D; c$</p><p>ä¸‹é¢ä¸ºå±•å¼€è¿‡ç¨‹</p><p>$T(n) &#x3D; T(n-2) + c + c$</p><p>$T(n) &#x3D; T(n-3) + c + c + c$</p><p>â€¦</p><p>$T(n) &#x3D; T(n-(n-1)) + (n-1)c$ </p><ul><li>å…¶ä¸­ $T(n-(n-1))$ å³ $T(1)$</li><li>å¸¦å…¥æ±‚å¾— $T(n) &#x3D; c + (n-1)c &#x3D; nc$</li></ul><p>æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$</p><p><strong>ä¾‹2 - é€’å½’å†’æ³¡æ’åº</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">bubble</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> high)</span> &#123;<br>    <span class="hljs-keyword">if</span>(<span class="hljs-number">0</span> == high) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; high; i++) &#123;<br>        <span class="hljs-keyword">if</span> (a[i] &gt; a[i + <span class="hljs-number">1</span>]) &#123;<br>            swap(a, i, i + <span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br>    bubble(a, high - <span class="hljs-number">1</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>$T(n) &#x3D; T(n-1) + n$ï¼Œ$T(1) &#x3D; c$</p><p>ä¸‹é¢ä¸ºå±•å¼€è¿‡ç¨‹</p><p>$T(n) &#x3D; T(n-2) + (n-1) + n$</p><p>$T(n) &#x3D; T(n-3) + (n-2) + (n-1) + n$</p><p>â€¦</p><p>$T(n) &#x3D; T(1) + 2 + â€¦ + n &#x3D; T(1) + (n-1)\frac{2+n}{2} &#x3D; c + \frac{n^2}{2} + \frac{n}{2} -1$</p><p>æ—¶é—´å¤æ‚åº¦ $O(n^2)$</p><blockquote><p>æ³¨ï¼š</p><ul><li>ç­‰å·®æ•°åˆ—æ±‚å’Œä¸º $ä¸ªæ•°*\frac{\verté¦–é¡¹-æœ«é¡¹\vert}{2}$</li></ul></blockquote><p><strong>ä¾‹3 - é€’å½’å¿«æ’</strong></p><p>å¿«é€Ÿæ’åºåˆ†åŒºæ²¡åˆ†å¥½çš„æç«¯æƒ…å†µ</p><p>$T(n) &#x3D; T(n-1) + T(1) + n$ï¼Œ$T(1) &#x3D; c$</p><p>$T(n) &#x3D; T(n-1) + c + n$</p><p>ä¸‹é¢ä¸ºå±•å¼€è¿‡ç¨‹</p><p>$T(n) &#x3D; T(n-2) + c + (n-1) + c + n$</p><p>$T(n) &#x3D; T(n-3) + c + (n-2) + c + (n-1) + c + n$</p><p>â€¦</p><p>$T(n) &#x3D; T(n-(n-1)) + (n-1)c + 2+â€¦+n &#x3D; \frac{n^2}{2} + \frac{2cn+n}{2} -1$</p><p>æ—¶é—´å¤æ‚åº¦ $O(n^2)$</p><p>ä¸ä¼šæ¨å¯¼çš„åŒå­¦å¯ä»¥è¿›å…¥ <a href="https://www.wolframalpha.com/">https://www.wolframalpha.com/</a></p><ul><li>ä¾‹1 è¾“å…¥ f(n) &#x3D; f(n - 1) + c, f(1) &#x3D; c</li><li>ä¾‹2 è¾“å…¥ f(n) &#x3D; f(n - 1) + n, f(1) &#x3D; c</li><li>ä¾‹3 è¾“å…¥ f(n) &#x3D; f(n - 1) + n + c, f(1) &#x3D; c</li></ul><h2 id="4-é˜Ÿåˆ—"><a href="#4-é˜Ÿåˆ—" class="headerlink" title="4. é˜Ÿåˆ—"></a>4. é˜Ÿåˆ—</h2><h3 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œqueue æ˜¯ä»¥é¡ºåºçš„æ–¹å¼ç»´æŠ¤çš„ä¸€ç»„æ•°æ®é›†åˆï¼Œåœ¨ä¸€ç«¯æ·»åŠ æ•°æ®ï¼Œä»å¦ä¸€ç«¯ç§»é™¤æ•°æ®ã€‚ä¹ æƒ¯æ¥è¯´ï¼Œæ·»åŠ çš„ä¸€ç«¯ç§°ä¸º<strong>å°¾</strong>ï¼Œç§»é™¤çš„ä¸€ç«¯ç§°ä¸º<strong>å¤´</strong>ï¼Œå°±å¦‚åŒç”Ÿæ´»ä¸­çš„æ’é˜Ÿä¹°å•†å“</p><blockquote><p>In computer science, a <strong>queue</strong> is a collection of entities that are maintained in a sequence and can be modified by  the addition of entities at one end of the sequence and the removal of  entities from the other end of the sequence</p></blockquote><p>å…ˆå®šä¹‰ä¸€ä¸ªç®€åŒ–çš„é˜Ÿåˆ—æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Queue</span>&lt;E&gt; &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å‘é˜Ÿåˆ—å°¾æ’å…¥å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value å¾…æ’å…¥å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> æ’å…¥æˆåŠŸè¿”å› true, æ’å…¥å¤±è´¥è¿”å› false</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E value)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»å¯¹åˆ—å¤´è·å–å€¼, å¹¶ç§»é™¤</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> å¦‚æœé˜Ÿåˆ—éç©ºè¿”å›å¯¹å¤´å€¼, å¦åˆ™è¿”å› null</span><br><span class="hljs-comment">     */</span><br>    E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»å¯¹åˆ—å¤´è·å–å€¼, ä¸ç§»é™¤</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> å¦‚æœé˜Ÿåˆ—éç©ºè¿”å›å¯¹å¤´å€¼, å¦åˆ™è¿”å› null</span><br><span class="hljs-comment">     */</span><br>    E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ç©ºè¿”å› true, å¦åˆ™è¿”å› false</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦å·²æ»¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> æ»¡è¿”å› true, å¦åˆ™è¿”å› false</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é“¾è¡¨å®ç°"><a href="#é“¾è¡¨å®ç°" class="headerlink" title="é“¾è¡¨å®ç°"></a>é“¾è¡¨å®ç°</h3><p>ä¸‹é¢ä»¥<strong>å•å‘ç¯å½¢å¸¦å“¨å…µ</strong>é“¾è¡¨æ–¹å¼æ¥å®ç°é˜Ÿåˆ—</p><p><img src="http://cdn.ohheng.cn/202406121521035.png" alt="image-20221230150105089"></p><p><img src="http://cdn.ohheng.cn/202406121701762.png" alt="image-20221230150141318"></p><p><img src="http://cdn.ohheng.cn/202406121522077.png" alt="image-20221230150153271"></p><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListQueue</span>&lt;E&gt;<br>        <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>&lt;E&gt; &#123;<br>        E value;<br>        Node&lt;E&gt; next;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(E value, Node&lt;E&gt; next)</span> &#123;<br>            <span class="hljs-built_in">this</span>.value = value;<br>            <span class="hljs-built_in">this</span>.next = next;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> Node&lt;E&gt; head = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);<br>    <span class="hljs-keyword">private</span> Node&lt;E&gt; tail = head;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">capacity</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;<br><br>    &#123;<br>        tail.next = head;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LinkedListQueue</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LinkedListQueue</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.capacity = capacity;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E value)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        Node&lt;E&gt; added = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(value, head);<br>        tail.next = added;<br>        tail = added;<br>        size++;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        Node&lt;E&gt; first = head.next;<br>        head.next = first.next;<br>        <span class="hljs-keyword">if</span> (first == tail) &#123;<br>            tail = head;<br>        &#125;<br>        size--;<br>        <span class="hljs-keyword">return</span> first.value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> head.next.value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> head == tail;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == capacity;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;E&gt;() &#123;<br>            Node&lt;E&gt; p = head.next;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p != head;<br>            &#125;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> E <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-type">E</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> p.value;<br>                p = p.next;<br>                <span class="hljs-keyword">return</span> value;<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç¯å½¢æ•°ç»„å®ç°"><a href="#ç¯å½¢æ•°ç»„å®ç°" class="headerlink" title="ç¯å½¢æ•°ç»„å®ç°"></a>ç¯å½¢æ•°ç»„å®ç°</h3><p><strong>å¥½å¤„</strong></p><ol><li>å¯¹æ¯”æ™®é€šæ•°ç»„ï¼Œèµ·ç‚¹å’Œç»ˆç‚¹æ›´ä¸ºè‡ªç”±ï¼Œä¸ç”¨è€ƒè™‘æ•°æ®ç§»åŠ¨</li><li>â€œç¯â€æ„å‘³ç€ä¸ä¼šå­˜åœ¨ã€è¶Šç•Œã€‘é—®é¢˜</li><li>æ•°ç»„æ€§èƒ½æ›´ä½³</li><li>ç¯å½¢æ•°ç»„æ¯”è¾ƒé€‚åˆå®ç°æœ‰ç•Œé˜Ÿåˆ—ã€RingBuffer ç­‰</li></ol><p><img src="http://cdn.ohheng.cn/202406121522751.png" alt="image-20221228175413998"></p><p><strong>ä¸‹æ ‡è®¡ç®—</strong></p><p>ä¾‹å¦‚ï¼Œæ•°ç»„é•¿åº¦æ˜¯ 5ï¼Œå½“å‰ä½ç½®æ˜¯ 3 ï¼Œå‘å‰èµ° 2 æ­¥ï¼Œæ­¤æ—¶ä¸‹æ ‡ä¸º $(3 + 2)%5 &#x3D; 0$</p><p><img src="http://cdn.ohheng.cn/202406121522985.png" alt="image-20221228180357257"></p><p>$$<br>(cur + step) % length<br>$$</p><ul><li>cur å½“å‰æŒ‡é’ˆä½ç½®</li><li>step å‰è¿›æ­¥æ•°</li><li>length æ•°ç»„é•¿åº¦</li></ul><blockquote><p>æ³¨æ„ï¼š</p><ul><li>å¦‚æœ step &#x3D; 1ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œå¯ä»¥åœ¨ &gt;&#x3D; length æ—¶é‡ç½®ä¸º 0 å³å¯</li></ul></blockquote><p><strong>åˆ¤æ–­ç©º</strong></p><p><img src="http://cdn.ohheng.cn/202406121522588.png" alt="image-20221231081009018"></p><p><strong>åˆ¤æ–­æ»¡</strong></p><p><img src="http://cdn.ohheng.cn/202406121522073.png" alt="image-20221231080909475"></p><p>æ»¡ä¹‹åçš„ç­–ç•¥å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚å†³å®š</p><ul><li>ä¾‹å¦‚æˆ‘ä»¬è¦å®ç°çš„ç¯å½¢é˜Ÿåˆ—ï¼Œæ»¡ä¹‹åå°±æ‹’ç»å…¥é˜Ÿ</li></ul><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayQueue</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt;&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">head</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> E[] array;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> length;<br><br>    <span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayQueue</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        length = capacity + <span class="hljs-number">1</span>;<br>        array = (E[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[length];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E value)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        array[tail] = value;<br>        tail = (tail + <span class="hljs-number">1</span>) % length;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">E</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> array[head];<br>        head = (head + <span class="hljs-number">1</span>) % length;<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> array[head];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> tail == head;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> (tail + <span class="hljs-number">1</span>) % length == head;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;E&gt;() &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> head;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p != tail;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> E <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-type">E</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> array[p];<br>                p = (p + <span class="hljs-number">1</span>) % array.length;<br>                <span class="hljs-keyword">return</span> value;<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åˆ¤æ–­ç©ºã€æ»¡æ–¹æ³•2</strong></p><p>å¼•å…¥ size </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayQueue2</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">head</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> E[] array;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> capacity;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayQueue2</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.capacity = capacity;<br>        array = (E[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[capacity];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E value)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        array[tail] = value;<br>        tail = (tail + <span class="hljs-number">1</span>) % capacity;<br>        size++;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">E</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> array[head];<br>        head = (head + <span class="hljs-number">1</span>) % capacity;<br>        size--;<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> array[head];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == capacity;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;E&gt;() &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> head;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p != tail;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> E <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-type">E</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> array[p];<br>                p = (p + <span class="hljs-number">1</span>) % capacity;<br>                <span class="hljs-keyword">return</span> value;<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åˆ¤æ–­ç©ºã€æ»¡æ–¹æ³•3</strong></p><ul><li><p>head å’Œ tail ä¸æ–­é€’å¢ï¼Œç”¨åˆ°ç´¢å¼•æ—¶ï¼Œå†ç”¨å®ƒä»¬è¿›è¡Œè®¡ç®—ï¼Œä¸¤ä¸ªé—®é¢˜</p><ul><li><p>å¦‚ä½•ä¿è¯ head å’Œ tail è‡ªå¢è¶…è¿‡æ­£æ•´æ•°æœ€å¤§å€¼çš„æ­£ç¡®æ€§</p></li><li><p>å¦‚ä½•è®©å–æ¨¡è¿ç®—æ€§èƒ½æ›´é«˜</p></li></ul></li><li><p>ç­”æ¡ˆï¼šè®© capacity ä¸º 2 çš„å¹‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayQueue3</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Queue</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">head</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> E[] array;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> capacity;<br><br>    <span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayQueue3</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        <span class="hljs-keyword">if</span> ((capacity &amp; capacity - <span class="hljs-number">1</span>) != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;capacity å¿…é¡»ä¸º 2 çš„å¹‚&quot;</span>);<br>        &#125;<br>        <span class="hljs-built_in">this</span>.capacity = capacity;<br>        array = (E[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[<span class="hljs-built_in">this</span>.capacity];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E value)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        array[tail &amp; capacity - <span class="hljs-number">1</span>] = value;<br>        tail++;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">E</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> array[head &amp; capacity - <span class="hljs-number">1</span>];<br>        head++;<br>        <span class="hljs-keyword">return</span> value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> array[head &amp; capacity - <span class="hljs-number">1</span>];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> tail - head == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> tail - head == capacity;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;E&gt;() &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> head;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p != tail;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> E <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-type">E</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> array[p &amp; capacity - <span class="hljs-number">1</span>];<br>                p++;<br>                <span class="hljs-keyword">return</span> value;<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="5-æ ˆ"><a href="#5-æ ˆ" class="headerlink" title="5. æ ˆ"></a>5. æ ˆ</h2><h3 id="æ¦‚è¿°-4"><a href="#æ¦‚è¿°-4" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œ<strong>stack</strong> æ˜¯ä¸€ç§çº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œåªèƒ½åœ¨å…¶ä¸€ç«¯æ·»åŠ æ•°æ®å’Œç§»é™¤æ•°æ®ã€‚ä¹ æƒ¯æ¥è¯´ï¼Œè¿™ä¸€ç«¯ç§°ä¹‹ä¸º<strong>æ ˆé¡¶</strong>ï¼Œå¦ä¸€ç«¯ä¸èƒ½æ“ä½œæ•°æ®çš„ç§°ä¹‹ä¸º<strong>æ ˆåº•</strong>ï¼Œå°±å¦‚åŒç”Ÿæ´»ä¸­çš„ä¸€æ‘ä¹¦</p><p>å…ˆæä¾›ä¸€ä¸ªæ ˆæ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Stack</span>&lt;E&gt; &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å‘æ ˆé¡¶å‹å…¥å…ƒç´ </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value å¾…å‹å…¥å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> å‹å…¥æˆåŠŸè¿”å› true, å¦åˆ™è¿”å› false</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">push</span><span class="hljs-params">(E value)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»æ ˆé¡¶å¼¹å‡ºå…ƒç´ </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> æ ˆéç©ºè¿”å›æ ˆé¡¶å…ƒç´ , æ ˆä¸ºç©ºè¿”å› null</span><br><span class="hljs-comment">     */</span><br>    E <span class="hljs-title function_">pop</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¿”å›æ ˆé¡¶å…ƒç´ , ä¸å¼¹å‡º</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> æ ˆéç©ºè¿”å›æ ˆé¡¶å…ƒç´ , æ ˆä¸ºç©ºè¿”å› null</span><br><span class="hljs-comment">     */</span><br>    E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ç©ºè¿”å› true, å¦åˆ™è¿”å› false</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ¤æ–­æ ˆæ˜¯å¦å·²æ»¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> æ»¡è¿”å› true, å¦åˆ™è¿”å› false</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é“¾è¡¨å®ç°-1"><a href="#é“¾è¡¨å®ç°-1" class="headerlink" title="é“¾è¡¨å®ç°"></a>é“¾è¡¨å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListStack</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Stack</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> capacity;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Node&lt;E&gt; head = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LinkedListStack</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.capacity = capacity;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">push</span><span class="hljs-params">(E value)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        head.next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(value, head.next);<br>        size++;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">pop</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        Node&lt;E&gt; first = head.next;<br>        head.next = first.next;<br>        size--;<br>        <span class="hljs-keyword">return</span> first.value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> head.next.value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> head.next == <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == capacity;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;E&gt;() &#123;<br>            Node&lt;E&gt; p = head.next;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p != <span class="hljs-literal">null</span>;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> E <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-type">E</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> p.value;<br>                p = p.next;<br>                <span class="hljs-keyword">return</span> value;<br>            &#125;<br>        &#125;;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>&lt;E&gt; &#123;<br>        E value;<br>        Node&lt;E&gt; next;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(E value, Node&lt;E&gt; next)</span> &#123;<br>            <span class="hljs-built_in">this</span>.value = value;<br>            <span class="hljs-built_in">this</span>.next = next;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ•°ç»„å®ç°"><a href="#æ•°ç»„å®ç°" class="headerlink" title="æ•°ç»„å®ç°"></a>æ•°ç»„å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayStack</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Stack</span>&lt;E&gt;, Iterable&lt;E&gt;&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> E[] array;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">top</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayStack</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.array = (E[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[capacity];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">push</span><span class="hljs-params">(E value)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        array[top++] = value;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">pop</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> array[--top];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> array[top-<span class="hljs-number">1</span>];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> top == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> top == array.length;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;E&gt;() &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> top;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p &gt; <span class="hljs-number">0</span>;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> E <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> array[--p];<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><p>æ¨¡æ‹Ÿå¦‚ä¸‹æ–¹æ³•è°ƒç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;main1&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;main2&quot;</span>);<br>    method1();<br>    method2();<br>    System.out.println(<span class="hljs-string">&quot;main3&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method1</span><span class="hljs-params">()</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;method1&quot;</span>);<br>    method3();<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method2</span><span class="hljs-params">()</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;method2&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method3</span><span class="hljs-params">()</span> &#123;<br>    System.out.println(<span class="hljs-string">&quot;method3&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ¨¡æ‹Ÿä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CPU</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Frame</span> &#123;<br>        <span class="hljs-type">int</span> exit;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Frame</span><span class="hljs-params">(<span class="hljs-type">int</span> exit)</span> &#123;<br>            <span class="hljs-built_in">this</span>.exit = exit;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">pc</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// æ¨¡æ‹Ÿç¨‹åºè®¡æ•°å™¨ Program counter</span><br>    <span class="hljs-keyword">static</span> ArrayStack&lt;Frame&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayStack</span>&lt;&gt;(<span class="hljs-number">100</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿæ–¹æ³•è°ƒç”¨æ ˆ</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        stack.push(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Frame</span>(-<span class="hljs-number">1</span>));<br>        <span class="hljs-keyword">while</span> (!stack.isEmpty()) &#123;<br>            <span class="hljs-keyword">switch</span> (pc) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span> -&gt; &#123;<br>                    System.out.println(<span class="hljs-string">&quot;main1&quot;</span>);<br>                    pc++;<br>                &#125;<br>                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span> -&gt; &#123;<br>                    System.out.println(<span class="hljs-string">&quot;main2&quot;</span>);<br>                    pc++;<br>                &#125;<br>                <span class="hljs-keyword">case</span> <span class="hljs-number">3</span> -&gt; &#123;<br>                    stack.push(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Frame</span>(pc + <span class="hljs-number">1</span>));<br>                    pc = <span class="hljs-number">100</span>;<br>                &#125;<br>                <span class="hljs-keyword">case</span> <span class="hljs-number">4</span> -&gt; &#123;<br>                    stack.push(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Frame</span>(pc + <span class="hljs-number">1</span>));<br>                    pc = <span class="hljs-number">200</span>;<br>                &#125;<br>                <span class="hljs-keyword">case</span> <span class="hljs-number">5</span> -&gt; &#123;<br>                    System.out.println(<span class="hljs-string">&quot;main3&quot;</span>);<br>                    pc = stack.pop().exit;<br>                &#125;<br>                <span class="hljs-keyword">case</span> <span class="hljs-number">100</span> -&gt; &#123;<br>                    System.out.println(<span class="hljs-string">&quot;method1&quot;</span>);<br>                    stack.push(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Frame</span>(pc + <span class="hljs-number">1</span>));<br>                    pc = <span class="hljs-number">300</span>;<br>                &#125;<br>                <span class="hljs-keyword">case</span> <span class="hljs-number">101</span> -&gt; &#123;<br>                    pc = stack.pop().exit;<br>                &#125;<br>                <span class="hljs-keyword">case</span> <span class="hljs-number">200</span> -&gt; &#123;<br>                    System.out.println(<span class="hljs-string">&quot;method2&quot;</span>);<br>                    pc = stack.pop().exit;<br>                &#125;<br>                <span class="hljs-keyword">case</span> <span class="hljs-number">300</span> -&gt; &#123;<br>                    System.out.println(<span class="hljs-string">&quot;method3&quot;</span>);<br>                    pc = stack.pop().exit;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-åŒç«¯é˜Ÿåˆ—"><a href="#6-åŒç«¯é˜Ÿåˆ—" class="headerlink" title="6. åŒç«¯é˜Ÿåˆ—"></a>6. åŒç«¯é˜Ÿåˆ—</h2><h3 id="æ¦‚è¿°-5"><a href="#æ¦‚è¿°-5" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>åŒç«¯é˜Ÿåˆ—ã€é˜Ÿåˆ—ã€æ ˆå¯¹æ¯”</p><table><thead><tr><th></th><th>å®šä¹‰</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>é˜Ÿåˆ—</td><td>ä¸€ç«¯åˆ é™¤ï¼ˆå¤´ï¼‰å¦ä¸€ç«¯æ·»åŠ ï¼ˆå°¾ï¼‰</td><td>First In First Out</td></tr><tr><td>æ ˆ</td><td>ä¸€ç«¯åˆ é™¤å’Œæ·»åŠ ï¼ˆé¡¶ï¼‰</td><td>Last In First Out</td></tr><tr><td>åŒç«¯é˜Ÿåˆ—</td><td>ä¸¤ç«¯éƒ½å¯ä»¥åˆ é™¤ã€æ·»åŠ </td><td></td></tr><tr><td>ä¼˜å…ˆçº§é˜Ÿåˆ—</td><td></td><td>ä¼˜å…ˆçº§é«˜è€…å…ˆå‡ºé˜Ÿ</td></tr><tr><td>å»¶æ—¶é˜Ÿåˆ—</td><td></td><td>æ ¹æ®å»¶æ—¶æ—¶é—´ç¡®å®šä¼˜å…ˆçº§</td></tr><tr><td>å¹¶å‘éé˜»å¡é˜Ÿåˆ—</td><td>é˜Ÿåˆ—ç©ºæˆ–æ»¡æ—¶ä¸é˜»å¡</td><td></td></tr><tr><td>å¹¶å‘é˜»å¡é˜Ÿåˆ—</td><td>é˜Ÿåˆ—ç©ºæ—¶åˆ é™¤é˜»å¡ã€é˜Ÿåˆ—æ»¡æ—¶æ·»åŠ é˜»å¡</td><td></td></tr></tbody></table><blockquote><p>æ³¨1ï¼š</p><ul><li>Java ä¸­ LinkedList å³ä¸ºå…¸å‹åŒç«¯é˜Ÿåˆ—å®ç°ï¼Œä¸è¿‡å®ƒåŒæ—¶å®ç°äº† Queue æ¥å£ï¼Œä¹Ÿæä¾›äº†æ ˆçš„ push pop ç­‰æ–¹æ³•</li></ul><p>æ³¨2ï¼š</p><ul><li><p>ä¸åŒè¯­è¨€ï¼Œæ“ä½œåŒç«¯é˜Ÿåˆ—çš„æ–¹æ³•å‘½åæœ‰æ‰€ä¸åŒï¼Œå‚è§ä¸‹è¡¨</p><table><thead><tr><th>æ“ä½œ</th><th>Java</th><th>JavaScript</th><th>C++</th><th>leetCode 641</th></tr></thead><tbody><tr><td>å°¾éƒ¨æ’å…¥</td><td>offerLast</td><td>push</td><td>push_back</td><td>insertLast</td></tr><tr><td>å¤´éƒ¨æ’å…¥</td><td>offerFirst</td><td>unshift</td><td>push_front</td><td>insertFront</td></tr><tr><td>å°¾éƒ¨ç§»é™¤</td><td>pollLast</td><td>pop</td><td>pop_back</td><td>deleteLast</td></tr><tr><td>å¤´éƒ¨ç§»é™¤</td><td>pollFirst</td><td>shift</td><td>pop_front</td><td>deleteFront</td></tr><tr><td>å°¾éƒ¨è·å–</td><td>peekLast</td><td>at(-1)</td><td>back</td><td>getRear</td></tr><tr><td>å¤´éƒ¨è·å–</td><td>peekFirst</td><td>at(0)</td><td>front</td><td>getFront</td></tr></tbody></table></li><li><p>åæ§½ä¸€ä¸‹ leetCode å‘½åæ¯”è¾ƒ low</p></li><li><p>å¸¸è§çš„å•è¯è¿˜æœ‰ enqueue å…¥é˜Ÿã€dequeue å‡ºé˜Ÿ</p></li></ul></blockquote><p><strong>æ¥å£å®šä¹‰</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Deque</span>&lt;E&gt; &#123;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">offerFirst</span><span class="hljs-params">(E e)</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">offerLast</span><span class="hljs-params">(E e)</span>;<br><br>    E <span class="hljs-title function_">pollFirst</span><span class="hljs-params">()</span>;<br><br>    E <span class="hljs-title function_">pollLast</span><span class="hljs-params">()</span>;<br><br>    E <span class="hljs-title function_">peekFirst</span><span class="hljs-params">()</span>;<br><br>    E <span class="hljs-title function_">peekLast</span><span class="hljs-params">()</span>;<br>    <br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é“¾è¡¨å®ç°-2"><a href="#é“¾è¡¨å®ç°-2" class="headerlink" title="é“¾è¡¨å®ç°"></a>é“¾è¡¨å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åŸºäºç¯å½¢é“¾è¡¨çš„åŒç«¯é˜Ÿåˆ—</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &lt;E&gt; å…ƒç´ ç±»å‹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListDeque</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Deque</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offerFirst</span><span class="hljs-params">(E e)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        size++;<br>        Node&lt;E&gt; a = sentinel;<br>        Node&lt;E&gt; b = sentinel.next;<br>        Node&lt;E&gt; offered = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(a, e, b);<br>        a.next = offered;<br>        b.prev = offered;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offerLast</span><span class="hljs-params">(E e)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        size++;<br>        Node&lt;E&gt; a = sentinel.prev;<br>        Node&lt;E&gt; b = sentinel;<br>        Node&lt;E&gt; offered = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(a, e, b);<br>        a.next = offered;<br>        b.prev = offered;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">pollFirst</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        Node&lt;E&gt; a = sentinel;<br>        Node&lt;E&gt; polled = sentinel.next;<br>        Node&lt;E&gt; b = polled.next;<br>        a.next = b;<br>        b.prev = a;<br>        size--;<br>        <span class="hljs-keyword">return</span> polled.value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">pollLast</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        Node&lt;E&gt; polled = sentinel.prev;<br>        Node&lt;E&gt; a = polled.prev;<br>        Node&lt;E&gt; b = sentinel;<br>        a.next = b;<br>        b.prev = a;<br>        size--;<br>        <span class="hljs-keyword">return</span> polled.value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peekFirst</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> sentinel.next.value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peekLast</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> sentinel.prev.value;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == capacity;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;E&gt;() &#123;<br>            Node&lt;E&gt; p = sentinel.next;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p != sentinel;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> E <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-type">E</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> p.value;<br>                p = p.next;<br>                <span class="hljs-keyword">return</span> value;<br>            &#125;<br>        &#125;;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>&lt;E&gt; &#123;<br>        Node&lt;E&gt; prev;<br>        E value;<br>        Node&lt;E&gt; next;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(Node&lt;E&gt; prev, E value, Node&lt;E&gt; next)</span> &#123;<br>            <span class="hljs-built_in">this</span>.prev = prev;<br>            <span class="hljs-built_in">this</span>.value = value;<br>            <span class="hljs-built_in">this</span>.next = next;<br>        &#125;<br>    &#125;<br><br>    Node&lt;E&gt; sentinel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>&lt;&gt;(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);<br>    <span class="hljs-type">int</span> capacity;<br>    <span class="hljs-type">int</span> size;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LinkedListDeque</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        sentinel.next = sentinel;<br>        sentinel.prev = sentinel;<br>        <span class="hljs-built_in">this</span>.capacity = capacity;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ•°ç»„å®ç°-1"><a href="#æ•°ç»„å®ç°-1" class="headerlink" title="æ•°ç»„å®ç°"></a>æ•°ç»„å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åŸºäºå¾ªç¯æ•°ç»„å®ç°, ç‰¹ç‚¹</span><br><span class="hljs-comment"> * &lt;ul&gt;</span><br><span class="hljs-comment"> *     &lt;li&gt;tail åœä¸‹æ¥çš„ä½ç½®ä¸å­˜å‚¨, ä¼šæµªè´¹ä¸€ä¸ªä½ç½®&lt;/li&gt;</span><br><span class="hljs-comment"> * &lt;/ul&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &lt;E&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayDeque1</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Deque</span>&lt;E&gt;, Iterable&lt;E&gt; &#123;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">                    h</span><br><span class="hljs-comment">            t</span><br><span class="hljs-comment">        0   1   2   3</span><br><span class="hljs-comment">        b           a</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offerFirst</span><span class="hljs-params">(E e)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        head = dec(head, array.length);<br>        array[head] = e;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offerLast</span><span class="hljs-params">(E e)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        array[tail] = e;<br>        tail = inc(tail, array.length);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">pollFirst</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">E</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> array[head];<br>        array[head] = <span class="hljs-literal">null</span>;<br>        head = inc(head, array.length);<br>        <span class="hljs-keyword">return</span> e;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">pollLast</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        tail = dec(tail, array.length);<br>        <span class="hljs-type">E</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> array[tail];<br>        array[tail] = <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">return</span> e;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peekFirst</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> array[head];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peekLast</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> array[dec(tail, array.length)];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> head == tail;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (tail &gt; head) &#123;<br>            <span class="hljs-keyword">return</span> tail - head == array.length - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (tail &lt; head) &#123;<br>            <span class="hljs-keyword">return</span> head - tail == <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;E&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Iterator</span>&lt;E&gt;() &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> head;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-keyword">return</span> p != tail;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> E <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>                <span class="hljs-type">E</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> array[p];<br>                p = inc(p, array.length);<br>                <span class="hljs-keyword">return</span> e;<br>            &#125;<br>        &#125;;<br>    &#125;<br><br>    E[] array;<br>    <span class="hljs-type">int</span> head;<br>    <span class="hljs-type">int</span> tail;<br><br>    <span class="hljs-meta">@SuppressWarnings(&quot;unchecked&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ArrayDeque1</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        array = (E[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[capacity + <span class="hljs-number">1</span>];<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">inc</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> length)</span> &#123;<br>        <span class="hljs-keyword">if</span> (i + <span class="hljs-number">1</span> &gt;= length) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">dec</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> length)</span> &#123;<br>        <span class="hljs-keyword">if</span> (i - <span class="hljs-number">1</span> &lt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> length - <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> i - <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ•°ç»„å®ç°ä¸­ï¼Œå¦‚æœå­˜å‚¨çš„æ˜¯åŸºæœ¬ç±»å‹ï¼Œé‚£ä¹ˆæ— éœ€è€ƒè™‘å†…å­˜é‡Šæ”¾ï¼Œä¾‹å¦‚</p><p><img src="http://cdn.ohheng.cn/202406121523023.png" alt="image-20230110084245095"></p><p>ä½†å¦‚æœå­˜å‚¨çš„æ˜¯å¼•ç”¨ç±»å‹ï¼Œåº”å½“è®¾ç½®è¯¥ä½ç½®çš„å¼•ç”¨ä¸º nullï¼Œä»¥ä¾¿å†…å­˜åŠæ—¶é‡Šæ”¾</p><p><img src="http://cdn.ohheng.cn/202406121523769.png" alt="image-20230110084632543"></p><h2 id="7-ä¼˜å…ˆçº§é˜Ÿåˆ—"><a href="#7-ä¼˜å…ˆçº§é˜Ÿåˆ—" class="headerlink" title="7. ä¼˜å…ˆçº§é˜Ÿåˆ—"></a>7. ä¼˜å…ˆçº§é˜Ÿåˆ—</h2><h3 id="æ— åºæ•°ç»„å®ç°"><a href="#æ— åºæ•°ç»„å®ç°" class="headerlink" title="æ— åºæ•°ç»„å®ç°"></a>æ— åºæ•°ç»„å®ç°</h3><p><strong>è¦ç‚¹</strong></p><ol><li>å…¥é˜Ÿä¿æŒé¡ºåº</li><li>å‡ºé˜Ÿå‰æ‰¾åˆ°ä¼˜å…ˆçº§æœ€é«˜çš„å‡ºé˜Ÿï¼Œç›¸å½“äºä¸€æ¬¡é€‰æ‹©æ’åº</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PriorityQueue1</span>&lt;E <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Priority</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Queue</span>&lt;E&gt; &#123;<br><br>    Priority[] array;<br>    <span class="hljs-type">int</span> size;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PriorityQueue1</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Priority</span>[capacity];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span> <span class="hljs-comment">// O(1)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E e)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        array[size++] = e;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// è¿”å›ä¼˜å…ˆçº§æœ€é«˜çš„ç´¢å¼•å€¼</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">selectMax</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; size; i++) &#123;<br>            <span class="hljs-keyword">if</span> (array[i].priority() &gt; array[max].priority()) &#123;<br>                max = i;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> max;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span> <span class="hljs-comment">// O(n)</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> selectMax();<br>        <span class="hljs-type">E</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> (E) array[max];<br>        remove(max);<br>        <span class="hljs-keyword">return</span> e;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-keyword">if</span> (index &lt; size - <span class="hljs-number">1</span>) &#123;<br>            System.arraycopy(array, index + <span class="hljs-number">1</span>,<br>                    array, index, size - <span class="hljs-number">1</span> - index);<br>        &#125;<br>        array[--size] = <span class="hljs-literal">null</span>; <span class="hljs-comment">// help GC</span><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> selectMax();<br>        <span class="hljs-keyword">return</span> (E) array[max];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == array.length;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>è§†é¢‘ä¸­å¿˜è®°äº† help GCï¼Œæ³¨æ„ä¸€ä¸‹</li></ul><h3 id="æœ‰åºæ•°ç»„å®ç°"><a href="#æœ‰åºæ•°ç»„å®ç°" class="headerlink" title="æœ‰åºæ•°ç»„å®ç°"></a>æœ‰åºæ•°ç»„å®ç°</h3><p><strong>è¦ç‚¹</strong></p><ol><li>å…¥é˜Ÿåæ’å¥½åºï¼Œä¼˜å…ˆçº§æœ€é«˜çš„æ’åˆ—åœ¨å°¾éƒ¨</li><li>å‡ºé˜Ÿåªéœ€åˆ é™¤å°¾éƒ¨å…ƒç´ å³å¯</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PriorityQueue2</span>&lt;E <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Priority</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Queue</span>&lt;E&gt; &#123;<br><br>    Priority[] array;<br>    <span class="hljs-type">int</span> size;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PriorityQueue2</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Priority</span>[capacity];<br>    &#125;<br><br>    <span class="hljs-comment">// O(n)</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E e)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        insert(e);<br>        size++;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// ä¸€è½®æ’å…¥æ’åº</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(E e)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> size - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; array[i].priority() &gt; e.priority()) &#123;<br>            array[i + <span class="hljs-number">1</span>] = array[i];<br>            i--;<br>        &#125;<br>        array[i + <span class="hljs-number">1</span>] = e;<br>    &#125;<br><br>    <span class="hljs-comment">// O(1)</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">E</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> (E) array[size - <span class="hljs-number">1</span>];<br>        array[--size] = <span class="hljs-literal">null</span>; <span class="hljs-comment">// help GC</span><br>        <span class="hljs-keyword">return</span> e;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> (E) array[size - <span class="hljs-number">1</span>];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == array.length;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å †å®ç°"><a href="#å †å®ç°" class="headerlink" title="å †å®ç°"></a>å †å®ç°</h3><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œå †æ˜¯ä¸€ç§åŸºäºæ ‘çš„æ•°æ®ç»“æ„ï¼Œé€šå¸¸ç”¨<strong>å®Œå…¨äºŒå‰æ ‘</strong>å®ç°ã€‚å †çš„ç‰¹æ€§å¦‚ä¸‹</p><ul><li>åœ¨å¤§é¡¶å †ä¸­ï¼Œä»»æ„èŠ‚ç‚¹ C ä¸å®ƒçš„çˆ¶èŠ‚ç‚¹ P ç¬¦åˆ $P.value \geq C.value$</li><li>è€Œå°é¡¶å †ä¸­ï¼Œä»»æ„èŠ‚ç‚¹ C ä¸å®ƒçš„çˆ¶èŠ‚ç‚¹ P ç¬¦åˆ $P.value \leq C.value$</li><li>æœ€é¡¶å±‚çš„èŠ‚ç‚¹ï¼ˆæ²¡æœ‰çˆ¶äº²ï¼‰ç§°ä¹‹ä¸º root æ ¹èŠ‚ç‚¹</li></ul><blockquote><p>In computer science, a <strong>heap</strong> is a specialized tree-based data structure which is essentially an almost complete tree that satisfies the <strong>heap property</strong>: in a <em>max heap</em>, for any given node C, if P is a parent node of C, then the <em>key</em> (the <em>value</em>) of P is greater than or equal to the key of C. In a <em>min heap</em>, the key of P is less than or equal to the key of C. The node at the â€œtopâ€ of the heap (with no parents) is called the <strong>root</strong> node</p></blockquote><p>ä¾‹1 - æ»¡äºŒå‰æ ‘ï¼ˆFull Binary Treeï¼‰ç‰¹ç‚¹ï¼šæ¯ä¸€å±‚éƒ½æ˜¯å¡«æ»¡çš„</p><p><img src="http://cdn.ohheng.cn/202406121523533.png" alt="image-20230112171444699"></p><p>ä¾‹2 - å®Œå…¨äºŒå‰æ ‘ï¼ˆComplete Binary Treeï¼‰ç‰¹ç‚¹ï¼šæœ€åä¸€å±‚å¯èƒ½æœªå¡«æ»¡ï¼Œé å·¦å¯¹é½</p><p><img src="http://cdn.ohheng.cn/202406121524568.png" alt="image-20230112171917135"></p><p>ä¾‹3 - å¤§é¡¶å †</p><p><img src="http://cdn.ohheng.cn/202406121524241.png" alt="image-20230112170242265"></p><p>ä¾‹4 - å°é¡¶å †</p><p><img src="http://cdn.ohheng.cn/202406121524669.png" alt="image-20230112171236067"></p><p>å®Œå…¨äºŒå‰æ ‘å¯ä»¥ä½¿ç”¨æ•°ç»„æ¥è¡¨ç¤º</p><p><img src="http://cdn.ohheng.cn/202406121524290.png" alt="image-20230112174351649"></p><p>ç‰¹å¾</p><ul><li>å¦‚æœä»ç´¢å¼• 0 å¼€å§‹å­˜å‚¨èŠ‚ç‚¹æ•°æ®<ul><li>èŠ‚ç‚¹ $i$ çš„çˆ¶èŠ‚ç‚¹ä¸º $floor((i-1)&#x2F;2)$ï¼Œå½“ $i&gt;0$ æ—¶</li><li>èŠ‚ç‚¹ $i$ çš„å·¦å­èŠ‚ç‚¹ä¸º $2i+1$ï¼Œå³å­èŠ‚ç‚¹ä¸º $2i+2$ï¼Œå½“ç„¶å®ƒä»¬å¾— $&lt; size$</li></ul></li><li>å¦‚æœä»ç´¢å¼• 1 å¼€å§‹å­˜å‚¨èŠ‚ç‚¹æ•°æ®<ul><li>èŠ‚ç‚¹ $i$ çš„çˆ¶èŠ‚ç‚¹ä¸º $floor(i&#x2F;2)$ï¼Œå½“ $i &gt; 1$ æ—¶</li><li>èŠ‚ç‚¹ $i$ çš„å·¦å­èŠ‚ç‚¹ä¸º $2i$ï¼Œå³å­èŠ‚ç‚¹ä¸º $2i+1$ï¼ŒåŒæ ·å¾— $&lt; size$</li></ul></li></ul><p>ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PriorityQueue4</span>&lt;E <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Priority</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Queue</span>&lt;E&gt; &#123;<br><br>    Priority[] array;<br>    <span class="hljs-type">int</span> size;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PriorityQueue4</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Priority</span>[capacity];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E offered)</span> &#123;<br>        <span class="hljs-keyword">if</span> (isFull()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">child</span> <span class="hljs-operator">=</span> size++;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">while</span> (child &gt; <span class="hljs-number">0</span> &amp;&amp; offered.priority() &gt; array[parent].priority()) &#123;<br>            array[child] = array[parent];<br>            child = parent;<br>            parent = (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>        &#125;<br>        array[child] = offered;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swap</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">Priority</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> array[i];<br>        array[i] = array[j];<br>        array[j] = t;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        swap(<span class="hljs-number">0</span>, size - <span class="hljs-number">1</span>);<br>        size--;<br>        <span class="hljs-type">Priority</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> array[size];<br>        array[size] = <span class="hljs-literal">null</span>;<br>        <br>        shiftDown(<span class="hljs-number">0</span>);        <br>        <span class="hljs-keyword">return</span> (E) e;<br>    &#125;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">shiftDown</span><span class="hljs-params">(<span class="hljs-type">int</span> parent)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span> * parent + <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> left + <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> parent;<br>        <span class="hljs-keyword">if</span> (left &lt; size &amp;&amp; array[left].priority() &gt; array[max].priority()) &#123;<br>            max = left;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (right &lt; size &amp;&amp; array[right].priority() &gt; array[max].priority()) &#123;<br>            max = right;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (max != parent) &#123;<br>            swap(max, parent);<br>            shiftDown(max);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> (E) array[<span class="hljs-number">0</span>];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == array.length;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="8-é˜»å¡é˜Ÿåˆ—"><a href="#8-é˜»å¡é˜Ÿåˆ—" class="headerlink" title="8. é˜»å¡é˜Ÿåˆ—"></a>8. é˜»å¡é˜Ÿåˆ—</h2><p>ä¹‹å‰çš„é˜Ÿåˆ—åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½ä¸èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼Œä¾‹å¦‚</p><ol><li>å¤§éƒ¨åˆ†åœºæ™¯è¦æ±‚åˆ†ç¦»å‘é˜Ÿåˆ—æ”¾å…¥ï¼ˆç”Ÿäº§è€…ï¼‰ã€ä»é˜Ÿåˆ—æ‹¿å‡ºï¼ˆæ¶ˆè´¹è€…ï¼‰ä¸¤ä¸ªè§’è‰²ã€å®ƒä»¬å¾—ç”±ä¸åŒçš„çº¿ç¨‹æ¥æ‹…å½“ï¼Œè€Œä¹‹å‰çš„å®ç°æ ¹æœ¬æ²¡æœ‰è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜</li><li>é˜Ÿåˆ—ä¸ºç©ºï¼Œé‚£ä¹ˆåœ¨ä¹‹å‰çš„å®ç°é‡Œä¼šè¿”å› nullï¼Œå¦‚æœå°±æ˜¯ç¡¬è¦æ‹¿åˆ°ä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿåªèƒ½ä¸æ–­å¾ªç¯å°è¯•</li><li>é˜Ÿåˆ—ä¸ºæ»¡ï¼Œé‚£ä¹ˆå†ä¹‹å‰çš„å®ç°é‡Œä¼šè¿”å› falseï¼Œå¦‚æœå°±æ˜¯ç¡¬è¦å¡å…¥ä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿåªèƒ½ä¸æ–­å¾ªç¯å°è¯•</li></ol><p>å› æ­¤æˆ‘ä»¬éœ€è¦è§£å†³çš„é—®é¢˜æœ‰</p><ol><li>ç”¨é”ä¿è¯çº¿ç¨‹å®‰å…¨</li><li>ç”¨æ¡ä»¶å˜é‡è®©<strong>ç­‰å¾…éç©ºçº¿ç¨‹</strong>ä¸<strong>ç­‰å¾…ä¸æ»¡çº¿ç¨‹</strong>è¿›å…¥<strong>ç­‰å¾…</strong>çŠ¶æ€ï¼Œè€Œä¸æ˜¯ä¸æ–­å¾ªç¯å°è¯•ï¼Œè®© CPU ç©ºè½¬</li></ol><p>æœ‰åŒå­¦å¯¹çº¿ç¨‹å®‰å…¨è¿˜æ²¡æœ‰è¶³å¤Ÿçš„è®¤è¯†ï¼Œä¸‹é¢ä¸¾ä¸€ä¸ªåä¾‹ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½è¦æ‰§è¡Œå…¥é˜Ÿæ“ä½œï¼ˆå‡ ä¹åœ¨åŒä¸€æ—¶åˆ»ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestThreadUnsafe</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">10</span>];<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(String e)</span> &#123;<br>        array[tail] = e;<br>        tail++;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Arrays.toString(array);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">TestThreadUnsafe</span> <span class="hljs-variable">queue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestThreadUnsafe</span>();<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt; queue.offer(<span class="hljs-string">&quot;e1&quot;</span>), <span class="hljs-string">&quot;t1&quot;</span>).start();<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt; queue.offer(<span class="hljs-string">&quot;e2&quot;</span>), <span class="hljs-string">&quot;t2&quot;</span>).start();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œçš„æ—¶é—´åºåˆ—å¦‚ä¸‹ï¼Œå‡è®¾åˆå§‹çŠ¶æ€ tail &#x3D; 0ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ç”±äº CPU åœ¨ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´åˆ‡æ¢ï¼Œé€ æˆäº†æŒ‡ä»¤äº¤é”™</p><table><thead><tr><th>çº¿ç¨‹1</th><th>çº¿ç¨‹2</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>array[tail]&#x3D;e1</td><td></td><td>çº¿ç¨‹1 å‘ tail ä½ç½®åŠ å…¥ e1 è¿™ä¸ªå…ƒç´ ï¼Œä½†è¿˜æ²¡æ¥å¾—åŠæ‰§è¡Œ  tail++</td></tr><tr><td></td><td>array[tail]&#x3D;e2</td><td>çº¿ç¨‹2 å‘ tail ä½ç½®åŠ å…¥ e2 è¿™ä¸ªå…ƒç´ ï¼Œè¦†ç›–æ‰äº† e1</td></tr><tr><td></td><td>tail++</td><td>tail è‡ªå¢ä¸º1</td></tr><tr><td>tail++</td><td></td><td>tail è‡ªå¢ä¸º2</td></tr><tr><td></td><td></td><td>æœ€åçŠ¶æ€ tail ä¸º 2ï¼Œæ•°ç»„ä¸º [e2, null, null â€¦]</td></tr></tbody></table><p>ç³Ÿç³•çš„æ˜¯ï¼Œç”±äºæŒ‡ä»¤äº¤é”™çš„é¡ºåºä¸åŒï¼Œå¾—åˆ°çš„ç»“æœä¸æ­¢ä»¥ä¸Šä¸€ç§ï¼Œå®è§‚ä¸Šé€ æˆæ··ä¹±çš„æ•ˆæœ</p><h3 id="å•é”å®ç°"><a href="#å•é”å®ç°" class="headerlink" title="å•é”å®ç°"></a>å•é”å®ç°</h3><p>Java ä¸­è¦é˜²æ­¢ä»£ç æ®µäº¤é”™æ‰§è¡Œï¼Œéœ€è¦ä½¿ç”¨é”ï¼Œæœ‰ä¸¤ç§é€‰æ‹©</p><ul><li>synchronized ä»£ç å—ï¼Œå±äºå…³é”®å­—çº§åˆ«æä¾›é”ä¿æŠ¤ï¼ŒåŠŸèƒ½å°‘</li><li>ReentrantLock ç±»ï¼ŒåŠŸèƒ½ä¸°å¯Œ</li></ul><p>ä»¥ ReentrantLock ä¸ºä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(String e)</span> &#123;<br>    lock.lockInterruptibly();<br>    <span class="hljs-keyword">try</span> &#123;<br>        array[tail] = e;<br>        tail++;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        lock.unlock();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>åªè¦ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œä¸Šæ®µä»£ç æ—¶ï¼Œé”å¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œå°±èƒ½ä¿è¯ try å—å†…çš„ä»£ç çš„æ‰§è¡Œä¸ä¼šå‡ºç°æŒ‡ä»¤äº¤é”™ç°è±¡ï¼Œå³æ‰§è¡Œé¡ºåºåªå¯èƒ½æ˜¯ä¸‹é¢ä¸¤ç§æƒ…å†µä¹‹ä¸€</p><table><thead><tr><th>çº¿ç¨‹1</th><th>çº¿ç¨‹2</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>lock.lockInterruptibly()</td><td></td><td>t1å¯¹é”å¯¹è±¡ä¸Šé”</td></tr><tr><td>array[tail]&#x3D;e1</td><td></td><td></td></tr><tr><td></td><td>lock.lockInterruptibly()</td><td>å³ä½¿ CPU åˆ‡æ¢åˆ°çº¿ç¨‹2ï¼Œä½†ç”±äºt1å·²ç»å¯¹è¯¥å¯¹è±¡ä¸Šé”ï¼Œå› æ­¤çº¿ç¨‹2å¡åœ¨è¿™å„¿è¿›ä¸å»</td></tr><tr><td>tail++</td><td></td><td>åˆ‡æ¢å›çº¿ç¨‹1 æ‰§è¡Œåç»­ä»£ç </td></tr><tr><td>lock.unlock()</td><td></td><td>çº¿ç¨‹1 è§£é”</td></tr><tr><td></td><td>array[tail]&#x3D;e2</td><td>çº¿ç¨‹2 æ­¤æ—¶æ‰èƒ½è·å¾—é”ï¼Œæ‰§è¡Œå®ƒçš„ä»£ç </td></tr><tr><td></td><td>tail++</td><td></td></tr></tbody></table><ul><li>å¦ä¸€ç§æƒ…å†µæ˜¯çº¿ç¨‹2 å…ˆè·å¾—é”ï¼Œçº¿ç¨‹1 è¢«æŒ¡åœ¨å¤–é¢</li><li>è¦æ˜ç™½<strong>ä¿æŠ¤çš„æœ¬è´¨</strong>ï¼Œæœ¬ä¾‹ä¸­æ˜¯ä¿æŠ¤çš„æ˜¯ tail ä½ç½®è¯»å†™çš„å®‰å…¨</li></ul><p>äº‹æƒ…è¿˜æ²¡æœ‰å®Œï¼Œä¸Šé¢çš„ä¾‹å­æ˜¯é˜Ÿåˆ—è¿˜æ²¡æœ‰æ”¾æ»¡çš„æƒ…å†µï¼Œè€ƒè™‘ä¸‹é¢çš„ä»£ç ï¼ˆè¿™å›é”åŒæ—¶ä¿æŠ¤äº† tail å’Œ size çš„è¯»å†™å®‰å…¨ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br><span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(String e)</span> &#123;<br>    lock.lockInterruptibly();<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">if</span>(isFull()) &#123;<br>            <span class="hljs-comment">// æ»¡äº†æ€ä¹ˆåŠ?</span><br>        &#125;<br>        array[tail] = e;<br>        tail++;<br>        <br>        size++;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        lock.unlock();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> size == array.length;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¹‹å‰æ˜¯è¿”å› false è¡¨ç¤ºæ·»åŠ å¤±è´¥ï¼Œå‰é¢åˆ†æè¿‡æƒ³è¾¾åˆ°è¿™ä¹ˆä¸€ç§æ•ˆæœï¼š</p><ul><li>åœ¨é˜Ÿåˆ—æ»¡æ—¶ï¼Œä¸æ˜¯ç«‹åˆ»è¿”å›ï¼Œè€Œæ˜¯å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…</li><li>ä»€ä¹ˆæ—¶å€™é˜Ÿåˆ—ä¸æ»¡äº†ï¼Œå†å”¤é†’è¿™ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼Œä»ä¸Šæ¬¡çš„ä»£ç å¤„ç»§ç»­å‘ä¸‹è¿è¡Œ</li></ul><p>ReentrantLock å¯ä»¥é…åˆæ¡ä»¶å˜é‡æ¥å®ç°ï¼Œä»£ç è¿›åŒ–ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br><span class="hljs-type">Condition</span> <span class="hljs-variable">tailWaits</span> <span class="hljs-operator">=</span> lock.newCondition(); <span class="hljs-comment">// æ¡ä»¶å˜é‡</span><br><span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(String e)</span> &#123;<br>    lock.lockInterruptibly();<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">while</span> (isFull()) &#123;<br>            tailWaits.await();<span class="hljs-comment">// å½“é˜Ÿåˆ—æ»¡æ—¶, å½“å‰çº¿ç¨‹è¿›å…¥ tailWaits ç­‰å¾…</span><br>        &#125;<br>        array[tail] = e;<br>        tail++;<br>        <br>        size++;<br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        lock.unlock();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> size == array.length;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ¡ä»¶å˜é‡åº•å±‚ä¹Ÿæ˜¯ä¸ªé˜Ÿåˆ—ï¼Œç”¨æ¥å­˜å‚¨è¿™äº›éœ€è¦ç­‰å¾…çš„çº¿ç¨‹ï¼Œå½“é˜Ÿåˆ—æ»¡äº†ï¼Œå°±ä¼šå°† offer çº¿ç¨‹åŠ å…¥æ¡ä»¶é˜Ÿåˆ—ï¼Œå¹¶æš‚æ—¶é‡Šæ”¾é”</li><li>å°†æ¥æˆ‘ä»¬çš„é˜Ÿåˆ—å¦‚æœä¸æ»¡äº†ï¼ˆç”± poll çº¿ç¨‹é‚£è¾¹å¾—çŸ¥ï¼‰å¯ä»¥è°ƒç”¨ tailWaits.signal() æ¥å”¤é†’ tailWaits ä¸­é¦–ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼Œè¢«å”¤é†’çš„çº¿ç¨‹ä¼šå†æ¬¡æŠ¢åˆ°é”ï¼Œä»ä¸Šæ¬¡ await å¤„ç»§ç»­å‘ä¸‹è¿è¡Œ</li></ul><p>æ€è€ƒä¸ºä½•è¦ç”¨ while è€Œä¸æ˜¯ ifï¼Œè®¾é˜Ÿåˆ—å®¹é‡æ˜¯ 3</p><table><thead><tr><th>æ“ä½œå‰</th><th>offer(4)</th><th>offer(5)</th><th>poll()</th><th>æ“ä½œå</th></tr></thead><tbody><tr><td>[1 2 3]</td><td>é˜Ÿåˆ—æ»¡ï¼Œè¿›å…¥tailWaits ç­‰å¾…</td><td></td><td></td><td>[1 2 3]</td></tr><tr><td>[1 2 3]</td><td></td><td></td><td>å–èµ° 1ï¼Œé˜Ÿåˆ—ä¸æ»¡ï¼Œå”¤é†’çº¿ç¨‹</td><td>[2 3]</td></tr><tr><td>[2 3]</td><td></td><td>æŠ¢å…ˆè·å¾—é”ï¼Œå‘ç°ä¸æ»¡ï¼Œæ”¾å…¥ 5</td><td></td><td>[2 3 5]</td></tr><tr><td>[2 3 5]</td><td>ä»ä¸Šæ¬¡ç­‰å¾…å¤„ç›´æ¥å‘ä¸‹æ‰§è¡Œ</td><td></td><td></td><td>[2 3 5 ?]</td></tr></tbody></table><p>å…³é”®ç‚¹ï¼š</p><ul><li>ä» tailWaits ä¸­å”¤é†’çš„çº¿ç¨‹ï¼Œä¼šä¸æ–°æ¥çš„ offer çš„çº¿ç¨‹äº‰æŠ¢é”ï¼Œè°èƒ½æŠ¢åˆ°æ˜¯ä¸ä¸€å®šçš„ï¼Œå¦‚æœåè€…å…ˆæŠ¢åˆ°ï¼Œå°±ä¼šå¯¼è‡´æ¡ä»¶åˆå‘ç”Ÿå˜åŒ–</li><li>è¿™ç§æƒ…å†µç§°ä¹‹ä¸º<strong>è™šå‡å”¤é†’</strong>ï¼Œå”¤é†’ååº”è¯¥é‡æ–°æ£€æŸ¥æ¡ä»¶ï¼Œçœ‹æ˜¯ä¸æ˜¯å¾—é‡æ–°è¿›å…¥ç­‰å¾…</li></ul><p>æœ€åçš„å®ç°ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å•é”å®ç°</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &lt;E&gt; å…ƒç´ ç±»å‹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BlockingQueue1</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BlockingQueue</span>&lt;E&gt; &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> E[] array;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">head</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// å…ƒç´ ä¸ªæ•°</span><br><br>    <span class="hljs-meta">@SuppressWarnings(&quot;all&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BlockingQueue1</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        array = (E[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[capacity];<br>    &#125;<br><br>    <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br>    <span class="hljs-type">Condition</span> <span class="hljs-variable">tailWaits</span> <span class="hljs-operator">=</span> lock.newCondition();<br>    <span class="hljs-type">Condition</span> <span class="hljs-variable">headWaits</span> <span class="hljs-operator">=</span> lock.newCondition();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E e)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        lock.lockInterruptibly();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">while</span> (isFull()) &#123;<br>                tailWaits.await();<br>            &#125;<br>            array[tail] = e;<br>            <span class="hljs-keyword">if</span> (++tail == array.length) &#123;<br>                tail = <span class="hljs-number">0</span>;<br>            &#125;<br>            size++;<br>            headWaits.signal();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            lock.unlock();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E e, <span class="hljs-type">long</span> timeout)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        lock.lockInterruptibly();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">long</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> TimeUnit.MILLISECONDS.toNanos(timeout);<br>            <span class="hljs-keyword">while</span> (isFull()) &#123;<br>                <span class="hljs-keyword">if</span> (t &lt;= <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br>                t = tailWaits.awaitNanos(t);<br>            &#125;<br>            array[tail] = e;<br>            <span class="hljs-keyword">if</span> (++tail == array.length) &#123;<br>                tail = <span class="hljs-number">0</span>;<br>            &#125;<br>            size++;<br>            headWaits.signal();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            lock.unlock();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        lock.lockInterruptibly();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">while</span> (isEmpty()) &#123;<br>                headWaits.await();<br>            &#125;<br>            <span class="hljs-type">E</span> <span class="hljs-variable">e</span> <span class="hljs-operator">=</span> array[head];<br>            array[head] = <span class="hljs-literal">null</span>; <span class="hljs-comment">// help GC</span><br>            <span class="hljs-keyword">if</span> (++head == array.length) &#123;<br>                head = <span class="hljs-number">0</span>;<br>            &#125;<br>            size--;<br>            tailWaits.signal();<br>            <span class="hljs-keyword">return</span> e;<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            lock.unlock();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size == array.length;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>public void offer(E e, long timeout) throws InterruptedException æ˜¯å¸¦è¶…æ—¶çš„ç‰ˆæœ¬ï¼Œå¯ä»¥åªç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè€Œä¸æ˜¯æ°¸ä¹…ç­‰ä¸‹å»ï¼Œç±»ä¼¼çš„ poll ä¹Ÿå¯ä»¥åšå¸¦è¶…æ—¶çš„ç‰ˆæœ¬ï¼Œè¿™ä¸ªç•™ç»™å¤§å®¶äº†</li></ul><blockquote><p><strong>æ³¨æ„</strong></p><ul><li>JDK ä¸­ BlockingQueue æ¥å£çš„æ–¹æ³•å‘½åä¸æˆ‘çš„ç¤ºä¾‹æœ‰äº›å·®å¼‚<ul><li>æ–¹æ³• offer(E e) æ˜¯éé˜»å¡çš„å®ç°ï¼Œé˜»å¡å®ç°æ–¹æ³•ä¸º put(E e)</li><li>æ–¹æ³• poll() æ˜¯éé˜»å¡çš„å®ç°ï¼Œé˜»å¡å®ç°æ–¹æ³•ä¸º take()</li></ul></li></ul></blockquote><h3 id="åŒé”å®ç°"><a href="#åŒé”å®ç°" class="headerlink" title="åŒé”å®ç°"></a>åŒé”å®ç°</h3><p>å•é”çš„ç¼ºç‚¹åœ¨äºï¼š</p><ul><li>ç”Ÿäº§å’Œæ¶ˆè´¹å‡ ä¹æ˜¯ä¸å†²çªçš„ï¼Œå”¯ä¸€å†²çªçš„æ˜¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…å®ƒä»¬æœ‰å¯èƒ½åŒæ—¶ä¿®æ”¹ size</li><li>å†²çªçš„ä¸»è¦æ˜¯ç”Ÿäº§è€…ä¹‹é—´ï¼šå¤šä¸ª offer çº¿ç¨‹ä¿®æ”¹ tail</li><li>å†²çªçš„è¿˜æœ‰æ¶ˆè´¹è€…ä¹‹é—´ï¼šå¤šä¸ª poll çº¿ç¨‹ä¿®æ”¹ head</li></ul><p>å¦‚æœå¸Œæœ›è¿›ä¸€æ­¥æé«˜æ€§èƒ½ï¼Œå¯ä»¥ç”¨ä¸¤æŠŠé”</p><ul><li>ä¸€æŠŠé”ä¿æŠ¤ tail</li><li>å¦ä¸€æŠŠé”ä¿æŠ¤ head</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">headLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();  <span class="hljs-comment">// ä¿æŠ¤ head çš„é”</span><br><span class="hljs-type">Condition</span> <span class="hljs-variable">headWaits</span> <span class="hljs-operator">=</span> headLock.newCondition(); <span class="hljs-comment">// é˜Ÿåˆ—ç©ºæ—¶ï¼Œéœ€è¦ç­‰å¾…çš„çº¿ç¨‹é›†åˆ</span><br><br><span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">tailLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();  <span class="hljs-comment">// ä¿æŠ¤ tail çš„é”</span><br><span class="hljs-type">Condition</span> <span class="hljs-variable">tailWaits</span> <span class="hljs-operator">=</span> tailLock.newCondition(); <span class="hljs-comment">// é˜Ÿåˆ—æ»¡æ—¶ï¼Œéœ€è¦ç­‰å¾…çš„çº¿ç¨‹é›†åˆ</span><br></code></pre></td></tr></table></figure><p>å…ˆçœ‹çœ‹ offer æ–¹æ³•çš„åˆæ­¥å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E e)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>    tailLock.lockInterruptibly();<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// é˜Ÿåˆ—æ»¡ç­‰å¾…</span><br>        <span class="hljs-keyword">while</span> (isFull()) &#123;<br>            tailWaits.await();<br>        &#125;<br>        <br>        <span class="hljs-comment">// ä¸æ»¡åˆ™å…¥é˜Ÿ</span><br>        array[tail] = e;<br>        <span class="hljs-keyword">if</span> (++tail == array.length) &#123;<br>            tail = <span class="hljs-number">0</span>;<br>        &#125;<br>        <br>        <span class="hljs-comment">// ä¿®æ”¹ size ï¼ˆæœ‰é—®é¢˜ï¼‰</span><br>        size++;<br>        <br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        tailLock.unlock();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„ç¼ºç‚¹æ˜¯ size å¹¶ä¸å— tailLock ä¿æŠ¤ï¼ŒtailLock ä¸ headLock æ˜¯ä¸¤æŠŠä¸åŒçš„é”ï¼Œå¹¶ä¸èƒ½å®ç°äº’æ–¥çš„æ•ˆæœã€‚å› æ­¤ï¼Œsize éœ€è¦ç”¨ä¸‹é¢çš„ä»£ç ä¿è¯åŸå­æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);   <span class="hljs-comment">// ä¿æŠ¤ size çš„åŸå­å˜é‡</span><br><br>size.getAndIncrement(); <span class="hljs-comment">// è‡ªå¢</span><br>size.getAndDecrement(); <span class="hljs-comment">// è‡ªå‡</span><br></code></pre></td></tr></table></figure><p>ä»£ç ä¿®æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E e)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>    tailLock.lockInterruptibly();<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// é˜Ÿåˆ—æ»¡ç­‰å¾…</span><br>        <span class="hljs-keyword">while</span> (isFull()) &#123;<br>            tailWaits.await();<br>        &#125;<br>        <br>        <span class="hljs-comment">// ä¸æ»¡åˆ™å…¥é˜Ÿ</span><br>        array[tail] = e;<br>        <span class="hljs-keyword">if</span> (++tail == array.length) &#123;<br>            tail = <span class="hljs-number">0</span>;<br>        &#125;<br>        <br>        <span class="hljs-comment">// ä¿®æ”¹ size</span><br>        size.getAndIncrement();<br>        <br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        tailLock.unlock();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹ç§°åœ°ï¼Œå¯ä»¥å†™å‡º poll æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>    E e;<br>    headLock.lockInterruptibly();<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// é˜Ÿåˆ—ç©ºç­‰å¾…</span><br>        <span class="hljs-keyword">while</span> (isEmpty()) &#123;<br>            headWaits.await();<br>        &#125;<br>        <br>        <span class="hljs-comment">// ä¸ç©ºåˆ™å‡ºé˜Ÿ</span><br>        e = array[head];<br>        <span class="hljs-keyword">if</span> (++head == array.length) &#123;<br>            head = <span class="hljs-number">0</span>;<br>        &#125;<br>        <br>        <span class="hljs-comment">// ä¿®æ”¹ size</span><br>        size.getAndDecrement();<br>        <br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        headLock.unlock();<br>    &#125;<br>    <span class="hljs-keyword">return</span> e;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªéš¾é¢˜ï¼Œå°±æ˜¯å¦‚ä½•é€šçŸ¥ headWaits å’Œ tailWaits ä¸­ç­‰å¾…çš„çº¿ç¨‹ï¼Œæ¯”å¦‚ poll æ–¹æ³•æ‹¿èµ°ä¸€ä¸ªå…ƒç´ ï¼Œé€šçŸ¥ tailWaitsï¼šæˆ‘æ‹¿èµ°ä¸€ä¸ªï¼Œä¸æ»¡äº†å™¢ï¼Œä½ ä»¬å¯ä»¥æ”¾äº†ï¼Œå› æ­¤ä»£ç æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>    E e;<br>    headLock.lockInterruptibly();<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-comment">// é˜Ÿåˆ—ç©ºç­‰å¾…</span><br>        <span class="hljs-keyword">while</span> (isEmpty()) &#123;<br>            headWaits.await();<br>        &#125;<br>        <br>        <span class="hljs-comment">// ä¸ç©ºåˆ™å‡ºé˜Ÿ</span><br>        e = array[head];<br>        <span class="hljs-keyword">if</span> (++head == array.length) &#123;<br>            head = <span class="hljs-number">0</span>;<br>        &#125;<br>        <br>        <span class="hljs-comment">// ä¿®æ”¹ size</span><br>        size.getAndDecrement();<br>        <br>        <span class="hljs-comment">// é€šçŸ¥ tailWaits ä¸æ»¡ï¼ˆæœ‰é—®é¢˜ï¼‰</span><br>        tailWaits.signal();<br>        <br>    &#125; <span class="hljs-keyword">finally</span> &#123;<br>        headLock.unlock();<br>    &#125;<br>    <span class="hljs-keyword">return</span> e;<br>&#125;<br></code></pre></td></tr></table></figure><p>é—®é¢˜åœ¨äºè¦ä½¿ç”¨è¿™äº›æ¡ä»¶å˜é‡çš„ await()ï¼Œ signal() ç­‰æ–¹æ³•éœ€è¦å…ˆè·å¾—ä¸ä¹‹å…³è”çš„é”ï¼Œä¸Šé¢çš„ä»£ç è‹¥ç›´æ¥è¿è¡Œä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">java.lang.IllegalMonitorStateException<br></code></pre></td></tr></table></figure><p>é‚£æœ‰åŒå­¦è¯´ï¼ŒåŠ ä¸Šé”ä¸å°±è¡Œäº†å—ï¼Œäºæ˜¯å†™å‡ºäº†ä¸‹é¢çš„ä»£ç </p><p><img src="http://cdn.ohheng.cn/202406121524506.png" alt="image-20230208160343493"></p><p>å‘ç°ä»€ä¹ˆé—®é¢˜äº†ï¼Ÿä¸¤æŠŠé”è¿™ä¹ˆåµŒå¥—ä½¿ç”¨ï¼Œéå¸¸å®¹æ˜“å‡ºç°æ­»é”ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><p><img src="http://cdn.ohheng.cn/202406121525106.png" alt="image-20230208160143386"></p><p>å› æ­¤å¾—é¿å…åµŒå¥—ï¼Œä¸¤æ®µåŠ é”çš„ä»£ç å˜æˆäº†ä¸‹é¢å¹³çº§çš„æ ·å­</p><p><img src="http://cdn.ohheng.cn/202406121525079.png" alt="image-20230208162857435"></p><p>æ€§èƒ½è¿˜å¯ä»¥è¿›ä¸€æ­¥æå‡</p><ol><li><p>ä»£ç è°ƒæ•´å offer å¹¶æ²¡æœ‰åŒæ—¶è·å– tailLock å’Œ headLock ä¸¤æŠŠé”ï¼Œå› æ­¤ä¸¤æ¬¡åŠ é”ä¹‹é—´ä¼šæœ‰<strong>ç©ºéš™</strong>ï¼Œè¿™ä¸ªç©ºéš™å†…å¯èƒ½æœ‰å…¶å®ƒçš„ offer çº¿ç¨‹æ·»åŠ äº†æ›´å¤šçš„å…ƒç´ ï¼Œé‚£ä¹ˆè¿™äº›çº¿ç¨‹éƒ½è¦æ‰§è¡Œ signal()ï¼Œé€šçŸ¥ poll çº¿ç¨‹é˜Ÿåˆ—éç©ºå—ï¼Ÿ</p><ul><li>æ¯æ¬¡è°ƒç”¨ signal() éƒ½éœ€è¦è¿™äº› offer çº¿ç¨‹å…ˆè·å¾— headLock é”ï¼Œæˆæœ¬è¾ƒé«˜ï¼Œè¦æƒ³æ³•å‡å°‘ offer çº¿ç¨‹è·å¾— headLock é”çš„æ¬¡æ•°</li><li>å¯ä»¥åŠ ä¸€ä¸ªæ¡ä»¶ï¼šå½“ offer å¢åŠ å‰é˜Ÿåˆ—ä¸ºç©ºï¼Œå³ä» 0 å˜åŒ–åˆ°ä¸ç©ºï¼Œæ‰ç”±æ­¤ offer çº¿ç¨‹æ¥é€šçŸ¥ headWaitsï¼Œå…¶å®ƒæƒ…å†µä¸å½’å®ƒç®¡</li></ul></li><li><p>é˜Ÿåˆ—ä» 0 å˜åŒ–åˆ°ä¸ç©ºï¼Œä¼šå”¤é†’ä¸€ä¸ªç­‰å¾…çš„ poll çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹è¢«å”¤é†’åï¼Œè‚¯å®šèƒ½æ‹¿åˆ° headLock é”ï¼Œå› æ­¤å®ƒå…·å¤‡äº†å”¤é†’ headWaits ä¸Šå…¶å®ƒ poll çº¿ç¨‹çš„å…ˆå†³æ¡ä»¶ã€‚å¦‚æœæ£€æŸ¥å‡ºæ­¤æ—¶æœ‰å…¶å®ƒ offer çº¿ç¨‹æ–°å¢äº†å…ƒç´ ï¼ˆä¸ç©ºï¼Œä½†ä¸æ˜¯ä»0å˜åŒ–è€Œæ¥ï¼‰ï¼Œé‚£ä¹ˆä¸å¦¨ç”±æ­¤ poll çº¿ç¨‹æ¥å”¤é†’å…¶å®ƒ poll çº¿ç¨‹</p></li></ol><p>è¿™ä¸ªæŠ€å·§è¢«ç§°ä¹‹ä¸ºçº§è”é€šçŸ¥ï¼ˆcascading notifiesï¼‰ï¼Œç±»ä¼¼çš„åŸå› </p><ol start="3"><li>åœ¨ poll æ—¶é˜Ÿåˆ—ä»æ»¡å˜åŒ–åˆ°ä¸æ»¡ï¼Œæ‰ç”±æ­¤ poll çº¿ç¨‹æ¥å”¤é†’ä¸€ä¸ªç­‰å¾…çš„ offer çº¿ç¨‹ï¼Œç›®çš„ä¹Ÿæ˜¯ä¸ºäº†å‡å°‘ poll çº¿ç¨‹å¯¹ tailLock ä¸Šé”æ¬¡æ•°ï¼Œå‰©ä¸‹ç­‰å¾…çš„ offer çº¿ç¨‹ç”±è¿™ä¸ª offer çº¿ç¨‹é—´æ¥å”¤é†’</li></ol><p>æœ€ç»ˆçš„ä»£ç ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BlockingQueue2</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BlockingQueue</span>&lt;E&gt; &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> E[] array;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">head</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tail</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">headLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br>    <span class="hljs-type">Condition</span> <span class="hljs-variable">headWaits</span> <span class="hljs-operator">=</span> headLock.newCondition();<br>    <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">tailLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br>    <span class="hljs-type">Condition</span> <span class="hljs-variable">tailWaits</span> <span class="hljs-operator">=</span> tailLock.newCondition();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BlockingQueue2</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.array = (E[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[capacity];<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E e)</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        <span class="hljs-type">int</span> c;<br>        tailLock.lockInterruptibly();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">while</span> (isFull()) &#123;<br>                tailWaits.await();<br>            &#125;<br>            array[tail] = e;<br>            <span class="hljs-keyword">if</span> (++tail == array.length) &#123;<br>                tail = <span class="hljs-number">0</span>;<br>            &#125;            <br>            c = size.getAndIncrement();<br>            <span class="hljs-comment">// a. é˜Ÿåˆ—ä¸æ»¡, ä½†ä¸æ˜¯ä»æ»¡-&gt;ä¸æ»¡, ç”±æ­¤offerçº¿ç¨‹å”¤é†’å…¶å®ƒofferçº¿ç¨‹</span><br>            <span class="hljs-keyword">if</span> (c + <span class="hljs-number">1</span> &lt; array.length) &#123;<br>                tailWaits.signal();<br>            &#125;<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            tailLock.unlock();<br>        &#125;<br>        <span class="hljs-comment">// b. ä»0-&gt;ä¸ç©º, ç”±æ­¤offerçº¿ç¨‹å”¤é†’ç­‰å¾…çš„pollçº¿ç¨‹</span><br>        <span class="hljs-keyword">if</span> (c == <span class="hljs-number">0</span>) &#123;<br>            headLock.lock();<br>            <span class="hljs-keyword">try</span> &#123;<br>                headWaits.signal();<br>            &#125; <span class="hljs-keyword">finally</span> &#123;<br>                headLock.unlock();<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        E e;<br>        <span class="hljs-type">int</span> c;<br>        headLock.lockInterruptibly();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">while</span> (isEmpty()) &#123;<br>                headWaits.await(); <br>            &#125;<br>            e = array[head]; <br>            <span class="hljs-keyword">if</span> (++head == array.length) &#123;<br>                head = <span class="hljs-number">0</span>;<br>            &#125;<br>            c = size.getAndDecrement();<br>            <span class="hljs-comment">// b. é˜Ÿåˆ—ä¸ç©º, ä½†ä¸æ˜¯ä»0å˜åŒ–åˆ°ä¸ç©ºï¼Œç”±æ­¤pollçº¿ç¨‹é€šçŸ¥å…¶å®ƒpollçº¿ç¨‹</span><br>            <span class="hljs-keyword">if</span> (c &gt; <span class="hljs-number">1</span>) &#123;<br>                headWaits.signal();<br>            &#125;<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            headLock.unlock();<br>        &#125;<br>        <span class="hljs-comment">// a. ä»æ»¡-&gt;ä¸æ»¡, ç”±æ­¤pollçº¿ç¨‹å”¤é†’ç­‰å¾…çš„offerçº¿ç¨‹</span><br>        <span class="hljs-keyword">if</span> (c == array.length) &#123;<br>            tailLock.lock();<br>            <span class="hljs-keyword">try</span> &#123;<br>                tailWaits.signal();<br>            &#125; <span class="hljs-keyword">finally</span> &#123;<br>                tailLock.unlock();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> e;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size.get() == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isFull</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> size.get() == array.length;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åŒé”å®ç°çš„éå¸¸ç²¾å·§ï¼Œæ®è¯´ä½œè€… Doug Lea èŠ±äº†ä¸€å¹´çš„æ—¶é—´æ‰å®Œå–„äº†æ­¤æ®µä»£ç </p><h2 id="9-å †"><a href="#9-å †" class="headerlink" title="9. å †"></a>9. å †</h2><p>ä»¥å¤§é¡¶å †ä¸ºä¾‹ï¼Œç›¸å¯¹äºä¹‹å‰çš„ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå¢åŠ äº†å †åŒ–ç­‰æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MaxHeap</span> &#123;<br>    <span class="hljs-type">int</span>[] array;<br>    <span class="hljs-type">int</span> size;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MaxHeap</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[capacity];<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–å †é¡¶å…ƒç´ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> å †é¡¶å…ƒç´ </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> array[<span class="hljs-number">0</span>];<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤å †é¡¶å…ƒç´ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> å †é¡¶å…ƒç´ </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">poll</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">top</span> <span class="hljs-operator">=</span> array[<span class="hljs-number">0</span>];<br>        swap(<span class="hljs-number">0</span>, size - <span class="hljs-number">1</span>);<br>        size--;<br>        down(<span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">return</span> top;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤æŒ‡å®šç´¢å¼•å¤„å…ƒç´ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> index ç´¢å¼•</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> è¢«åˆ é™¤å…ƒç´ </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">poll</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">deleted</span> <span class="hljs-operator">=</span> array[index];<br>        swap(index, size - <span class="hljs-number">1</span>);<br>        size--;<br>        down(index);<br>        <span class="hljs-keyword">return</span> deleted;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›¿æ¢å †é¡¶å…ƒç´ </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> replaced æ–°å…ƒç´ </span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">replace</span><span class="hljs-params">(<span class="hljs-type">int</span> replaced)</span> &#123;<br>        array[<span class="hljs-number">0</span>] = replaced;<br>        down(<span class="hljs-number">0</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å †çš„å°¾éƒ¨æ·»åŠ å…ƒç´ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> offered æ–°å…ƒç´ </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> æ˜¯å¦æ·»åŠ æˆåŠŸ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(<span class="hljs-type">int</span> offered)</span> &#123;<br>        <span class="hljs-keyword">if</span> (size == array.length) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        up(offered);<br>        size++;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// å°† offered å…ƒç´ ä¸Šæµ®: ç›´è‡³ offered å°äºçˆ¶å…ƒç´ æˆ–åˆ°å †é¡¶</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">up</span><span class="hljs-params">(<span class="hljs-type">int</span> offered)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">child</span> <span class="hljs-operator">=</span> size;<br>        <span class="hljs-keyword">while</span> (child &gt; <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> (child - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>            <span class="hljs-keyword">if</span> (offered &gt; array[parent]) &#123;<br>                array[child] = array[parent];<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            child = parent;<br>        &#125;<br>        array[child] = offered;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MaxHeap</span><span class="hljs-params">(<span class="hljs-type">int</span>[] array)</span> &#123;<br>        <span class="hljs-built_in">this</span>.array = array;<br>        <span class="hljs-built_in">this</span>.size = array.length;<br>        heapify();<br>    &#125;<br><br>    <span class="hljs-comment">// å»ºå †</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">heapify</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// å¦‚ä½•æ‰¾åˆ°æœ€åè¿™ä¸ªéå¶å­èŠ‚ç‚¹  size / 2 - 1</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> size / <span class="hljs-number">2</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>            down(i);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// å°† parent ç´¢å¼•å¤„çš„å…ƒç´ ä¸‹æ½œ: ä¸ä¸¤ä¸ªå­©å­è¾ƒå¤§è€…äº¤æ¢, ç›´è‡³æ²¡å­©å­æˆ–å­©å­æ²¡å®ƒå¤§</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">down</span><span class="hljs-params">(<span class="hljs-type">int</span> parent)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> parent * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> left + <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> parent;<br>        <span class="hljs-keyword">if</span> (left &lt; size &amp;&amp; array[left] &gt; array[max]) &#123;<br>            max = left;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (right &lt; size &amp;&amp; array[right] &gt; array[max]) &#123;<br>            max = right;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (max != parent) &#123; <span class="hljs-comment">// æ‰¾åˆ°äº†æ›´å¤§çš„å­©å­</span><br>            swap(max, parent);<br>            down(max);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// äº¤æ¢ä¸¤ä¸ªç´¢å¼•å¤„çš„å…ƒç´ </span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swap</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> array[i];<br>        array[i] = array[j];<br>        array[j] = t;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">int</span>[] array = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>&#125;;<br>        <span class="hljs-type">MaxHeap</span> <span class="hljs-variable">maxHeap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MaxHeap</span>(array);<br>        System.out.println(Arrays.toString(maxHeap.array));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å»ºå †</strong></p><p>Floyd å»ºå †ç®—æ³•ä½œè€…ï¼ˆä¹Ÿæ˜¯ä¹‹å‰é¾Ÿå…”èµ›è·‘åˆ¤ç¯ä½œè€…ï¼‰ï¼š</p><p><img src="http://cdn.ohheng.cn/202406121525753.png" alt="image-20230213095110902"></p><ol><li>æ‰¾åˆ°æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹</li><li>ä»åå‘å‰ï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œä¸‹æ½œ</li></ol><p>ä¸€äº›è§„å¾‹</p><ul><li>ä¸€æ£µæ»¡äºŒå‰æ ‘èŠ‚ç‚¹ä¸ªæ•°ä¸º $2^h-1$ï¼Œå¦‚ä¸‹ä¾‹ä¸­é«˜åº¦ $h&#x3D;3$ èŠ‚ç‚¹æ•°æ˜¯ $2^3-1&#x3D;7$</li><li>éå¶å­èŠ‚ç‚¹èŒƒå›´ä¸º $[0, size&#x2F;2-1]$</li></ul><p>ç®—æ³•æ—¶é—´å¤æ‚åº¦åˆ†æ</p><p><img src="http://cdn.ohheng.cn/202406121525113.png" alt="image-20230213114024607"></p><p>ä¸‹é¢çœ‹äº¤æ¢æ¬¡æ•°çš„æ¨å¯¼ï¼šè®¾èŠ‚ç‚¹é«˜åº¦ä¸º 3</p><table><thead><tr><th></th><th>æœ¬å±‚èŠ‚ç‚¹æ•°</th><th>é«˜åº¦</th><th>ä¸‹æ½œæœ€å¤šäº¤æ¢æ¬¡æ•°ï¼ˆé«˜åº¦-1ï¼‰</th></tr></thead><tbody><tr><td>4567 è¿™å±‚</td><td>4</td><td>1</td><td>0</td></tr><tr><td>23è¿™å±‚</td><td>2</td><td>2</td><td>1</td></tr><tr><td>1è¿™å±‚</td><td>1</td><td>3</td><td>2</td></tr></tbody></table><p>æ¯ä¸€å±‚çš„äº¤æ¢æ¬¡æ•°ä¸ºï¼š$èŠ‚ç‚¹ä¸ªæ•°*æ­¤èŠ‚ç‚¹äº¤æ¢æ¬¡æ•°$ï¼Œæ€»çš„äº¤æ¢æ¬¡æ•°ä¸º<br>$$<br>\begin{aligned}<br>&amp; 4 * 0 + 2 * 1 + 1 * 2 \</p><p>&amp; \frac{8}{2}*0 + \frac{8}{4}*1 + \frac{8}{8}*2 \</p><p>&amp; \frac{8}{2^1}*0 + \frac{8}{2^2}*1 + \frac{8}{2^3}*2\</p><p>\end{aligned}<br>$$<br>å³<br>$$<br>\sum_{i&#x3D;1}^{h}(\frac{2^h}{2^i}*(i-1))<br>$$<br>åœ¨ <a href="https://www.wolframalpha.com/">https://www.wolframalpha.com/</a> è¾“å…¥</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Sum</span>[\(<span class="hljs-number">40</span>)Divide[Power[<span class="hljs-number">2</span>,x],Power[<span class="hljs-number">2</span>,i]]*\(<span class="hljs-number">40</span>)i-<span class="hljs-number">1</span>\(<span class="hljs-number">41</span>)\(<span class="hljs-number">41</span>),&#123;i,<span class="hljs-number">1</span>,x&#125;]<br></code></pre></td></tr></table></figure><p>æ¨å¯¼å‡º<br>$$<br>2^h -h -1<br>$$<br>å…¶ä¸­ $2^h \approx n$ï¼Œ$h \approx \log_2{n}$ï¼Œå› æ­¤æœ‰æ—¶é—´å¤æ‚åº¦ $O(n)$</p><h2 id="10-äºŒå‰æ ‘"><a href="#10-äºŒå‰æ ‘" class="headerlink" title="10. äºŒå‰æ ‘"></a>10. äºŒå‰æ ‘</h2><p>äºŒå‰æ ‘æ˜¯è¿™ä¹ˆä¸€ç§æ ‘çŠ¶ç»“æ„ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­©å­ï¼Œå·¦å­©å­å’Œå³å­©å­</p><p>é‡è¦çš„äºŒå‰æ ‘ç»“æ„</p><ul><li>å®Œå…¨äºŒå‰æ ‘ï¼ˆcomplete binary treeï¼‰æ˜¯ä¸€ç§äºŒå‰æ ‘ç»“æ„ï¼Œé™¤æœ€åä¸€å±‚ä»¥å¤–ï¼Œæ¯ä¸€å±‚éƒ½å¿…é¡»å¡«æ»¡ï¼Œå¡«å……æ—¶è¦éµä»å…ˆå·¦åå³</li><li>å¹³è¡¡äºŒå‰æ ‘ï¼ˆbalance binary treeï¼‰æ˜¯ä¸€ç§äºŒå‰æ ‘ç»“æ„ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ç›¸å·®ä¸è¶…è¿‡ 1</li></ul><h3 id="å­˜å‚¨"><a href="#å­˜å‚¨" class="headerlink" title="å­˜å‚¨"></a>å­˜å‚¨</h3><p>å­˜å‚¨æ–¹å¼åˆ†ä¸ºä¸¤ç§</p><ol><li>å®šä¹‰æ ‘èŠ‚ç‚¹ä¸å·¦ã€å³å­©å­å¼•ç”¨ï¼ˆTreeNodeï¼‰</li><li>ä½¿ç”¨æ•°ç»„ï¼Œå‰é¢è®²å †æ—¶ç”¨è¿‡ï¼Œè‹¥ä»¥ 0 ä½œä¸ºæ ‘çš„æ ¹ï¼Œç´¢å¼•å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è®¡ç®—<ul><li>çˆ¶ &#x3D; floor((å­ - 1) &#x2F; 2)</li><li>å·¦å­©å­ &#x3D; çˆ¶ * 2 + 1</li><li>å³å­©å­ &#x3D; çˆ¶ * 2 + 2</li></ul></li></ol><h3 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h3><p>éå†ä¹Ÿåˆ†ä¸ºä¸¤ç§</p><ol><li>å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBreadth-first orderï¼‰ï¼šå°½å¯èƒ½å…ˆè®¿é—®è·ç¦»æ ¹æœ€è¿‘çš„èŠ‚ç‚¹ï¼Œä¹Ÿç§°ä¸ºå±‚åºéå†</li><li>æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDepth-first orderï¼‰ï¼šå¯¹äºäºŒå‰æ ‘ï¼Œå¯ä»¥è¿›ä¸€æ­¥åˆ†æˆä¸‰ç§ï¼ˆè¦æ·±å…¥åˆ°å¶å­èŠ‚ç‚¹ï¼‰<ol><li>pre-order å‰åºéå†ï¼Œå¯¹äºæ¯ä¸€æ£µå­æ ‘ï¼Œå…ˆè®¿é—®è¯¥èŠ‚ç‚¹ï¼Œç„¶åæ˜¯å·¦å­æ ‘ï¼Œæœ€åæ˜¯å³å­æ ‘</li><li>in-order ä¸­åºéå†ï¼Œå¯¹äºæ¯ä¸€æ£µå­æ ‘ï¼Œå…ˆè®¿é—®å·¦å­æ ‘ï¼Œç„¶åæ˜¯è¯¥èŠ‚ç‚¹ï¼Œæœ€åæ˜¯å³å­æ ‘</li><li>post-order ååºéå†ï¼Œå¯¹äºæ¯ä¸€æ£µå­æ ‘ï¼Œå…ˆè®¿é—®å·¦å­æ ‘ï¼Œç„¶åæ˜¯å³å­æ ‘ï¼Œæœ€åæ˜¯è¯¥èŠ‚ç‚¹</li></ol></li></ol><h4 id="å¹¿åº¦ä¼˜å…ˆ"><a href="#å¹¿åº¦ä¼˜å…ˆ" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆ"></a>å¹¿åº¦ä¼˜å…ˆ</h4><p><img src="http://cdn.ohheng.cn/202406121525013.png" alt="image-20230216153607396"></p><table><thead><tr><th>æœ¬è½®å¼€å§‹æ—¶é˜Ÿåˆ—</th><th>æœ¬è½®è®¿é—®èŠ‚ç‚¹</th></tr></thead><tbody><tr><td>[1]</td><td>1</td></tr><tr><td>[2, 3]</td><td>2</td></tr><tr><td>[3, 4]</td><td>3</td></tr><tr><td>[4, 5, 6]</td><td>4</td></tr><tr><td>[5, 6]</td><td>5</td></tr><tr><td>[6, 7, 8]</td><td>6</td></tr><tr><td>[7, 8]</td><td>7</td></tr><tr><td>[8]</td><td>8</td></tr><tr><td>[]</td><td></td></tr></tbody></table><ol><li>åˆå§‹åŒ–ï¼Œå°†æ ¹èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—</li><li>å¾ªç¯å¤„ç†é˜Ÿåˆ—ä¸­æ¯ä¸ªèŠ‚ç‚¹ï¼Œç›´è‡³é˜Ÿåˆ—ä¸ºç©º</li><li>æ¯æ¬¡å¾ªç¯å†…å¤„ç†èŠ‚ç‚¹åï¼Œå°†å®ƒçš„å­©å­èŠ‚ç‚¹ï¼ˆå³ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ï¼‰åŠ å…¥é˜Ÿåˆ—</li></ol><blockquote><p>æ³¨æ„</p><ul><li><p>ä»¥ä¸Šç”¨é˜Ÿåˆ—æ¥å±‚åºéå†æ˜¯é’ˆå¯¹  TreeNode è¿™ç§æ–¹å¼è¡¨ç¤ºçš„äºŒå‰æ ‘</p></li><li><p>å¯¹äºæ•°ç»„è¡¨ç°çš„äºŒå‰æ ‘ï¼Œåˆ™ç›´æ¥éå†æ•°ç»„å³å¯ï¼Œè‡ªç„¶ä¸ºå±‚åºéå†çš„é¡ºåº</p></li></ul></blockquote><h4 id="æ·±åº¦ä¼˜å…ˆ"><a href="#æ·±åº¦ä¼˜å…ˆ" class="headerlink" title="æ·±åº¦ä¼˜å…ˆ"></a>æ·±åº¦ä¼˜å…ˆ</h4><p><img src="http://cdn.ohheng.cn/202406121526597.png" alt="image-20230221110443230"></p><table><thead><tr><th>æ ˆæš‚å­˜</th><th>å·²å¤„ç†</th><th>å‰åºéå†</th><th>ä¸­åºéå†</th></tr></thead><tbody><tr><td>[1]</td><td>1 âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤</td><td>1</td><td></td></tr><tr><td>[1, 2]</td><td>2âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤<br />1âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤</td><td>2</td><td></td></tr><tr><td>[1, 2, 4]</td><td>4âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />2âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤<br />1âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤</td><td>4</td><td>4</td></tr><tr><td>[1, 2]</td><td>2âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />1âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤</td><td></td><td>2</td></tr><tr><td>[1]</td><td>1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td></td><td>1</td></tr><tr><td>[1, 3]</td><td>3âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td>3</td><td></td></tr><tr><td>[1, 3, 5]</td><td>5âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />3âœ”ï¸ å·¦ğŸ’¤ å³ğŸ’¤<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td>5</td><td>5</td></tr><tr><td>[1, 3]</td><td>3âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td></td><td>3</td></tr><tr><td>[1, 3, 6]</td><td>6âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />3âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td>6</td><td>6</td></tr><tr><td>[1, 3]</td><td>3âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸<br />1âœ”ï¸ å·¦âœ”ï¸ å³ğŸ’¤</td><td></td><td></td></tr><tr><td>[1]</td><td>1âœ”ï¸ å·¦âœ”ï¸ å³âœ”ï¸</td><td></td><td></td></tr><tr><td>[]</td><td></td><td></td><td></td></tr></tbody></table><h4 id="é€’å½’å®ç°"><a href="#é€’å½’å®ç°" class="headerlink" title="é€’å½’å®ç°"></a>é€’å½’å®ç°</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * &lt;h3&gt;å‰åºéå†&lt;/h3&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> node èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preOrder</span><span class="hljs-params">(TreeNode node)</span> &#123;<br>    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    System.out.print(node.val + <span class="hljs-string">&quot;\t&quot;</span>); <span class="hljs-comment">// å€¼</span><br>    preOrder(node.left); <span class="hljs-comment">// å·¦</span><br>    preOrder(node.right); <span class="hljs-comment">// å³</span><br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * &lt;h3&gt;ä¸­åºéå†&lt;/h3&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> node èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">inOrder</span><span class="hljs-params">(TreeNode node)</span> &#123;<br>    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    inOrder(node.left); <span class="hljs-comment">// å·¦</span><br>    System.out.print(node.val + <span class="hljs-string">&quot;\t&quot;</span>); <span class="hljs-comment">// å€¼</span><br>    inOrder(node.right); <span class="hljs-comment">// å³</span><br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * &lt;h3&gt;ååºéå†&lt;/h3&gt;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> node èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postOrder</span><span class="hljs-params">(TreeNode node)</span> &#123;<br>    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    postOrder(node.left); <span class="hljs-comment">// å·¦</span><br>    postOrder(node.right); <span class="hljs-comment">// å³</span><br>    System.out.print(node.val + <span class="hljs-string">&quot;\t&quot;</span>); <span class="hljs-comment">// å€¼</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="éé€’å½’å®ç°"><a href="#éé€’å½’å®ç°" class="headerlink" title="éé€’å½’å®ç°"></a>éé€’å½’å®ç°</h4><p><strong>å‰åºéå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java">LinkedListStack&lt;TreeNode&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedListStack</span>&lt;&gt;();<br><span class="hljs-type">TreeNode</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> root;<br><br><span class="hljs-keyword">while</span> (!stack.isEmpty() || curr != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">if</span> (curr != <span class="hljs-literal">null</span>) &#123;<br>        stack.push(curr);<br>        System.out.println(curr);<br>        curr = curr.left;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-type">TreeNode</span> <span class="hljs-variable">pop</span> <span class="hljs-operator">=</span> stack.pop();<br>        curr = pop.right;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¸­åºéå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">LinkedListStack&lt;TreeNode&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedListStack</span>&lt;&gt;();<br><span class="hljs-type">TreeNode</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> root;<br><br><span class="hljs-keyword">while</span> (!stack.isEmpty() || curr != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">if</span> (curr != <span class="hljs-literal">null</span>) &#123;<br>        stack.push(curr);<br>        curr = curr.left;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-type">TreeNode</span> <span class="hljs-variable">pop</span> <span class="hljs-operator">=</span> stack.pop();<br>        System.out.println(pop);<br>        curr = pop.right;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ååºéå†</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java">LinkedListStack&lt;TreeNode&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedListStack</span>&lt;&gt;();<br><span class="hljs-type">TreeNode</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> root;<br><span class="hljs-type">TreeNode</span> <span class="hljs-variable">pop</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br><span class="hljs-keyword">while</span> (!stack.isEmpty() || curr != <span class="hljs-literal">null</span>) &#123;<br>    <span class="hljs-keyword">if</span> (curr != <span class="hljs-literal">null</span>) &#123;<br>        stack.push(curr);<br>        curr = curr.left;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-type">TreeNode</span> <span class="hljs-variable">peek</span> <span class="hljs-operator">=</span> stack.peek();<br>        <span class="hljs-keyword">if</span> (peek.right == <span class="hljs-literal">null</span> || peek.right == pop) &#123;<br>            pop = stack.pop();<br>            System.out.println(pop);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            curr = peek.right;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯¹äºååºéå†ï¼Œå‘å›èµ°æ—¶ï¼Œéœ€è¦å¤„ç†å®Œå³å­æ ‘æ‰èƒ½ pop å‡ºæ ˆã€‚å¦‚ä½•çŸ¥é“å³å­æ ‘å¤„ç†å®Œæˆå‘¢ï¼Ÿ</p><ul><li><p>å¦‚æœæ ˆé¡¶å…ƒç´ çš„ $right \equiv null$ è¡¨ç¤ºæ²¡å•¥å¯å¤„ç†çš„ï¼Œå¯ä»¥å‡ºæ ˆ</p></li><li><p>å¦‚æœæ ˆé¡¶å…ƒç´ çš„ $right \neq null$ï¼Œ</p><ul><li>é‚£ä¹ˆä½¿ç”¨ lastPop è®°å½•æœ€è¿‘å‡ºæ ˆçš„èŠ‚ç‚¹ï¼Œå³è¡¨ç¤ºä»è¿™ä¸ªèŠ‚ç‚¹å‘å›èµ°</li><li>å¦‚æœæ ˆé¡¶å…ƒç´ çš„ $right&#x3D;&#x3D;lastPop$ æ­¤æ—¶åº”å½“å‡ºæ ˆ</li></ul></li></ul><p>å¯¹äºå‰ã€ä¸­ä¸¤ç§éå†ï¼Œå®é™…ä»¥ä¸Šä»£ç ä»å³å­æ ‘å‘å›èµ°æ—¶ï¼Œå¹¶æœªèµ°å®Œå…¨ç¨‹ï¼ˆstack æå‰å‡ºæ ˆäº†ï¼‰ååºéå†ä»¥ä¸Šä»£ç æ˜¯èµ°å®Œå…¨ç¨‹äº†</p><p><strong>ç»Ÿä¸€å†™æ³•</strong></p><p>ä¸‹é¢æ˜¯ä¸€ç§ç»Ÿä¸€çš„å†™æ³•ï¼Œä¾æ®ååºéå†ä¿®æ”¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java">LinkedList&lt;TreeNode&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br><br><span class="hljs-type">TreeNode</span> <span class="hljs-variable">curr</span> <span class="hljs-operator">=</span> root; <span class="hljs-comment">// ä»£è¡¨å½“å‰èŠ‚ç‚¹</span><br><span class="hljs-type">TreeNode</span> <span class="hljs-variable">pop</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// æœ€è¿‘ä¸€æ¬¡å¼¹æ ˆçš„å…ƒç´ </span><br><span class="hljs-keyword">while</span> (curr != <span class="hljs-literal">null</span> || !stack.isEmpty()) &#123;<br>    <span class="hljs-keyword">if</span> (curr != <span class="hljs-literal">null</span>) &#123;<br>        colorPrintln(<span class="hljs-string">&quot;å‰: &quot;</span> + curr.val, <span class="hljs-number">31</span>);<br>        stack.push(curr); <span class="hljs-comment">// å‹å…¥æ ˆï¼Œä¸ºäº†è®°ä½å›æ¥çš„è·¯</span><br>        curr = curr.left;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-type">TreeNode</span> <span class="hljs-variable">peek</span> <span class="hljs-operator">=</span> stack.peek();<br>        <span class="hljs-comment">// å³å­æ ‘å¯ä»¥ä¸å¤„ç†, å¯¹ä¸­åºæ¥è¯´, è¦åœ¨å³å­æ ‘å¤„ç†ä¹‹å‰æ‰“å°</span><br>        <span class="hljs-keyword">if</span> (peek.right == <span class="hljs-literal">null</span>) &#123;<br>            colorPrintln(<span class="hljs-string">&quot;ä¸­: &quot;</span> + peek.val, <span class="hljs-number">36</span>);<br>            pop = stack.pop();<br>            colorPrintln(<span class="hljs-string">&quot;å: &quot;</span> + pop.val, <span class="hljs-number">34</span>);<br>        &#125;<br>        <span class="hljs-comment">// å³å­æ ‘å¤„ç†å®Œæˆ, å¯¹ä¸­åºæ¥è¯´, æ— éœ€æ‰“å°</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (peek.right == pop) &#123;<br>            pop = stack.pop();<br>            colorPrintln(<span class="hljs-string">&quot;å: &quot;</span> + pop.val, <span class="hljs-number">34</span>);<br>        &#125;<br>        <span class="hljs-comment">// å³å­æ ‘å¾…å¤„ç†, å¯¹ä¸­åºæ¥è¯´, è¦åœ¨å³å­æ ‘å¤„ç†ä¹‹å‰æ‰“å°</span><br>        <span class="hljs-keyword">else</span> &#123;<br>            colorPrintln(<span class="hljs-string">&quot;ä¸­: &quot;</span> + peek.val, <span class="hljs-number">36</span>);<br>            curr = peek.right;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">colorPrintln</span><span class="hljs-params">(String origin, <span class="hljs-type">int</span> color)</span> &#123;<br>    System.out.printf(<span class="hljs-string">&quot;\033[%dm%s\033[0m%n&quot;</span>, color, origin);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸€å¼ å›¾æ¼”ç¤ºä¸‰ç§éå†</p><p><img src="http://cdn.ohheng.cn/202406121526377.png" alt="Sorted_binary_tree_ALL_RGB.svg"></p><ul><li>çº¢è‰²ï¼šå‰åºéå†é¡ºåº</li><li>ç»¿è‰²ï¼šä¸­åºéå†é¡ºåº</li><li>è“è‰²ï¼šåç»­éå†é¡ºåº</li></ul>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ•°æ®ç»“æ„</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åˆè¯†ç®—æ³•</title>
    <link href="/2024/06/12/(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95)%E5%88%9D%E8%AF%86%E7%AE%97%E6%B3%95/"/>
    <url>/2024/06/12/(%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95)%E5%88%9D%E8%AF%86%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€-åˆè¯†ç®—æ³•"><a href="#ä¸€-åˆè¯†ç®—æ³•" class="headerlink" title="ä¸€.åˆè¯†ç®—æ³•"></a>ä¸€.åˆè¯†ç®—æ³•</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯ç®—æ³•ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯ç®—æ³•ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯ç®—æ³•ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯ç®—æ³•ï¼Ÿ</h2><p><strong>å®šä¹‰</strong></p><p>åœ¨æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œç®—æ³•æ˜¯ä¸€ç³»åˆ—æœ‰é™çš„ä¸¥è°¨æŒ‡ä»¤ï¼Œé€šå¸¸ç”¨äºè§£å†³ä¸€ç±»ç‰¹å®šé—®é¢˜æˆ–æ‰§è¡Œè®¡ç®—</p><blockquote><p>In mathematics and computer science, an <strong>algorithm</strong> (&#x2F;ËˆÃ¦lÉ¡É™rÉªÃ°É™m&#x2F;) is a finite sequence of rigorous instructions, typically used to solve a class of specific problems or to perform a computation.[^1]</p></blockquote><p><strong>Introduction to Algorithm[^2]</strong></p><p>ä¸æ­£å¼çš„è¯´ï¼Œç®—æ³•å°±æ˜¯ä»»ä½•å®šä¹‰ä¼˜è‰¯çš„è®¡ç®—è¿‡ç¨‹ï¼šæ¥æ”¶ä¸€äº›å€¼ä½œä¸ºè¾“å…¥ï¼Œåœ¨æœ‰é™çš„æ—¶é—´å†…ï¼Œäº§ç”Ÿä¸€äº›å€¼ä½œä¸ºè¾“å‡ºã€‚</p><blockquote><p>Informally, an algorithm is any well-defined computational procedure that takes some value, or set of values, as input and produces some value, or set of values, as output in a finite amount of time.</p></blockquote><h2 id="1-2-ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„ï¼Ÿ"><a href="#1-2-ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„ï¼Ÿ" class="headerlink" title="1.2 ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„ï¼Ÿ"></a>1.2 ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„ï¼Ÿ</h2><p><strong>å®šä¹‰</strong></p><p>åœ¨è®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œæ•°æ®ç»“æ„æ˜¯ä¸€ç§æ•°æ®ç»„ç»‡ã€ç®¡ç†å’Œå­˜å‚¨æ ¼å¼ï¼Œé€šå¸¸è¢«é€‰æ‹©ç”¨æ¥é«˜æ•ˆè®¿é—®æ•°æ®</p><blockquote><p>In computer science, a <strong>data structure</strong> is a data organization, management, and storage format that is usually chosen for efficient access to data</p></blockquote><p><strong>Introduction to Algorithm[^2]</strong></p><p>æ•°æ®ç»“æ„æ˜¯ä¸€ç§å­˜å‚¨å’Œç»„ç»‡æ•°æ®çš„æ–¹å¼ï¼Œæ—¨åœ¨ä¾¿äºè®¿é—®å’Œä¿®æ”¹</p><blockquote><p>A data structure is a way to store and organize data in order to facilitate access and modifications</p></blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡å¯¹ä¸€ä¸ªéå¸¸è‘—åçš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„è®²è§£æ¥è®¤è¯†ä¸€ä¸‹ç®—æ³•</p><h2 id="1-3-äºŒåˆ†æŸ¥æ‰¾-3"><a href="#1-3-äºŒåˆ†æŸ¥æ‰¾-3" class="headerlink" title="1.3 äºŒåˆ†æŸ¥æ‰¾ [^3]"></a>1.3 äºŒåˆ†æŸ¥æ‰¾ [^3]</h2><p>äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ä¹Ÿç§°æŠ˜åŠæŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§éå¸¸é«˜æ•ˆçš„å·¥ä½œäºæœ‰åºæ•°ç»„çš„æŸ¥æ‰¾ç®—æ³•ã€‚åç»­çš„è¯¾ç¨‹ä¸­è¿˜ä¼šå­¦ä¹ æ›´å¤šçš„æŸ¥æ‰¾ç®—æ³•ï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œä¸å¦¨ç”¨å®ƒä½œä¸ºå…¥é—¨ã€‚</p><h3 id="äºŒåˆ†æŸ¥æ‰¾åŸºç¡€ç‰ˆ"><a href="#äºŒåˆ†æŸ¥æ‰¾åŸºç¡€ç‰ˆ" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾åŸºç¡€ç‰ˆ"></a>äºŒåˆ†æŸ¥æ‰¾åŸºç¡€ç‰ˆ</h3><p>éœ€æ±‚ï¼šåœ¨<strong>æœ‰åº</strong>æ•°ç»„ $A$ å†…ï¼ŒæŸ¥æ‰¾å€¼ $target$</p><ul><li>å¦‚æœæ‰¾åˆ°è¿”å›ç´¢å¼•</li><li>å¦‚æœæ‰¾ä¸åˆ°è¿”å› $-1$</li></ul><table><thead><tr><th>ç®—æ³•æè¿°</th><th></th></tr></thead><tbody><tr><td>å‰æ</td><td>ç»™å®šä¸€ä¸ªå†…å« $n$ ä¸ªå…ƒç´ çš„æœ‰åºæ•°ç»„ $A$ï¼Œæ»¡è¶³ $A_{0}\leq A_{1}\leq A_{2}\leq \cdots \leq A_{n-1}$ï¼Œä¸€ä¸ªå¾…æŸ¥å€¼ $target$</td></tr><tr><td>1</td><td>è®¾ç½® $i&#x3D;0$ï¼Œ$j&#x3D;n-1$</td></tr><tr><td>2</td><td>å¦‚æœ $i \gt j$ï¼Œç»“æŸæŸ¥æ‰¾ï¼Œæ²¡æ‰¾åˆ°</td></tr><tr><td>3</td><td>è®¾ç½® $m &#x3D; floor(\frac {i+j}{2})$ ï¼Œ$m$ ä¸ºä¸­é—´ç´¢å¼•ï¼Œ$floor$ æ˜¯å‘ä¸‹å–æ•´ï¼ˆ$\leq \frac {i+j}{2}$ çš„æœ€å°æ•´æ•°ï¼‰</td></tr><tr><td>4</td><td>å¦‚æœ $target &lt; A_{m}$ è®¾ç½® $j &#x3D; m - 1$ï¼Œè·³åˆ°ç¬¬2æ­¥</td></tr><tr><td>5</td><td>å¦‚æœ $A_{m} &lt; target$ è®¾ç½® $i &#x3D; m + 1$ï¼Œè·³åˆ°ç¬¬2æ­¥</td></tr><tr><td>6</td><td>å¦‚æœ $A_{m} &#x3D; target$ï¼Œç»“æŸæŸ¥æ‰¾ï¼Œæ‰¾åˆ°äº†</td></tr></tbody></table><p>java å®ç°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearch</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<span class="hljs-comment">// åœ¨å·¦è¾¹</span><br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123;<span class="hljs-comment">// åœ¨å³è¾¹</span><br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> m;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>$i,j$ å¯¹åº”ç€æœç´¢åŒºé—´ $[0,a.length-1]$ï¼ˆæ³¨æ„æ˜¯é—­åˆçš„åŒºé—´ï¼‰ï¼Œ$i&lt;&#x3D;j$ æ„å‘³ç€æœç´¢åŒºé—´å†…è¿˜æœ‰æœªæ¯”è¾ƒçš„å…ƒç´ ï¼Œ$i,j$ æŒ‡å‘çš„å…ƒç´ ä¹Ÿå¯èƒ½æ˜¯æ¯”è¾ƒçš„ç›®æ ‡<ul><li>æ€è€ƒï¼šå¦‚æœä¸åŠ  $i&#x3D;&#x3D;j$ è¡Œä¸è¡Œï¼Ÿ</li><li>å›ç­”ï¼šä¸è¡Œï¼Œå› ä¸ºè¿™æ„å‘³ç€ $i,j$ æŒ‡å‘çš„å…ƒç´ ä¼šæ¼è¿‡æ¯”è¾ƒ</li></ul></li><li>$m$ å¯¹åº”ç€ä¸­é—´ä½ç½®ï¼Œä¸­é—´ä½ç½®å·¦è¾¹å’Œå³è¾¹çš„å…ƒç´ å¯èƒ½ä¸ç›¸ç­‰ï¼ˆå·®ä¸€ä¸ªï¼‰ï¼Œä¸ä¼šå½±å“ç»“æœ</li><li>å¦‚æœæŸæ¬¡æœªæ‰¾åˆ°ï¼Œé‚£ä¹ˆç¼©å°åçš„åŒºé—´å†…ä¸åŒ…å« $m$</li></ul><h3 id="äºŒåˆ†æŸ¥æ‰¾æ”¹å˜ç‰ˆ"><a href="#äºŒåˆ†æŸ¥æ‰¾æ”¹å˜ç‰ˆ" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾æ”¹å˜ç‰ˆ"></a>äºŒåˆ†æŸ¥æ‰¾æ”¹å˜ç‰ˆ</h3><p>å¦ä¸€ç§å†™æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearch</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length;<br>    <span class="hljs-keyword">while</span> (i &lt; j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<span class="hljs-comment">// åœ¨å·¦è¾¹</span><br>            j = m;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123;<span class="hljs-comment">// åœ¨å³è¾¹</span><br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> m;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>$i,j$ å¯¹åº”ç€æœç´¢åŒºé—´ $[0,a.length)$ï¼ˆæ³¨æ„æ˜¯å·¦é—­å³å¼€çš„åŒºé—´ï¼‰ï¼Œ$i&lt;j$ æ„å‘³ç€æœç´¢åŒºé—´å†…è¿˜æœ‰æœªæ¯”è¾ƒçš„å…ƒç´ ï¼Œ$j$ æŒ‡å‘çš„<strong>ä¸€å®šä¸æ˜¯</strong>æŸ¥æ‰¾ç›®æ ‡<ul><li>æ€è€ƒï¼šä¸ºå•¥è¿™æ¬¡ä¸åŠ  $i&#x3D;&#x3D;j$ çš„æ¡ä»¶äº†ï¼Ÿ</li><li>å›ç­”ï¼šè¿™å› $j$ æŒ‡å‘çš„ä¸æ˜¯æŸ¥æ‰¾ç›®æ ‡ï¼Œå¦‚æœè¿˜åŠ  $i&#x3D;&#x3D;j$ æ¡ä»¶ï¼Œå°±æ„å‘³ç€ $j$ æŒ‡å‘çš„è¿˜ä¼šå†æ¬¡æ¯”è¾ƒï¼Œæ‰¾ä¸åˆ°æ—¶ï¼Œä¼šæ­»å¾ªç¯</li></ul></li><li>å¦‚æœæŸæ¬¡è¦ç¼©å°å³è¾¹ç•Œï¼Œé‚£ä¹ˆ $j&#x3D;m$ï¼Œå› ä¸ºæ­¤æ—¶çš„ $m$ å·²ç»<strong>ä¸æ˜¯</strong>æŸ¥æ‰¾ç›®æ ‡äº†</li></ul><h3 id="è¡¡é‡ç®—æ³•å¥½å"><a href="#è¡¡é‡ç®—æ³•å¥½å" class="headerlink" title="è¡¡é‡ç®—æ³•å¥½å"></a>è¡¡é‡ç®—æ³•å¥½å</h3><p><strong>æ—¶é—´å¤æ‚åº¦</strong></p><p>ä¸‹é¢çš„æŸ¥æ‰¾ç®—æ³•ä¹Ÿèƒ½å¾—å‡ºä¸ä¹‹å‰äºŒåˆ†æŸ¥æ‰¾ä¸€æ ·çš„ç»“æœï¼Œé‚£ä½ èƒ½è¯´å‡ºå®ƒå·®åœ¨å“ªé‡Œå—ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">search</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> k)</span> &#123;<br>    <span class="hljs-keyword">for</span> (<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        i &lt; a.length;<br>        i++<br>    ) &#123;<br>        <span class="hljs-keyword">if</span> (a[i] == k) &#123;<br>            <span class="hljs-keyword">return</span> i;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>è€ƒè™‘æœ€åæƒ…å†µä¸‹ï¼ˆæ²¡æ‰¾åˆ°ï¼‰ä¾‹å¦‚ <code>[1,2,3,4]</code> æŸ¥æ‰¾ 5</p><ul><li><code>int i = 0</code> åªæ‰§è¡Œä¸€æ¬¡</li><li><code>i &lt; a.length</code> å—æ•°ç»„å…ƒç´ ä¸ªæ•° $n$ çš„å½±å“ï¼Œæ¯”è¾ƒ $n+1$ æ¬¡</li><li><code>i++</code> å—æ•°ç»„å…ƒç´ ä¸ªæ•° $n$ çš„å½±å“ï¼Œè‡ªå¢ $n$ æ¬¡</li><li><code>a[i] == k</code> å—å…ƒç´ ä¸ªæ•° $n$ çš„å½±å“ï¼Œæ¯”è¾ƒ $n$ æ¬¡</li><li><code>return -1</code>ï¼Œæ‰§è¡Œä¸€æ¬¡</li></ul><p>ç²—ç•¥è®¤ä¸ºæ¯è¡Œä»£ç æ‰§è¡Œæ—¶é—´æ˜¯ $t$ï¼Œå‡è®¾ $n&#x3D;4$ é‚£ä¹ˆ</p><ul><li>æ€»æ‰§è¡Œæ—¶é—´æ˜¯ $(1+4+1+4+4+1)*t &#x3D; 15t$</li><li>å¯ä»¥æ¨å¯¼å‡ºæ›´ä¸€èˆ¬åœ°å…¬å¼ä¸ºï¼Œ$T &#x3D; (3*n+3)t$</li></ul><p>å¦‚æœå¥—ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œè¿˜æ˜¯ <code>[1,2,3,4]</code> æŸ¥æ‰¾ 5</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearch</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<span class="hljs-comment">// åœ¨å·¦è¾¹</span><br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123;<span class="hljs-comment">// åœ¨å³è¾¹</span><br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> m;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p><code>int i = 0, j = a.length - 1</code> å„æ‰§è¡Œ 1 æ¬¡</p></li><li><p><code>i &lt;= j</code> æ¯”è¾ƒ $floor(\log_{2}(n)+1)$ å†åŠ  1 æ¬¡</p></li><li><p><code>(i + j) &gt;&gt;&gt; 1</code> è®¡ç®— $floor(\log_{2}(n)+1)$ æ¬¡</p></li><li><p>æ¥ä¸‹æ¥ <code>if() else if() else</code> ä¼šæ‰§è¡Œ $3* floor(\log_{2}(n)+1)$ æ¬¡ï¼Œåˆ†åˆ«ä¸º</p><ul><li>if æ¯”è¾ƒ</li><li>else if æ¯”è¾ƒ</li><li>else if æ¯”è¾ƒæˆç«‹åçš„èµ‹å€¼è¯­å¥</li></ul></li><li><p><code>return -1</code>ï¼Œæ‰§è¡Œä¸€æ¬¡</p></li></ul><p>ç»“æœï¼š</p><ul><li>æ€»æ‰§è¡Œæ—¶é—´ä¸º $(2 + (1+3) + 3 + 3 * 3 +1)*t &#x3D; 19t$</li><li>æ›´ä¸€èˆ¬åœ°å…¬å¼ä¸º $(4 + 5 * floor(\log_{2}(n)+1))*t$</li></ul><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p>å·¦ä¾§æœªæ‰¾åˆ°å’Œå³ä¾§æœªæ‰¾åˆ°ç»“æœä¸ä¸€æ ·ï¼Œè¿™é‡Œä¸åšåˆ†æ</p></blockquote><p>ä¸¤ä¸ªç®—æ³•æ¯”è¾ƒï¼Œå¯ä»¥çœ‹åˆ° $n$ åœ¨è¾ƒå°çš„æ—¶å€™ï¼ŒäºŒè€…èŠ±è´¹çš„æ¬¡æ•°å·®ä¸å¤š</p><img src="http://cdn.ohheng.cn/202406120943187.png" alt="image-20221108095747933" style="zoom:50%;" /><p>ä½†éšç€ $n$ è¶Šæ¥è¶Šå¤§ï¼Œæ¯”å¦‚è¯´ $n&#x3D;1000$ æ—¶ï¼Œç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼ˆçº¢è‰²ï¼‰ä¹Ÿå°±æ˜¯ $54t$ï¼Œè€Œè“è‰²ç®—æ³•åˆ™éœ€è¦ $3003t$</p><img src="http://cdn.ohheng.cn/202406120943640.png" alt="image-20221108100014451" style="zoom:50%;" /><blockquote><p>ç”»å›¾é‡‡ç”¨çš„æ˜¯ <a href="https://www.desmos.com/calculator?lang=zh-CN">Desmos | å›¾å½¢è®¡ç®—å™¨</a></p></blockquote><p>è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œ<strong>æ—¶é—´å¤æ‚åº¦</strong>æ˜¯ç”¨æ¥è¡¡é‡ï¼šä¸€ä¸ªç®—æ³•çš„æ‰§è¡Œï¼Œéšæ•°æ®è§„æ¨¡å¢å¤§ï¼Œè€Œå¢é•¿çš„æ—¶é—´æˆæœ¬</p><ul><li>ä¸ä¾èµ–äºç¯å¢ƒå› ç´ </li></ul><p>å¦‚ä½•è¡¨ç¤ºæ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿ</p><ul><li><p>å‡è®¾ç®—æ³•è¦å¤„ç†çš„æ•°æ®è§„æ¨¡æ˜¯ $n$ï¼Œä»£ç æ€»çš„æ‰§è¡Œè¡Œæ•°ç”¨å‡½æ•° $f(n)$ æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š</p><ul><li>çº¿æ€§æŸ¥æ‰¾ç®—æ³•çš„å‡½æ•° $f(n) &#x3D; 3*n + 3$</li><li>äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„å‡½æ•° $f(n) &#x3D; (floor(log_2(n)) + 1) * 5 + 4$</li></ul></li><li><p>ä¸ºäº†å¯¹ $f(n)$ è¿›è¡ŒåŒ–ç®€ï¼Œåº”å½“æŠ“ä½ä¸»è¦çŸ›ç›¾ï¼Œæ‰¾åˆ°ä¸€ä¸ªå˜åŒ–è¶‹åŠ¿ä¸ä¹‹ç›¸è¿‘çš„è¡¨ç¤ºæ³•</p></li></ul><p><strong>å¤§ $O$ è¡¨ç¤ºæ³•[^4]</strong></p><img src="http://cdn.ohheng.cn/202406120943939.png"/><p>å…¶ä¸­</p><ul><li>$c, c_1, c_2$ éƒ½ä¸ºä¸€ä¸ªå¸¸æ•°</li><li>$f(n)$ æ˜¯å®é™…æ‰§è¡Œä»£ç è¡Œæ•°ä¸ n çš„å‡½æ•°</li><li>$g(n)$ æ˜¯ç»è¿‡åŒ–ç®€ï¼Œå˜åŒ–è¶‹åŠ¿ä¸ $f(n)$ ä¸€è‡´çš„ n çš„å‡½æ•°</li></ul><p><strong>æ¸è¿›ä¸Šç•Œ</strong></p><p>æ¸è¿›ä¸Šç•Œï¼ˆasymptotic upper boundï¼‰ï¼šä»æŸä¸ªå¸¸æ•° $n_0$å¼€å§‹ï¼Œ$c*g(n)$ æ€»æ˜¯ä½äº $f(n)$ ä¸Šæ–¹ï¼Œé‚£ä¹ˆè®°ä½œ $O(g(n))$</p><ul><li>ä»£è¡¨ç®—æ³•æ‰§è¡Œçš„æœ€å·®æƒ…å†µ</li></ul><p>ä¾‹1</p><ul><li>$f(n) &#x3D; 3*n+3$ </li><li>$g(n) &#x3D; n$</li><li>å– $c&#x3D;4$ï¼Œåœ¨$n_0&#x3D;3$ ä¹‹åï¼Œ$g(n)$ å¯ä»¥ä½œä¸º $f(n)$ çš„æ¸è¿›ä¸Šç•Œï¼Œå› æ­¤è¡¨ç¤ºæ³•å†™ä½œ $O(n)$</li></ul><p>ä¾‹2</p><ul><li>$f(n) &#x3D; 5*floor(log_2(n)) + 9$</li><li>$g(n) &#x3D; log_2(n)$</li><li>$O(log_2(n))$</li></ul><p>å·²çŸ¥ $f(n)$ æ¥è¯´ï¼Œæ±‚ $g(n)$</p><ul><li>è¡¨è¾¾å¼ä¸­ç›¸ä¹˜çš„å¸¸é‡ï¼Œå¯ä»¥çœç•¥ï¼Œå¦‚<ul><li>$f(n) &#x3D; 100*n^2$ ä¸­çš„ $100$</li></ul></li><li>å¤šé¡¹å¼ä¸­æ•°é‡è§„æ¨¡æ›´å°ï¼ˆä½æ¬¡é¡¹ï¼‰çš„è¡¨è¾¾å¼ï¼Œå¦‚<ul><li>$f(n)&#x3D;n^2+n$ ä¸­çš„ $n$</li><li>$f(n) &#x3D; n^3 + n^2$ ä¸­çš„ $n^2$</li></ul></li><li>ä¸åŒåº•æ•°çš„å¯¹æ•°ï¼Œæ¸è¿›ä¸Šç•Œå¯ä»¥ç”¨ä¸€ä¸ªå¯¹æ•°å‡½æ•° $\log n$ è¡¨ç¤º<ul><li>ä¾‹å¦‚ï¼š$log_2(n)$ å¯ä»¥æ›¿æ¢ä¸º $log_{10}(n)$ï¼Œå› ä¸º $log_2(n) &#x3D; \frac{log_{10}(n)}{log_{10}(2)}$ï¼Œç›¸ä¹˜çš„å¸¸é‡ $\frac{1}{log_{10}(2)}$ å¯ä»¥çœç•¥</li></ul></li><li>ç±»ä¼¼çš„ï¼Œå¯¹æ•°çš„å¸¸æ•°æ¬¡å¹‚å¯çœç•¥<ul><li>å¦‚ï¼š$log(n^c) &#x3D; c * log(n)$</li></ul></li></ul><p><strong>å¸¸è§å¤§ $O$ è¡¨ç¤ºæ³•</strong></p><img src="http://cdn.ohheng.cn/202406120943799.png"/><p> æŒ‰æ—¶é—´å¤æ‚åº¦ä»ä½åˆ°é«˜</p><ul><li>é»‘è‰²æ¨ªçº¿ $O(1)$ï¼Œå¸¸é‡æ—¶é—´ï¼Œæ„å‘³ç€ç®—æ³•æ—¶é—´å¹¶ä¸éšæ•°æ®è§„æ¨¡è€Œå˜åŒ–</li><li>ç»¿è‰² $O(log(n))$ï¼Œå¯¹æ•°æ—¶é—´</li><li>è“è‰² $O(n)$ï¼Œçº¿æ€§æ—¶é—´ï¼Œç®—æ³•æ—¶é—´ä¸æ•°æ®è§„æ¨¡æˆæ­£æ¯”</li><li>æ©™è‰² $O(n*log(n))$ï¼Œæ‹Ÿçº¿æ€§æ—¶é—´</li><li>çº¢è‰² $O(n^2)$ å¹³æ–¹æ—¶é—´</li><li>é»‘è‰²æœä¸Š $O(2^n)$ æŒ‡æ•°æ—¶é—´</li><li>æ²¡ç”»å‡ºæ¥çš„ $O(n!)$</li></ul><p><strong>æ¸è¿›ä¸‹ç•Œ</strong></p><p>æ¸è¿›ä¸‹ç•Œï¼ˆasymptotic lower boundï¼‰ï¼šä»æŸä¸ªå¸¸æ•° $n_0$å¼€å§‹ï¼Œ$c*g(n)$ æ€»æ˜¯ä½äº $f(n)$ ä¸‹æ–¹ï¼Œé‚£ä¹ˆè®°ä½œ $\Omega(g(n))$</p><p><strong>æ¸è¿›ç´§ç•Œ</strong></p><p>æ¸è¿›ç´§ç•Œï¼ˆasymptotic tight boundsï¼‰ï¼šä»æŸä¸ªå¸¸æ•° $n_0$å¼€å§‹ï¼Œ$f(n)$ æ€»æ˜¯åœ¨ $c_1<em>g(n)$ å’Œ $c_2</em>g(n)$ ä¹‹é—´ï¼Œé‚£ä¹ˆè®°ä½œ $\Theta(g(n))$</p><p><strong>ç©ºé—´å¤æ‚åº¦</strong></p><p>ä¸æ—¶é—´å¤æ‚åº¦ç±»ä¼¼ï¼Œä¸€èˆ¬ä¹Ÿä½¿ç”¨å¤§ $O$ è¡¨ç¤ºæ³•æ¥è¡¡é‡ï¼šä¸€ä¸ªç®—æ³•æ‰§è¡Œéšæ•°æ®è§„æ¨¡å¢å¤§ï¼Œè€Œå¢é•¿çš„<strong>é¢å¤–</strong>ç©ºé—´æˆæœ¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearchBasic</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;    <span class="hljs-comment">// è®¾ç½®æŒ‡é’ˆå’Œåˆå€¼</span><br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;                <span class="hljs-comment">// i~j èŒƒå›´å†…æœ‰ä¸œè¥¿</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span>(target &lt; a[m]) &#123;         <span class="hljs-comment">// ç›®æ ‡åœ¨å·¦è¾¹</span><br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123; <span class="hljs-comment">// ç›®æ ‡åœ¨å³è¾¹</span><br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;                    <span class="hljs-comment">// æ‰¾åˆ°äº†</span><br>            <span class="hljs-keyword">return</span> m;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>äºŒåˆ†æŸ¥æ‰¾æ€§èƒ½</strong></p><p>ä¸‹é¢åˆ†æäºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„æ€§èƒ½</p><p>æ—¶é—´å¤æ‚åº¦</p><ul><li>æœ€åæƒ…å†µï¼š$O(\log n)$</li><li>æœ€å¥½æƒ…å†µï¼šå¦‚æœå¾…æŸ¥æ‰¾å…ƒç´ æ°å¥½åœ¨æ•°ç»„ä¸­å¤®ï¼Œåªéœ€è¦å¾ªç¯ä¸€æ¬¡ $O(1)$</li></ul><p>ç©ºé—´å¤æ‚åº¦</p><ul><li>éœ€è¦å¸¸æ•°ä¸ªæŒ‡é’ˆ $i,j,m$ï¼Œå› æ­¤é¢å¤–å ç”¨çš„ç©ºé—´æ˜¯ $O(1)$</li></ul><h3 id="äºŒåˆ†æŸ¥æ‰¾å¹³è¡¡ç‰ˆ"><a href="#äºŒåˆ†æŸ¥æ‰¾å¹³è¡¡ç‰ˆ" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾å¹³è¡¡ç‰ˆ"></a>äºŒåˆ†æŸ¥æ‰¾å¹³è¡¡ç‰ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearchBalance</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span> &lt; j - i) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<br>            j = m;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            i = m;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> (a[i] == target) ? i : -<span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ€æƒ³ï¼š</p><ol><li>å·¦é—­å³å¼€çš„åŒºé—´ï¼Œ$i$ æŒ‡å‘çš„å¯èƒ½æ˜¯ç›®æ ‡ï¼Œè€Œ $j$ æŒ‡å‘çš„ä¸æ˜¯ç›®æ ‡</li><li>ä¸å¥¢æœ›å¾ªç¯å†…é€šè¿‡ $m$ æ‰¾å‡ºç›®æ ‡, ç¼©å°åŒºé—´ç›´è‡³å‰© 1 ä¸ª, å‰©ä¸‹çš„è¿™ä¸ªå¯èƒ½å°±æ˜¯è¦æ‰¾çš„ï¼ˆé€šè¿‡ $i$ï¼‰<ul><li>$j - i &gt; 1$ çš„å«ä¹‰æ˜¯ï¼Œåœ¨èŒƒå›´å†…å¾…æ¯”è¾ƒçš„å…ƒç´ ä¸ªæ•° &gt; 1</li></ul></li><li>æ”¹å˜ $i$ è¾¹ç•Œæ—¶ï¼Œå®ƒæŒ‡å‘çš„å¯èƒ½æ˜¯ç›®æ ‡ï¼Œå› æ­¤ä¸èƒ½ $m+1$</li><li>å¾ªç¯å†…çš„å¹³å‡æ¯”è¾ƒæ¬¡æ•°å‡å°‘äº†</li><li>æ—¶é—´å¤æ‚åº¦ $\Theta(log(n))$</li></ol><h3 id="äºŒåˆ†æŸ¥æ‰¾-Java-ç‰ˆ"><a href="#äºŒåˆ†æŸ¥æ‰¾-Java-ç‰ˆ" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾ Java ç‰ˆ"></a>äºŒåˆ†æŸ¥æ‰¾ Java ç‰ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearch0</span><span class="hljs-params">(<span class="hljs-type">long</span>[] a, <span class="hljs-type">int</span> fromIndex, <span class="hljs-type">int</span> toIndex,</span><br><span class="hljs-params">                                     <span class="hljs-type">long</span> key)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">low</span> <span class="hljs-operator">=</span> fromIndex;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">high</span> <span class="hljs-operator">=</span> toIndex - <span class="hljs-number">1</span>;<br><br>    <span class="hljs-keyword">while</span> (low &lt;= high) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> (low + high) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-type">long</span> <span class="hljs-variable">midVal</span> <span class="hljs-operator">=</span> a[mid];<br><br>        <span class="hljs-keyword">if</span> (midVal &lt; key)<br>            low = mid + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (midVal &gt; key)<br>            high = mid - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">return</span> mid; <span class="hljs-comment">// key found</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> -(low + <span class="hljs-number">1</span>);  <span class="hljs-comment">// key not found.</span><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ä¾‹å¦‚ $[1,3,5,6]$ è¦æ’å…¥ $2$ é‚£ä¹ˆå°±æ˜¯æ‰¾åˆ°ä¸€ä¸ªä½ç½®ï¼Œè¿™ä¸ªä½ç½®å·¦ä¾§å…ƒç´ éƒ½æ¯”å®ƒå°<ul><li>ç­‰å¾ªç¯ç»“æŸï¼Œè‹¥æ²¡æ‰¾åˆ°ï¼Œlow å·¦ä¾§å…ƒç´ è‚¯å®šéƒ½æ¯” target å°ï¼Œå› æ­¤ low å³æ’å…¥ç‚¹</li></ul></li><li>æ’å…¥ç‚¹å–è´Ÿæ˜¯ä¸ºäº†ä¸æ‰¾åˆ°æƒ…å†µåŒºåˆ†</li><li>-1 æ˜¯ä¸ºäº†æŠŠç´¢å¼• 0 ä½ç½®çš„æ’å…¥ç‚¹ä¸æ‰¾åˆ°çš„æƒ…å†µè¿›è¡ŒåŒºåˆ†</li></ul><h3 id="Leftmost-ä¸-Rightmost"><a href="#Leftmost-ä¸-Rightmost" class="headerlink" title="Leftmost ä¸ Rightmost"></a>Leftmost ä¸ Rightmost</h3><p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›è¿”å›çš„æ˜¯æœ€å·¦ä¾§çš„é‡å¤å…ƒç´ ï¼Œå¦‚æœç”¨ Basic äºŒåˆ†æŸ¥æ‰¾</p><ul><li><p>å¯¹äºæ•°ç»„ $[1, 2, 3, 4, 4, 5, 6, 7]$ï¼ŒæŸ¥æ‰¾å…ƒç´ 4ï¼Œç»“æœæ˜¯ç´¢å¼•3</p></li><li><p>å¯¹äºæ•°ç»„ $[1, 2, 4, 4, 4, 5, 6, 7]$ï¼ŒæŸ¥æ‰¾å…ƒç´ 4ï¼Œç»“æœä¹Ÿæ˜¯ç´¢å¼•3ï¼Œå¹¶ä¸æ˜¯æœ€å·¦ä¾§çš„å…ƒç´ </p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearchLeftmost1</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">candidate</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123;<br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            candidate = m; <span class="hljs-comment">// è®°å½•å€™é€‰ä½ç½®</span><br>            j = m - <span class="hljs-number">1</span>;     <span class="hljs-comment">// ç»§ç»­å‘å·¦</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> candidate;<br>&#125;<br></code></pre></td></tr></table></figure><p>å¦‚æœå¸Œæœ›è¿”å›çš„æ˜¯æœ€å³ä¾§å…ƒç´ </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearchRightmost1</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">candidate</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123;<br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            candidate = m; <span class="hljs-comment">// è®°å½•å€™é€‰ä½ç½®</span><br>            i = m + <span class="hljs-number">1</span>;   <span class="hljs-comment">// ç»§ç»­å‘å³</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> candidate;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>åº”ç”¨</strong></p><p>å¯¹äº Leftmost ä¸ Rightmostï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªæ¯” -1 æ›´æœ‰ç”¨çš„å€¼</p><p>Leftmost æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearchLeftmost</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt;= a[m]) &#123;<br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            i = m + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> i; <br>&#125;<br></code></pre></td></tr></table></figure><ul><li>leftmost è¿”å›å€¼çš„å¦ä¸€å±‚å«ä¹‰ï¼š$\lt target$ çš„å…ƒç´ ä¸ªæ•°</li><li>å°äºç­‰äºä¸­é—´å€¼ï¼Œéƒ½è¦å‘å·¦æ‰¾</li></ul><p>Rightmost æ”¹ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">binarySearchRightmost</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            i = m + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> i - <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>å¤§äºç­‰äºä¸­é—´å€¼ï¼Œéƒ½è¦å‘å³æ‰¾</li></ul><p>å‡ ä¸ªåè¯</p><img src="http://cdn.ohheng.cn/202406120944615.png"/><p><strong>èŒƒå›´æŸ¥è¯¢</strong>ï¼š</p><ul><li>æŸ¥è¯¢ $x \lt 4$ï¼Œ$0 .. leftmost(4) - 1$</li><li>æŸ¥è¯¢ $x \leq 4$ï¼Œ$0 .. rightmost(4)$</li><li>æŸ¥è¯¢ $4 \lt x$ï¼Œ$rightmost(4) + 1 .. \infty $</li><li>æŸ¥è¯¢ $4 \leq x$ï¼Œ $leftmost(4) .. \infty$</li><li>æŸ¥è¯¢ $4 \leq x \leq 7$ï¼Œ$leftmost(4) .. rightmost(7)$</li><li>æŸ¥è¯¢ $4 \lt x \lt 7$ï¼Œ$rightmost(4)+1 .. leftmost(7)-1$</li></ul><p><strong>æ±‚æ’å</strong>ï¼š$leftmost(target) + 1$</p><ul><li>$target$ å¯ä»¥ä¸å­˜åœ¨ï¼Œå¦‚ï¼š$leftmost(5)+1 &#x3D; 6$</li><li>$target$ ä¹Ÿå¯ä»¥å­˜åœ¨ï¼Œå¦‚ï¼š$leftmost(4)+1 &#x3D; 3$</li></ul><p><strong>æ±‚å‰ä»»ï¼ˆpredecessorï¼‰</strong>ï¼š$leftmost(target) - 1$</p><ul><li>$leftmost(3) - 1 &#x3D; 1$ï¼Œå‰ä»» $a_1 &#x3D; 2$</li><li>$leftmost(4) - 1 &#x3D; 1$ï¼Œå‰ä»» $a_1 &#x3D; 2$</li></ul><p><strong>æ±‚åä»»ï¼ˆsuccessorï¼‰</strong>ï¼š$rightmost(target)+1$</p><ul><li>$rightmost(5) + 1 &#x3D; 5$ï¼Œåä»» $a_5 &#x3D; 7$</li><li>$rightmost(4) + 1 &#x3D; 5$ï¼Œåä»» $a_5 &#x3D; 7$</li></ul><p><strong>æ±‚æœ€è¿‘é‚»å±…</strong>ï¼š</p><ul><li>å‰ä»»å’Œåä»»è·ç¦»æ›´è¿‘è€…</li></ul><h1 id="äºŒ-ç»ƒä¹ "><a href="#äºŒ-ç»ƒä¹ " class="headerlink" title="äºŒ. ç»ƒä¹ "></a>äºŒ. ç»ƒä¹ </h1><h2 id="2-1-æ—¶é—´å¤æ‚åº¦"><a href="#2-1-æ—¶é—´å¤æ‚åº¦" class="headerlink" title="2.1 æ—¶é—´å¤æ‚åº¦"></a>2.1 æ—¶é—´å¤æ‚åº¦</h2><p>ç”¨å‡½æ•° $f(n)$ è¡¨ç¤ºç®—æ³•æ•ˆç‡ä¸æ•°æ®è§„æ¨¡çš„å…³ç³»ï¼Œå‡è®¾æ¯æ¬¡è§£å†³é—®é¢˜éœ€è¦ 1 å¾®ç§’ï¼ˆ$10^{-6}$ ç§’ï¼‰ï¼Œè¿›è¡Œä¼°ç®—ï¼š</p><ol><li>å¦‚æœ $f(n) &#x3D; n^2$ é‚£ä¹ˆ 1 ç§’èƒ½è§£å†³å¤šå°‘æ¬¡é—®é¢˜ï¼Ÿ1 å¤©å‘¢ï¼Ÿ</li><li>å¦‚æœ $f(n) &#x3D; log_2(n)$  é‚£ä¹ˆ 1 ç§’èƒ½è§£å†³å¤šå°‘æ¬¡é—®é¢˜ï¼Ÿ1 å¤©å‘¢ï¼Ÿ</li><li>å¦‚æœ $f(n) &#x3D; n!$ é‚£ä¹ˆ 1 ç§’èƒ½è§£å†³å¤šå°‘æ¬¡é—®é¢˜ï¼Ÿ1 å¤©å‘¢ï¼Ÿ</li></ol><p>å‚è€ƒè§£ç­”</p><ol><li>1ç§’ $\sqrt{10^6} &#x3D; 1000$ æ¬¡ï¼Œ1 å¤© $\sqrt{10^6 * 3600 * 24} \approx 293938$ æ¬¡</li><li>1ç§’ $2^{1,000,000} $ æ¬¡ï¼Œä¸€å¤© $2^{86,400,000,000}$</li><li>æ¨ç®—å¦‚ä¸‹<ul><li>$10! &#x3D; 3,628,800$ 1ç§’èƒ½è§£å†³ $1,000,000$ æ¬¡ï¼Œå› æ­¤æ¬¡æ•°ä¸º 9 æ¬¡</li><li>$14!&#x3D;87,178,291,200$ï¼Œä¸€å¤©èƒ½è§£å†³ $86,400,000,000$ æ¬¡ï¼Œå› æ­¤æ¬¡æ•°ä¸º 13 æ¬¡</li></ul></li></ol><h2 id="2-2-äºŒåˆ†æŸ¥æ‰¾"><a href="#2-2-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="2.2 äºŒåˆ†æŸ¥æ‰¾"></a>2.2 äºŒåˆ†æŸ¥æ‰¾</h2><ul><li><a href="https://leetcode.cn/problems/sqrtx/">69. x çš„å¹³æ–¹æ ¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a></li></ul><h3 id="E01-äºŒåˆ†æŸ¥æ‰¾-åŠ›æ‰£-704-é¢˜"><a href="#E01-äºŒåˆ†æŸ¥æ‰¾-åŠ›æ‰£-704-é¢˜" class="headerlink" title="E01. äºŒåˆ†æŸ¥æ‰¾-åŠ›æ‰£ 704 é¢˜"></a>E01. äºŒåˆ†æŸ¥æ‰¾-åŠ›æ‰£ 704 é¢˜</h3><p><strong>è¦ç‚¹</strong>ï¼šå‡è€Œæ²»ä¹‹ï¼Œå¯ä»¥ç”¨é€’å½’æˆ–éé€’å½’å®ç°</p><p>ç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ target  ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1</p><p>ä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">è¾“å…¥: nums = [-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>,<span class="hljs-number">12</span>], target = <span class="hljs-number">9</span><br>è¾“å‡º: <span class="hljs-number">4</span><br>è§£é‡Š: <span class="hljs-number">9</span> å‡ºç°åœ¨ nums ä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º <span class="hljs-number">4</span><br>    <br>è¾“å…¥: nums = [-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>,<span class="hljs-number">12</span>], target = <span class="hljs-number">2</span><br>è¾“å‡º: -<span class="hljs-number">1</span><br>è§£é‡Š: <span class="hljs-number">2</span> ä¸å­˜åœ¨ nums ä¸­å› æ­¤è¿”å› -<span class="hljs-number">1</span>    <br></code></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ</strong>ï¼šç•¥ï¼Œå¯ä»¥ç”¨è®²è¿‡çš„ä»»æ„ä¸€ç§äºŒåˆ†æ±‚è§£</p><h3 id="E02-æœç´¢æ’å…¥ä½ç½®-åŠ›æ‰£-35-é¢˜"><a href="#E02-æœç´¢æ’å…¥ä½ç½®-åŠ›æ‰£-35-é¢˜" class="headerlink" title="E02. æœç´¢æ’å…¥ä½ç½®-åŠ›æ‰£ 35 é¢˜"></a>E02. æœç´¢æ’å…¥ä½ç½®-åŠ›æ‰£ 35 é¢˜</h3><p><strong>è¦ç‚¹</strong>ï¼šç†è§£è°ä»£è¡¨æ’å…¥ä½ç½®</p><p>ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼</p><ul><li>åœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•</li><li>å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®</li></ul><p>ä¾‹å¦‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">è¾“å…¥: nums = [1,3,5,6], target = 5</span><br><span class="hljs-section">è¾“å‡º: 2</span><br><br><span class="hljs-section">è¾“å…¥: nums = [1,3,5,6], target = 2</span><br><span class="hljs-section">è¾“å‡º: 1</span><br><br><span class="hljs-section">è¾“å…¥: nums = [1,3,5,6], target = 7</span><br><span class="hljs-section">è¾“å‡º: 4</span><br></code></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ1</strong>ï¼šç”¨äºŒåˆ†æŸ¥æ‰¾åŸºç¡€ç‰ˆä»£ç æ”¹å†™ï¼ŒåŸºç¡€ç‰ˆä¸­ï¼Œæ‰¾åˆ°è¿”å› mï¼Œæ²¡æ‰¾åˆ° i ä»£è¡¨æ’å…¥ç‚¹ï¼Œå› æ­¤æœ‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">searchInsert</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123;<br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> m;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> i; <span class="hljs-comment">// åŸå§‹ return -1</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ2</strong>ï¼šç”¨äºŒåˆ†æŸ¥æ‰¾å¹³è¡¡ç‰ˆæ”¹å†™ï¼Œå¹³è¡¡ç‰ˆä¸­</p><ul><li>å¦‚æœ target &#x3D;&#x3D; a[i] è¿”å› i è¡¨ç¤ºæ‰¾åˆ°</li><li>å¦‚æœ target &lt; a[i]ï¼Œä¾‹å¦‚ target &#x3D; 2ï¼Œa[i] &#x3D; 3ï¼Œè¿™æ—¶å°±åº”è¯¥åœ¨ i ä½ç½®æ’å…¥ 2</li><li>å¦‚æœ a[i] &lt; targetï¼Œä¾‹å¦‚ a[i] &#x3D; 3ï¼Œtarget &#x3D; 4ï¼Œè¿™æ—¶å°±åº”è¯¥åœ¨ i+1 ä½ç½®æ’å…¥ 4</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">searchInsert</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span> &lt; j - i) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<br>            j = m;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            i = m;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> (target &lt;= a[i]) ? i : i + <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// åŸå§‹ (target == a[i]) ? i : -1;</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ3</strong>ï¼šç”¨ leftmost ç‰ˆæœ¬è§£ï¼Œè¿”å›å€¼å³ä¸ºæ’å…¥ä½ç½®ï¼ˆå¹¶èƒ½å¤„ç†å…ƒç´ é‡å¤çš„æƒ…å†µï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">searchInsert</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span>(i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span>(target &lt;= a[m]) &#123;<br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <br>    &#125;<br>    <span class="hljs-keyword">return</span> i;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="E03-æœç´¢å¼€å§‹ç»“æŸä½ç½®-åŠ›æ‰£-34-é¢˜"><a href="#E03-æœç´¢å¼€å§‹ç»“æŸä½ç½®-åŠ›æ‰£-34-é¢˜" class="headerlink" title="E03. æœç´¢å¼€å§‹ç»“æŸä½ç½®-åŠ›æ‰£ 34 é¢˜"></a>E03. æœç´¢å¼€å§‹ç»“æŸä½ç½®-åŠ›æ‰£ 34 é¢˜</h3><p>ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚</p><p>å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å› [-1, -1]ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜</p><p>ä¾‹å¦‚</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs inform7">è¾“å…¥ï¼šnums = <span class="hljs-comment">[5,7,7,8,8,10]</span>, target = 8<br>è¾“å‡ºï¼š<span class="hljs-comment">[3,4]</span><br><br>è¾“å…¥ï¼šnums = <span class="hljs-comment">[5,7,7,8,8,10]</span>, target = 6<br>è¾“å‡ºï¼š<span class="hljs-comment">[-1,-1]</span><br><br>è¾“å…¥ï¼šnums = <span class="hljs-comment">[]</span>, target = 0<br>è¾“å‡ºï¼š<span class="hljs-comment">[-1,-1]</span><br></code></pre></td></tr></table></figure><p><strong>å‚è€ƒç­”æ¡ˆ</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">left</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">candidate</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123;<br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            candidate = m;<br>            j = m - <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> candidate;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">right</span><span class="hljs-params">(<span class="hljs-type">int</span>[] a, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, j = a.length - <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">candidate</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= j) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> (i + j) &gt;&gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (target &lt; a[m]) &#123;<br>            j = m - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[m] &lt; target) &#123;<br>            i = m + <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            candidate = m;<br>            i = m + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> candidate;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>[] searchRange(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target) &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> left(nums, target);<br>    <span class="hljs-keyword">if</span>(x == -<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[] &#123;-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>&#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[] &#123;x, right(nums, target)&#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>æ•°æ®ç»“æ„ä¸ç®—æ³•</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœˆå…‰ä¸‹çš„MemaryğŸŒ™ | é›¶ç¢çš„å²›å±¿ç»ˆä¼šé‡åˆ°æµ·ï¼Œæ…¢æ…¢äº¦æ¼«æ¼«</title>
    <link href="/2024/06/11/(%E6%9C%88%E5%85%89%E4%B8%8B%E7%9A%84Memary)%E9%9B%B6%E7%A2%8E%E7%9A%84%E5%B2%9B%E5%B1%BF%E7%BB%88%E4%BC%9A%E9%81%87%E5%88%B0%E6%B5%B7%EF%BC%8C%E6%85%A2%E6%85%A2%E4%BA%A6%E6%BC%AB%E6%BC%AB/"/>
    <url>/2024/06/11/(%E6%9C%88%E5%85%89%E4%B8%8B%E7%9A%84Memary)%E9%9B%B6%E7%A2%8E%E7%9A%84%E5%B2%9B%E5%B1%BF%E7%BB%88%E4%BC%9A%E9%81%87%E5%88%B0%E6%B5%B7%EF%BC%8C%E6%85%A2%E6%85%A2%E4%BA%A6%E6%BC%AB%E6%BC%AB/</url>
    
    <content type="html"><![CDATA[<p>â€‹æœ€è¿‘æ€»æ˜¯ç¥ç»è´¨åœ°è§‰å¾—è‡ªå·±èƒ½é—»åˆ°é£çš„å‘³é“ï¼Œä¸æ˜¯èŠ±é¦™ï¼Œä¸æ˜¯å¤å¤©çš„çƒ­æµªï¼Œä¹Ÿä¸æ˜¯å¥³å­©å­æ¸©æŸ”çš„æ´—è¡£æ¶²æˆ–é¦™æ°´å‘³ï¼Œå°±æ˜¯å•è°ƒçš„é£çš„å…·è±¡å‘³é“ã€‚</p><p>â€‹è¿‘äº›æ—¥å­é™†é™†ç»­ç»­å¬åˆ°ç†Ÿæ‚‰åˆé™Œç”Ÿçš„é«˜è€ƒæ¶ˆæ¯ï¼Œçªç„¶ä¼šæƒ³èµ·å½“æ—¶é«˜è€ƒé‚£å¹´çš„æ—¥å­ï¼Œå¤§å®¶å¯¹åœ¨è®¡åˆ’ç€é«˜è€ƒä¹‹åçš„å‡æœŸä¼šå»å“ªé‡Œæ—…è¡Œï¼Œå’Œè°ä¸€èµ·å‡ºå»ç©ï¼Œçœ‹äº›ä»€ä¹ˆä¹¦å’Œç”µå½±ï¼Œè¿½äº›ä»€ä¹ˆç»¼è‰ºå’Œç”µè§†å‰§ï¼Œåµåµé—¹é—¹çš„ï¼Œæ˜¯é«˜ä¸­ç»™æˆ‘ä»¬ç•™ä¸‹çš„æœ€åçš„ä¸å¤šçš„æ„‰å¿«å›å¿†ï¼Œå¥½åƒé‚£ä¸ªå‡æœŸæ¼«é•¿çš„ä¸ä¼šç»“æŸã€‚ä½†ä¸ç®¡è¿™äº›è®¡åˆ’ä¼šå®Œæˆå¤šå°‘ï¼Œçœ¼é‡Œé—ªé—ªå‘å…‰æ†§æ†¬è¿™äº›æ—¥å­å·²ç»è¶³å¤Ÿä»¤äººçæƒœäº†ã€‚</p><p>â€‹â€œä½ ä»¬å†çœ‹çœ‹é¢˜ï¼Œæˆ‘å†çœ‹çœ‹ä½ ä»¬ã€‚â€è€å¸ˆå½“æ—¶çš„è¯ä»¿ä½›å°±åœ¨è€³æ—ã€‚ç°åœ¨æƒ³æ¥ï¼Œå¥½åƒçœŸçš„æ˜¯ç”¨é«˜ä¸‰å»æ†§æ†¬å¤§å­¦ï¼Œå´ç”¨ä¸€æ•´ä¸ªå¤§å­¦æ—¶é—´æ¥æ€€å¿µé«˜ä¸­ã€‚</p><p>â€‹è¯´æ¥ä¹Ÿå¥‡æ€ªï¼Œæ´»äº†åå‡ äºŒåå¹´ï¼Œä¹Ÿè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°å…³äºè‡ªå·±çš„äººç”Ÿå®šä¹‰ï¼Œå¥½åƒæ‰åˆšåˆšå‡ºç”Ÿï¼Œçå¼€çœ¼ç›ï¼Œå°±è¦è¢«ç”Ÿæ´»çš„æ´ªæµæ¨ç€èµ°ï¼Œæ²¡æœ‰è€ƒè™‘è¿‡è‡ªå·±çœŸæ­£æƒ³è¦ä»€ä¹ˆï¼Œåªæ˜¯è§‰å¾—ä¸€å¤©ä¸€å¤©å°†å°±ç€ä¹Ÿå°±è¿™ä¹ˆè¿‡å»äº†ã€‚æˆ‘æƒ³è¦çš„ä¸€ç”Ÿæ˜¯æ€æ ·çš„å‘¢ï¼Ÿä¹Ÿè®¸æ˜¯å¶å°”æƒ³è¦ç»å†è·Œå®•èµ·ä¼ï¼Œèµ°ä¸€å›äººç”Ÿåå·ï¼Œä½“æ‚Ÿä¸–é—´çš„æ²§æ¡‘å˜åŒ–ï¼Œæ´»æˆæ‰€è°“åˆ«äººçœ¼é‡Œç”Ÿå‘½ç²¾å½©çš„é‚£ä¸ªã€‚ä½†åˆé—´æ­‡æƒ³è¦å®‰é€¸å¹³å‡¡çš„å°æ—¥å­ï¼Œåœ¨å··å­é‡Œå¹é£åœ¨æš–é˜³ä¸‹å’ŒçŒ«å¯¹è¯ã€‚è¿™ä¹ˆçœ‹æ¥ï¼Œå…¶å®æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä¸–ç•Œï¼Œä¸ç”¨å®Œå…¨æ•å¼€ï¼Œå¼€ä¸€æ‰‡çª—å°±å¤Ÿäº†ï¼Œæƒ³è¦ç…§è¿›æ¥çš„å…‰è‡ªç„¶ä¼šè¿›æ¥ã€‚</p><p>â€‹æœ€è¿‘ä¹Ÿè¶Šæ¥è¶Šæ‡‚å¾—é€¾æœŸä¸å€™çš„é“ç†ï¼Œçœ‹å¥½çš„æœºç¥¨ä¸åŠæ—¶æ‹ä¸‹æ¥éš”å¤©èˆªç­å°±å¯èƒ½å˜æ›´äº†ï¼Œå¿ƒä»ªçš„ç‰©ä»¶ä¸å½“æ—¶å†³å®šå¥½ä»˜æ¬¾ä¸‹æ¬¡å†çœ‹å°±å–å®Œäº†ï¼Œç”œå“åº—çš„æ–°å“ä¸Šçº¿æ€»æƒ³å»è¯•ä¸€è¯•ä½†ä¸€ç›´æ‹–ç€å°±åƒä¸åˆ°äº†ã€‚æ¢å­£çš„ä¸åªæ˜¯æ°´æœå’Œæ°”æ¸©ï¼Œè¿˜æœ‰è‡ªå·±çš„å¿ƒæƒ…ï¼Œè€Œæˆ‘ä¹Ÿä¸æƒ³è¦æ€€æŠ±ç€å……æ»¡é—æ†¾çš„å¿ƒï¼Œåœ¨åå¤åœ°æœŸå¾…å’Œå¤±æœ›ä¸­æ´»äº†ã€‚</p><p>â€‹ä¸€è¾ˆå­çœ‹èµ·æ¥å¾ˆé•¿ä½†è¿‡èµ·æ¥å´å¾ˆçŸ­ï¼ŒæŸäº›ç‰¹å®šçš„æ—¶æ®µå’ŒæŸç§å¿ƒæ€å°±æ›´çŸ­äº†ï¼Œå¾ˆå¤šäº‹æƒ…éƒ½æ˜¯å½“ä¸‹ä¸å»åšå°±ä¸ä¼šå†æœ‰äº†ã€‚æ‰€ä»¥åƒä¸‡ä¸è¦è§‰å¾—è‡ªå·±çš„æ¢¦æƒ³å’Œçˆ±å¥½ä¸å€¼å¾—ä¸€æï¼Œè¿™äº›å¤§å¤§å°å°çš„äº‹ç‰©ä¸éƒ½æ˜¯æˆ‘ä»¬è¿«åˆ‡æƒ³è¦ä¹ˆï¼Ÿè¦çŸ¥é“æˆ‘ä»¬ä¸æ˜¯ä¸ºäº†è¦å˜æˆåˆ«äººæœŸå¾…çš„æ ·å­æ‰å»åŠªåŠ›çš„ï¼Œæ˜¯ä¸ºäº†æˆä¸ºè‡ªå·±æƒ³è¦çš„æ ·å­ã€‚</p><p>â€‹å¯å¥‡æ€ªçš„æ˜¯ï¼Œç°åœ¨çš„æˆ‘æ…¢æ…¢çš„åšä»»ä½•é€‰æ‹©éƒ½æ€å‰æƒ³åï¼Œå°å¿ƒç¿¼ç¿¼ã€‚ä¹Ÿä¸æ˜¯è¯´å› ä¸ºä¸å†å¹´è½»ï¼Œæ²¡æœ‰å¤§æŠŠæ—¶é—´å¯ä»¥ç”¨æ¥è¯•é”™ã€‚è€Œæ˜¯æ¸…æ¥šåœ°çŸ¥é“ï¼Œå½“ä¸‹æ¯ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„é€‰æ‹©ï¼Œéƒ½å¯èƒ½ä¼šæŒ‡å¼•è‡ªå·±èµ°ä¸Šä¸åŒçš„é“è·¯ã€‚æˆä¸ºè“¦ç„¶å›é¦–æ—¶ï¼Œä¼—å¤šé—æ†¾é‡Œé¢çš„åˆä¸€ä¸ªã€‚åæ¥æƒ³æƒ³ï¼Œäººé•¿å¤§äº†ï¼Œé€‰æ‹©å®‰å…¨çš„ï¼Œå¯é¢„è§çš„ï¼Œæœ‰ç»éªŒçš„è·¯ï¼Œä¹Ÿæ˜¯æœ¬èƒ½ã€‚å¾ˆå¤šæ—¶å€™ï¼Œé—æ†¾çš„å‘ç”Ÿå’Œæ„éš¾å¹³çš„å‡ºç°ï¼Œéƒ½æ˜¯ç”±å½“æ—¶çš„ä¸€ä¸ªä¸ªçš„é€‰æ‹©å’Œå†³å®šè€Œå®šæ€§çš„ã€‚</p><p>â€‹ä½†è¿˜æ˜¯å¸Œæœ›å°½é‡ä¸æ”¾å¼ƒè¿½æ±‚è‡ªå·±è§‰å¾—æœ€å¥½çš„æœ€é€‚åˆçš„ï¼Œå¦¥åå’Œå°†å°±æ¢æ¥çš„ä¹Ÿåªæ˜¯é—æ†¾å’Œåæ‚”ã€‚æˆ‘æ—¶å¸¸åœ¨æƒ³ï¼Œå¦‚æœæˆ‘ä»¬åœ¨é¢å¯¹è´¨ç–‘çš„æ—¶å€™ï¼Œä¹Ÿä¸æ”¾å¼ƒï¼Œè€Œæ˜¯ç»§ç»­åŠªåŠ›ä¸‹å»ï¼Œé‚£ä¼šä¸ä¼šç¢°åˆ°è¿™ä¸ªä¸–ç•Œçš„ä¸€ç‚¹ç‚¹æ¸©æŸ”å‘¢ï¼Ÿ</p><p>â€‹å›æƒ³é«˜è€ƒåçš„é‚£æ®µï¼Œæ„Ÿè§‰è‡ªå·±é—¯è¿‡äº†äººç”Ÿä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªå…³å¡ã€‚å¯ä»¥å›å®¶å’Œè€åŒå­¦ä¸€èµ·åƒå¤œå®µå¹æ™šé£ç•…è°ˆï¼Œä¸€åŒéª‘ç€å°ç”µé©´å›å®¶ã€‚å‡†å¤‡è¿æ¥æ‡’è§‰èµ·æ¥åçš„å¤ªé˜³å’Œæ¥ä¸‹æ¥æœŸå¾…å·²ä¹…çš„æš‘å‡ï¼Œè¿˜æœ‰æ— é™å¯èƒ½çš„æœªæ¥ã€‚æˆ‘æƒ³â€œé«˜è€ƒåâ€è¿™ä¸‰ä¸ªå­—å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œä¸åªæ˜¯ä¸€ä¸ªæ—¶é—´èŠ‚ç‚¹ï¼Œæ›´å¤šçš„æ ‡å¿—ç€ï¼šçº¦å®šä¸æ¢¦æƒ³ã€‚è€Œæ¢¦æƒ³å†æ¸ºå°ï¼Œä¹Ÿæœ‰ç£…ç¤´çš„åŠ›é‡ã€‚æˆ‘ç›¸ä¿¡ï¼Œåªè¦æ€€æ£æ¢¦æƒ³ï¼Œå“ªæ€•ç©¿è¿‡æ¼«é•¿é»‘å¤œï¼Œæ€»æœ‰ä¸€å¤©ï¼Œä¼šç©¿è¶Šäººç¾¤ï¼Œå‘å‡ºå±äºè‡ªå·±çš„å…‰èŠ’ã€‚</p><p>â€‹å¸Œæœ›æˆ‘ä»¬çš„æ¯ä¸€ä¸ªæ‹å¼¯éƒ½æ˜¯ä¸ºäº†èµ°åˆ°ä¸€æ¡æ›´å¥½çš„é“è·¯ä¸Šã€‚</p><p>â€‹å¸Œæœ›æˆ‘ä»¬ä¸è¢«å²æœˆç£¨å¹³æ£±è§’ï¼Œä¸å¯¹ä¸–äº‹æ¶ˆææŠ±æ€¨ï¼Œæ‰€æœ‰çš„é€‰æ‹©éƒ½ä¸æ˜¯å› ä¸ºä¸å¾—å·²ï¼Œè€Œæ˜¯å› ä¸ºçœŸå¿ƒå–œæ¬¢ã€‚</p><p>â€‹å¸Œæœ›æˆ‘ä»¬åœ¨æˆä¸ºäº•äº•æœ‰æ¡çš„å¤§äººå‰ï¼Œæ‹¥æœ‰å¾ˆå¤šå¼€å¿ƒå¾—ä¸€å¡Œç³Šæ¶‚çš„å›å¿†ã€‚</p><p>â€‹é›¶ç¢çš„å²›å±¿ç»ˆä¼šé‡åˆ°æµ·ï¼Œæ…¢æ…¢äº¦æ¼«æ¼«</p>]]></content>
    
    
    <categories>
      
      <category>æœˆå…‰ä¸‹çš„Memary</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Memary</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBooté‚®ä»¶å‘é€ï¼ˆqqé‚®ç®±ï¼‰</title>
    <link href="/2024/05/18/SpringBoot%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/"/>
    <url>/2024/05/18/SpringBoot%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h3 id="1ã€å¼€å¯POP3-SMTPæœåŠ¡"><a href="#1ã€å¼€å¯POP3-SMTPæœåŠ¡" class="headerlink" title="1ã€å¼€å¯POP3|SMTPæœåŠ¡"></a>1ã€å¼€å¯POP3|SMTPæœåŠ¡</h3><p>é¦–å…ˆç™»å½•QQé‚®ç®±&gt;&gt;&gt;ç™»å½•æˆåŠŸåæ‰¾åˆ°è®¾ç½®&gt;&gt;&gt;ç„¶åæ‰¾åˆ°é‚®ç®±è®¾ç½®&gt;&gt;&gt;ç‚¹å‡»è´¦æˆ·&gt;&gt;&gt;æ‰¾åˆ°POP3|SMTPæœåŠ¡&gt;&gt;&gt;ç‚¹å‡»å¼€å¯(å¼€å¯éœ€è¦éªŒè¯ï¼ŒéªŒè¯æˆåŠŸåä¼šæœ‰ä¸€ä¸²æˆæƒç ç”¨äºå‘é€é‚®ä»¶ä½¿ç”¨)&gt;&gt;&gt;éªŒè¯æˆåŠŸ<br>è®°ä¸‹QQé‚®ç®±æç¤ºçš„æˆæƒç ï¼Œè¿™ä¸ªæˆæƒç ï¼Œå°±æ˜¯å‘é€é‚®ä»¶æ—¶éœ€è¦çš„å¯†ç ã€‚</p><h3 id="2ã€å¼•å…¥ä¾èµ–"><a href="#2ã€å¼•å…¥ä¾èµ–" class="headerlink" title="2ã€å¼•å…¥ä¾èµ–"></a>2ã€å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3ã€application-ymlé…ç½®"><a href="#3ã€application-ymlé…ç½®" class="headerlink" title="3ã€application.ymlé…ç½®"></a>3ã€application.ymlé…ç½®</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-comment">#é‚®ç®±åŸºæœ¬é…ç½®</span><br>  <span class="hljs-attr">mail:</span><br>    <span class="hljs-comment">#é…ç½®smtpæœåŠ¡ä¸»æœºåœ°å€</span><br>    <span class="hljs-comment"># qqé‚®ç®±ä¸ºsmtp.qq.com          ç«¯å£å·465æˆ–587</span><br>    <span class="hljs-comment"># sina    smtp.sina.cn</span><br>    <span class="hljs-comment"># aliyun  smtp.aliyun.com</span><br>    <span class="hljs-comment"># 163     smtp.163.com       ç«¯å£å·465æˆ–994</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">smtp.qq.com</span><br>    <span class="hljs-comment">#å‘é€è€…é‚®ç®±</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">****@qq.com</span><br>    <span class="hljs-comment">#é…ç½®å¯†ç ,æ³¨æ„ä¸æ˜¯çœŸæ­£çš„å¯†ç ï¼Œè€Œæ˜¯åˆšåˆšç”³è¯·åˆ°çš„æˆæƒç </span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">fe456156fefefee</span><br>    <span class="hljs-comment">#ç«¯å£å·465æˆ–587</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">465</span><br>    <span class="hljs-comment">#é»˜è®¤çš„é‚®ä»¶ç¼–ç ä¸ºUTF-8</span><br>    <span class="hljs-attr">default-encoding:</span> <span class="hljs-string">UTF-8</span><br>    <span class="hljs-comment">#å…¶ä»–å‚æ•°</span><br>    <span class="hljs-attr">properties:</span><br>     <span class="hljs-attr">mail:</span><br>        <span class="hljs-comment">#é…ç½®SSL åŠ å¯†å·¥å‚</span><br>      <span class="hljs-attr">smtp:</span><br>        <span class="hljs-attr">ssl:</span><br>          <span class="hljs-comment">#æœ¬åœ°æµ‹è¯•ï¼Œå…ˆæ”¾å¼€ssl</span><br>          <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>        <span class="hljs-comment">#å¼€å¯debugæ¨¡å¼ï¼Œè¿™æ ·é‚®ä»¶å‘é€è¿‡ç¨‹çš„æ—¥å¿—ä¼šåœ¨æ§åˆ¶å°æ‰“å°å‡ºæ¥ï¼Œæ–¹ä¾¿æ’æŸ¥é”™è¯¯</span><br>      <span class="hljs-attr">debug:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="4ã€ç¼–å†™å‘é€é‚®ä»¶çš„æ–¹æ³•"><a href="#4ã€ç¼–å†™å‘é€é‚®ä»¶çš„æ–¹æ³•" class="headerlink" title="4ã€ç¼–å†™å‘é€é‚®ä»¶çš„æ–¹æ³•"></a>4ã€ç¼–å†™å‘é€é‚®ä»¶çš„æ–¹æ³•</h3><h4 id="é‚®ä»¶ç”Ÿæˆå·¥å…·ç±»-EmailUtil-java"><a href="#é‚®ä»¶ç”Ÿæˆå·¥å…·ç±»-EmailUtil-java" class="headerlink" title="é‚®ä»¶ç”Ÿæˆå·¥å…·ç±» EmailUtil.java"></a><strong>é‚®ä»¶ç”Ÿæˆå·¥å…·ç±»</strong> <code>EmailUtil.java</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Author</span>: Ohh</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Desctription</span>: ç”µå­é‚®ä»¶ç”Ÿæˆå†…å®¹å®ç”¨ç¨‹åº</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2024-05-18 11:52</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Version</span>: 1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailUtil</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”Ÿæˆç”µå­é‚®ä»¶å†…å®¹</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> captcha       éªŒè¯ç </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> emailHtmlPath ç”µå­é‚®ä»¶htmlè·¯å¾„</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-doctag">@link</span> String&#125;</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">buildEmailContent</span><span class="hljs-params">(String emailHtmlPath, String captcha)</span> &#123;<br>        <span class="hljs-comment">// åŠ è½½é‚®ä»¶htmlæ¨¡æ¿</span><br>        <span class="hljs-type">ClassPathResource</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathResource</span>(emailHtmlPath);<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">fileReader</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        String line;<br>        <span class="hljs-keyword">try</span> &#123;<br>            inputStream = resource.getInputStream();<br>            fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>            <span class="hljs-keyword">while</span> ((line = fileReader.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>                buffer.append(line);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            log.info(<span class="hljs-string">&quot;å‘é€é‚®ä»¶è¯»å–æ¨¡æ¿å¤±è´¥&#123;&#125;&quot;</span>, e.getMessage());<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">if</span> (fileReader != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    fileReader.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (inputStream != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    inputStream.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// æ›¿æ¢htmlæ¨¡æ¿ä¸­çš„å‚æ•°</span><br>        <span class="hljs-keyword">return</span> MessageFormat.format(buffer.toString(), captcha, EMAIL_TITLE, EMAIL_TITLE_ENGLISH, PLATFORM_RESPONSIBLE_PERSON, PLATFORM_ADDRESS);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ„å»ºä»˜è´¹æˆåŠŸç”µå­é‚®ä»¶å†…å®¹</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> emailHtmlPath ç”µå­é‚®ä»¶htmlè·¯å¾„</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> orderName     è®¢å•åç§°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> orderTotal    è®¢å•æ€»é¢</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-doctag">@link</span> String&#125;</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">buildPaySuccessEmailContent</span><span class="hljs-params">(String emailHtmlPath, String orderName, String orderTotal)</span> &#123;<br>        <span class="hljs-comment">// åŠ è½½é‚®ä»¶htmlæ¨¡æ¿</span><br>        <span class="hljs-type">ClassPathResource</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathResource</span>(emailHtmlPath);<br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">fileReader</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        String line;<br>        <span class="hljs-keyword">try</span> &#123;<br>            inputStream = resource.getInputStream();<br>            fileReader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(inputStream));<br>            <span class="hljs-keyword">while</span> ((line = fileReader.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>                buffer.append(line);<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            log.info(<span class="hljs-string">&quot;å‘é€é‚®ä»¶è¯»å–æ¨¡æ¿å¤±è´¥&#123;&#125;&quot;</span>, e.getMessage());<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">if</span> (fileReader != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    fileReader.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (inputStream != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    inputStream.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// æ›¿æ¢htmlæ¨¡æ¿ä¸­çš„å‚æ•°</span><br>        <span class="hljs-keyword">return</span> MessageFormat.format(buffer.toString(), orderName, orderTotal, PLATFORM_RESPONSIBLE_PERSON, PATH_ADDRESS, EMAIL_TITLE);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å‘é€æ”¯ä»˜æˆåŠŸç”µå­é‚®ä»¶</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> emailAccount ç”µå­é‚®ä»¶å¸æˆ·</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> mailSender   é‚®ä»¶å‘ä»¶äºº</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> emailConfig  ç”µå­é‚®ä»¶é…ç½®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> orderName    è®¢å•åç§°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> orderTotal   è®¢å•æ€»é¢</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> MessagingException æ¶ˆæ¯ä¼ é€’å¼‚å¸¸</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendPaySuccessEmail</span><span class="hljs-params">(String emailAccount, JavaMailSender mailSender, EmailConfig emailConfig, String orderName, String orderTotal)</span> <span class="hljs-keyword">throws</span> MessagingException &#123;<br>        <span class="hljs-type">MimeMessage</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> mailSender.createMimeMessage();<br>        <span class="hljs-comment">// é‚®ç®±å‘é€å†…å®¹ç»„æˆ</span><br>        <span class="hljs-type">MimeMessageHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessageHelper</span>(message, <span class="hljs-literal">true</span>);<br>        helper.setSubject(<span class="hljs-string">&quot;ã€&quot;</span> + EMAIL_TITLE + <span class="hljs-string">&quot;ã€‘æ„Ÿè°¢æ‚¨çš„è´­ä¹°ï¼Œè¯·æŸ¥æ”¶æ‚¨çš„è®¢å•&quot;</span>);<br>        helper.setText(buildPaySuccessEmailContent(EMAIL_HTML_PAY_SUCCESS_PATH, orderName, orderTotal), <span class="hljs-literal">true</span>);<br>        helper.setTo(emailAccount);<br>        helper.setFrom(EMAIL_TITLE + <span class="hljs-string">&#x27;&lt;&#x27;</span> + emailConfig.getEmailFrom() + <span class="hljs-string">&#x27;&gt;&#x27;</span>);<br>        mailSender.send(message);<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="é‚®ä»¶å¸¸é‡-EmailConstant-java"><a href="#é‚®ä»¶å¸¸é‡-EmailConstant-java" class="headerlink" title="é‚®ä»¶å¸¸é‡ EmailConstant.java"></a><strong>é‚®ä»¶å¸¸é‡</strong> <code>EmailConstant.java</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Author</span>: Ohh</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Desctription</span>: ç”µå­é‚®ä»¶å¸¸é‡</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2024-05-17 23:20</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Version</span>: 1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">EmailConstant</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”µå­é‚®ä»¶htmlå†…å®¹è·¯å¾„ resourcesç›®å½•ä¸‹</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">EMAIL_HTML_CONTENT_PATH</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;email.html&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”µå­é‚®ä»¶htmlæ”¯ä»˜æˆåŠŸè·¯å¾„</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">EMAIL_HTML_PAY_SUCCESS_PATH</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;pay.html&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * captchaç¼“å­˜é”®</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">CAPTCHA_CACHE_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;api:captcha:&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”µå­é‚®ä»¶ä¸»é¢˜</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">EMAIL_SUBJECT</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;éªŒè¯ç é‚®ä»¶&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”µå­é‚®ä»¶æ ‡é¢˜</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">EMAIL_TITLE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;LinkSauce-API æ¥å£å¼€æ”¾å¹³å°&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”µå­é‚®ä»¶æ ‡é¢˜è‹±è¯­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">EMAIL_TITLE_ENGLISH</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;LinkSauce-API Open Interface Platform&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¹³å°è´Ÿè´£äºº</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">PLATFORM_RESPONSIBLE_PERSON</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Ohh&quot;</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * todo å¹³å°åœ°å€</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">PLATFORM_ADDRESS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&lt;a href=&#x27;https://api.qimuu.icu/&#x27;&gt;è¯·è”ç³»æˆ‘ä»¬&lt;/a&gt;&quot;</span>;<br><br>    <span class="hljs-type">String</span> <span class="hljs-variable">PATH_ADDRESS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&#x27;https://api.qimuu.icu/&#x27;&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="é‚®ä»¶é…ç½®-EmailConfig-java"><a href="#é‚®ä»¶é…ç½®-EmailConfig-java" class="headerlink" title="é‚®ä»¶é…ç½® EmailConfig.java"></a><strong>é‚®ä»¶é…ç½®</strong> <code>EmailConfig.java</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Author</span>: Ohh</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Desctription</span>: ç”µå­é‚®ä»¶é…ç½®</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Date</span>: 2024-05-18 11:55</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@Version</span>: 1.0</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;spring.mail&quot;)</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailConfig</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">emailFrom</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;*****@qq.com&quot;</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="å‘é€é‚®ä»¶æ–¹æ³•-sendEmail"><a href="#å‘é€é‚®ä»¶æ–¹æ³•-sendEmail" class="headerlink" title="å‘é€é‚®ä»¶æ–¹æ³• sendEmail"></a><strong>å‘é€é‚®ä»¶æ–¹æ³•</strong> <code>sendEmail</code></h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">(String emailAccount, String captcha)</span> <span class="hljs-keyword">throws</span> MessagingException &#123;<br>    <span class="hljs-comment">// åˆ›å»ºMimeMessageå¯¹è±¡</span><br>    <span class="hljs-type">MimeMessage</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> mailSender.createMimeMessage();<br>    <span class="hljs-comment">// é‚®ç®±å‘é€å†…å®¹ç»„æˆ</span><br>    <span class="hljs-type">MimeMessageHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MimeMessageHelper</span>(message, <span class="hljs-literal">true</span>);<br>    <span class="hljs-comment">// è®¾ç½®ä¸»é¢˜</span><br>    helper.setSubject(EMAIL_SUBJECT);<br>    <span class="hljs-comment">// è®¾ç½®æ­£æ–‡</span><br>    helper.setText(buildEmailContent(EMAIL_HTML_CONTENT_PATH, captcha), <span class="hljs-literal">true</span>);<br>    <span class="hljs-comment">// è®¾ç½®æ”¶ä»¶äºº</span><br>    helper.setTo(emailAccount);<br>    <span class="hljs-comment">// è®¾ç½®å‘ä»¶äºº</span><br>    helper.setFrom(EMAIL_TITLE + <span class="hljs-string">&#x27;&lt;&#x27;</span> + emailConfig.getEmailFrom() + <span class="hljs-string">&#x27;&gt;&#x27;</span>);<br>    <span class="hljs-comment">// å‘é€é‚®ä»¶</span><br>    mailSender.send(message);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="é‚®ä»¶æ ·å¼æ¨¡æ¿-email-html"><a href="#é‚®ä»¶æ ·å¼æ¨¡æ¿-email-html" class="headerlink" title="é‚®ä»¶æ ·å¼æ¨¡æ¿ email.html"></a><strong>é‚®ä»¶æ ·å¼æ¨¡æ¿</strong> <code>email.html</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;email code&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-comment">&lt;!--é‚®ç®±éªŒè¯ç æ¨¡æ¿--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;background-color:#ECECEC; padding: 35px;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">align</span>=<span class="hljs-string">&quot;center&quot;</span> <span class="hljs-attr">cellpadding</span>=<span class="hljs-string">&quot;0&quot;</span></span><br><span class="hljs-tag">           <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 600px;height: 100%; margin: 0px auto; text-align: left; position: relative; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; font-size: 14px; font-family:å¾®è½¯é›…é»‘, é»‘ä½“; line-height: 1.5; box-shadow: rgb(153, 153, 153) 0px 0px 5px; border-collapse: collapse; background-position: initial initial; background-repeat: initial initial;background:#fff;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;height: 25px; line-height: 25px; padding: 15px 35px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: RGB(148,0,211); background-color: RGB(148,0,211); border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">valign</span>=<span class="hljs-string">&quot;middle&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">font</span> <span class="hljs-attr">face</span>=<span class="hljs-string">&quot;å¾®è½¯é›…é»‘&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;5&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: rgb(255, 255, 255); &quot;</span>&gt;</span>&#123;1&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">font</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;word-break:break-all&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding:25px 35px 40px; background-color:#fff;opacity:0.8;&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin: 5px 0px; &quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">font</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;#333333&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;line-height: 20px; &quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">font</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;4&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;line-height: 22px; &quot;</span>&gt;</span><br>                                å°Šæ•¬çš„ç”¨æˆ·ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">font</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">font</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- ä¸­æ–‡ --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ‚¨å¥½ï¼æ„Ÿè°¢æ‚¨ä½¿ç”¨&#123;1&#125;ï¼Œæ‚¨çš„è´¦å·æ­£åœ¨è¿›è¡Œé‚®ç®±éªŒè¯ï¼ŒéªŒè¯ç ä¸ºï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: &#x27;#ff8c00&#x27;;font-size: 16px;font-weight: bold&quot;</span>&gt;</span>&#123;0&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        ï¼Œæœ‰æ•ˆæœŸ5åˆ†é’Ÿï¼Œè¯·å°½å¿«å¡«å†™éªŒè¯ç å®ŒæˆéªŒè¯ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- è‹±æ–‡ --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin: 5px 0px; &quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">font</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&quot;#333333&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;line-height: 20px; &quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">font</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;4&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;line-height: 22px; &quot;</span>&gt;</span><br>                                Dear user:<span class="hljs-tag">&lt;/<span class="hljs-name">font</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">font</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello! Thanks for using &#123;2&#125;, your account is being authenticated by email, the<br>                        verification code is: <span class="hljs-tag">&lt;<span class="hljs-name">span</span></span><br><span class="hljs-tag">                                <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: &#x27;#ff8c00&#x27;;font-size: 16px;font-weight: bold&quot;</span>&gt;</span> &#123;0&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> , valid for 5<br>                        minutes. Please fill in the<br>                        verification code as soon as<br>                        possible!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width:100%;margin:0 auto;&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding:10px 10px 0;border-top:1px solid #ccc;color:#747474;margin-bottom:20px;line-height:1.3em;font-size:12px;&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;3&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ­¤ç”µå­é‚®ä»¶ä»…é™æœ¬äººæŸ¥çœ‹ï¼å¦‚æœæœ‰äººè¦æ±‚ä½ ä¸ä»–åˆ†äº«æ­¤ ç”µå­é‚®ä»¶æˆ–éªŒè¯ï¼Œæˆ–ä½ è®¤ä¸ºè¯¯æ”¶æ­¤ç”µå­é‚®ä»¶ï¼Œ&#123;4&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ­¤ä¸ºç³»ç»Ÿé‚®ä»¶ï¼Œè¯·å‹¿å›å¤<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                                Please do not reply to this system email<br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SpringBoot</tag>
      
      <tag>é‚®ä»¶</tag>
      
      <tag>åç«¯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ant Design Pro çš„åˆå§‹åŒ–</title>
    <link href="/2024/04/29/AntDesignPro%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/"/>
    <url>/2024/04/29/AntDesignPro%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<blockquote><p>æŸ¥çœ‹ <a href="pro.ant.design/zh-CN/docs/getting-started">å®˜æ–¹æ–‡æ¡£</a></p></blockquote><ol><li><p>å®‰è£…åˆå§‹åŒ–è„šæ‰‹æ¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ npm</span><br>npm i @ant-design/pro-cli -g<br></code></pre></td></tr></table></figure></li><li><p>æ‰“å¼€å°†è¦å­˜æ”¾é¡¹ç›®çš„æ–‡ä»¶å¤¹ åˆ›å»ºé¡¹ç›®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pro create linksauce-frontend<br></code></pre></td></tr></table></figure><p><strong>é€‰æ‹©umiç‰ˆæœ¬</strong></p><blockquote>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">? ğŸ‚ ä½¿ç”¨ umi@4 è¿˜æ˜¯ umi@3 ? (Use arrow keys)<br>â¯ umi@4<br>umi@3<br></code></pre></td></tr></table></figure></blockquote></li><li><p>å®‰è£…yarn</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å…¨å±€å®‰è£…</span><br>npm install -g yarn<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹yarnç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yarn -version<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…ä¾èµ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yarn<br></code></pre></td></tr></table></figure></li><li><p>è¿è¡Œæµ‹è¯•<code>package.json</code>ä¸­çš„<code>start</code></p><p><img src="http://cdn.ohheng.cn/202404292132212.png" alt="image-20240329154642753"></p><p><img src="http://cdn.ohheng.cn/202404292132994.png" alt="image-20240329154642753"></p></li><li><p>é¡¹ç›®ç˜¦èº«ï¼Œ<strong>æœ‰å‘ï¼Œå¯è·³è¿‡ï¼ï¼ï¼</strong></p><ul><li><p>è¿è¡Œ<code>package.json</code>ä¸­çš„<code>i18n-remove</code>å»é™¤å›½é™…åŒ–ï¼Œæ‰‹åŠ¨åˆ é™¤<code>src\locales</code></p><blockquote><p>å¦‚æœæŠ¥é”™ï¼Œæ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯æ²¡åˆ å¹²å‡€ï¼Œå¯ä»¥æ‰‹åŠ¨å»é™¤</p></blockquote><p><strong>AntDesignå»å›½é™…åŒ– å routeré¡µé¢æ˜¾ç¤ºé—®é¢˜ï¼š</strong></p><blockquote><p>  è§£å†³æ–¹æ³•ï¼šæ‰§è¡Œ </p><p>  <code>yarn add eslint-config-prettier</code></p><p>  <code>yarn add eslint-plugin-unicorn</code></p><p>  ç„¶åä¿®æ”¹<code>node_modules/@umijs/lint/dist/config/eslint/index.js</code> </p><p>  &#x2F;&#x2F; es2022: trueæŠŠè¿™ä¸ªæ³¨é‡Šæ‰å°±å¯ä»¥è§£å†³é—®é¢˜</p></blockquote><p>å¦‚æœä¸è¡Œï¼Œä¿®æ”¹<code>config\routes.ts</code>å¦‚ä¸‹å³å¯ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [<br>  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ç™»å½•&#x27;</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user&#x27;</span>, <span class="hljs-attr">layout</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">routes</span>: [&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user/login&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;./User/Login&#x27;</span> &#125;] &#125;,<br>  &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;æ¬¢è¿é¡µé¢&#x27;</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/welcome&#x27;</span>, <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;smile&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;./Welcome&#x27;</span> &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/admin&#x27;</span>,<br>    <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;crown&#x27;</span>,<br>    <span class="hljs-attr">access</span>: <span class="hljs-string">&#x27;canAdmin&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ç®¡ç†å‘˜é¡µé¢&#x27;</span>,<br>    <span class="hljs-attr">routes</span>: [<br>      &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/admin&#x27;</span>, <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/admin/sub-page&#x27;</span> &#125;,<br>      &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/admin/sub-page&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;./Admin&#x27;</span> &#125;,<br>    ],<br>  &#125;,<br>  &#123; <span class="hljs-attr">icon</span>: <span class="hljs-string">&#x27;table&#x27;</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/list&#x27;</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;./TableList&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;è¡¨æ ¼é¡µ&#x27;</span> &#125;,<br>  &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/welcome&#x27;</span> &#125;,<br>  &#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;*&#x27;</span>, <span class="hljs-attr">layout</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">component</span>: <span class="hljs-string">&#x27;./404&#x27;</span> &#125;,<br>];<br></code></pre></td></tr></table></figure></li><li><p>åˆ é™¤<code>src\tests</code></p></li></ul></li><li><p>é‡æ–°å®‰è£…ä¾èµ–ï¼Œé‡å¤ç¬¬äº”æ­¥ï¼Œç¡®è®¤æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yarn<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯</tag>
      
      <tag>åˆå§‹åŒ–</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ­å»ºä¸ƒç‰›äº‘å›¾åºŠæå‡ç™¾å€å†™ä½œæ•ˆç‡</title>
    <link href="/2024/04/29/%E6%90%AD%E5%BB%BA%E4%B8%83%E7%89%9B%E4%BA%91%E5%9B%BE%E5%BA%8A%E6%8F%90%E5%8D%87%E7%99%BE%E5%80%8D%E5%86%99%E4%BD%9C%E6%95%88%E7%8E%87/"/>
    <url>/2024/04/29/%E6%90%AD%E5%BB%BA%E4%B8%83%E7%89%9B%E4%BA%91%E5%9B%BE%E5%BA%8A%E6%8F%90%E5%8D%87%E7%99%BE%E5%80%8D%E5%86%99%E4%BD%9C%E6%95%88%E7%8E%87/</url>
    
    <content type="html"><![CDATA[<h2 id="ä¸ƒç‰›äº‘"><a href="#ä¸ƒç‰›äº‘" class="headerlink" title="ä¸ƒç‰›äº‘"></a>ä¸ƒç‰›äº‘</h2><p><strong>é…ç½®</strong><br>ä¸‹é¢è®²ä¸€ä¸‹å¦‚ä½•é…ç½®ï¼š</p><ol><li><p>æ³¨å†Œä¸ƒç‰›äº‘è´¦å·<br>ç™»å½•ä¸ƒç‰›å®˜ç½‘ï¼Œå…ˆæ³¨å†Œä¸€ä¸ªä¸ƒç‰›äº‘çš„è´¦å·ï¼Œè¿™é‡Œæ³¨æ„ï¼Œç”¨æˆ·ç±»å‹é€‰æ‹©ä¸ªäººè´¦å·ï¼Œç„¶åè¿›è¡Œå®åè®¤è¯ã€‚</p></li><li><p>åˆ›å»ºä¸ƒç‰›äº‘å­˜å‚¨ç©ºé—´</p><p><img src="http://cdn.ohheng.cn/202404271443412.png" alt="img"></p></li><li><p>ç»™è‡ªå·±çš„åŸŸåæ·»åŠ äºŒçº§åŸŸåï¼Œå› ä¸ºæˆ‘çš„åŸŸåæ˜¯é˜¿é‡Œäº‘çš„ï¼Œæ‰€ä»¥è¿™é‡Œç”¨é˜¿é‡Œäº‘çš„è®²äº†</p></li></ol><p>  è¿›å…¥é˜¿é‡Œäº‘æ§åˆ¶å°ï¼šã€äº‘è§£æDNSã€‘-&gt;ã€åŸŸåè§£æã€‘-&gt;ã€è§£æè®¾ç½®ã€‘</p><p>  <img src="http://cdn.ohheng.cn/202404271443365.png" alt="img">ç„¶åæ·»åŠ ä¸€ä¸ªäºŒçº§åŸŸåï¼Œè¿™ä¸ªå®Œäº†å…ˆä¸è¦å…³ï¼Œç­‰ä¸‹è¿˜è¦æ”¹</p><ol start="4"><li>ç»‘å®šäºŒçº§åŸŸå<br>è¿›å…¥ä¸ƒç‰›äº‘åŸŸåç»‘å®šé¡µé¢ï¼Œç‚¹å‡»æ·»åŠ åŸŸåï¼Œç„¶åä¸‹å›¾åªéœ€è¦æŠŠåˆšåˆšé…ç½®çš„åŸŸåå†™ä¸Šï¼Œç„¶åå…¶ä½™é»˜è®¤å°±è¡Œï¼Œç‚¹å‡»åˆ›å»º</li></ol><p>  <img src="http://cdn.ohheng.cn/202404271443035.png" alt="img"></p><p>ç„¶åå›åˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼Œè·Ÿç€ä¸‹å›¾æ“ä½œ</p><p><img src="http://cdn.ohheng.cn/202404271443133.png" alt="image-20240427133925927"></p><p><img src="http://cdn.ohheng.cn/202404271443376.png" alt="image-20240427133938256"></p><p>ç„¶åå›åˆ°åˆšåˆšæ·»åŠ åŸŸåçš„é¡µé¢ï¼Œç‚¹å‡»åˆšåˆšæ·»åŠ çš„åŸŸåï¼ŒæŠŠ<a href="http://www.baidu.comæ”¹æˆåˆšåˆšå¤åˆ¶çš„ä¸œè¥¿/">www.baidu.comæ”¹æˆåˆšåˆšå¤åˆ¶çš„ä¸œè¥¿</a></p><p>é…ç½®å®Œäº†ä¹‹åç­‰ä¸€ä¼šï¼Œç³»ç»Ÿå®¡æ ¸å®Œæˆåä¼šå‘é‚®ä»¶ï¼Œç­‰çŠ¶æ€å˜æˆæˆåŠŸè¯´æ˜é…ç½®å®Œæˆäº†</p><p><img src="http://cdn.ohheng.cn/202404271443099.png" alt="img"></p><p>è®°å¾—æŸ¥çœ‹å¤–é“¾åŸŸåä¿®æ”¹ä¸ºè‡ªå·±çš„ï¼Œä»¥åŠç¡®è®¤è®¿é—®æ§åˆ¶æ˜¯å¦ä¸ºå…¬å¼€</p><p><img src="http://cdn.ohheng.cn/202404271447536.png" alt="image-20240427144720493"></p><h2 id="PicGo"><a href="#PicGo" class="headerlink" title="PicGo"></a>PicGo</h2><p>ä¸‹è½½å®‰è£…PicGo </p><p>ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/Molunerfinn/PicGo/releases">https://github.com/Molunerfinn/PicGo/releases</a></p><p>æŒ‘é€‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿï¼ˆWin&#x2F;Linux&#x2F;Macï¼‰æ¥ä¸‹è½½ä¸€ä¸ªå®‰è£…åŒ…ï¼š</p><p><img src="http://cdn.ohheng.cn/202404271443350.png" alt="image-20240427141940822"></p><p>è¿›å…¥ä¸ƒç‰›äº‘é¡µé¢ï¼Œå³ä¸Šè§’å¤´åƒ-&gt;å¯†é’¥ç®¡ç†-&gt;å¤åˆ¶ AccessKeyå’ŒSecretKeyåˆ°PicGoä¸­ï¼Œ</p><p>å­˜å‚¨ç©ºé—´åæ˜¯ä½ ç¬¬äºŒæ­¥å»ºç«‹çš„ç©ºé—´çš„åå­—<br>ç½‘å€æ˜¯åˆšåˆšç»‘å®šçš„é‚£ä¸ªäºŒçº§åŸŸå<br>å­˜å‚¨åŒºåŸŸï¼šä¸ƒç‰›äº‘çš„å­˜å‚¨åŒºåŸŸï¼ˆåä¸œ z0ï¼ŒååŒ— z1ï¼Œåå— z2ï¼ŒåŒ—ç¾ na0ï¼Œä¸œå—äºš as0 ï¼‰ï¼Œæ ¹æ®ä½ ç©ºé—´æ‰€åœ¨çš„åŒºåŸŸï¼Œå¡«å¯¹åº”çš„ä»£ç </p><p><img src="http://cdn.ohheng.cn/202404271443329.png" alt="image-20220330004201058"></p><h2 id="Typora"><a href="#Typora" class="headerlink" title="Typora"></a>Typora</h2><p>yporaå¼€å¯å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ </p><p>æœ€åï¼Œæ‰“å¼€Typoraï¼Œåœ¨åå¥½è®¾ç½®ä¸­ï¼ŒæŒ‰ç…§å›¾ä¸­é…ç½®å³å¯ï¼š</p><p><img src="http://cdn.ohheng.cn/202404271444040.png" alt="image-20240427144413998"></p><blockquote><p>å‚è€ƒCSDN:<code>https://blog.csdn.net/qq_46311811/article/details/123836233</code></p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>åŸŸå</tag>
      
      <tag>DNS</tag>
      
      <tag>Typora</tag>
      
      <tag>PicGo</tag>
      
      <tag>å›¾åºŠ</tag>
      
      <tag>ä¸ƒç‰›äº‘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GitHubPagesç»‘å®šè‡ªå®šä¹‰åŸŸå</title>
    <link href="/2024/04/29/GitHubPages%E7%BB%91%E5%AE%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D/"/>
    <url>/2024/04/29/GitHubPages%E7%BB%91%E5%AE%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9F%9F%E5%90%8D/</url>
    
    <content type="html"><![CDATA[<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><p>åœ¨é˜¿é‡Œäº‘é…ç½® DNS è®°å½•ï¼š</p><ol><li>ç™»å½•åˆ°é˜¿é‡Œäº‘æ§åˆ¶å°ã€‚</li><li>è½¬åˆ°<strong>ã€äº‘è§£æDNSã€‘&gt;ã€åŸŸåè§£æã€‘&gt;ã€è§£æè®¾ç½®ã€‘</strong>ã€‚</li><li>æ·»åŠ ä»¥ä¸‹å››æ¡ A è®°å½•ï¼š</li></ol><ul><li>ä¸»æœºè®°å½•ï¼š**@**</li><li>è®°å½•ç±»å‹ï¼š<strong>A</strong></li><li>è®°å½•å€¼ï¼š<code>185.199.108.153</code></li><li>TTLï¼šæ ¹æ®æ‚¨çš„éœ€æ±‚è®¾ç½®ï¼Œå»ºè®®è®¾ç½®ä¸º 600ï¼ˆ10 åˆ†é’Ÿï¼‰ã€‚</li><li>æ·»åŠ ç¬¬äºŒæ¡ A è®°å½•ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œä½†å°†è®°å½•å€¼æ›´æ”¹ä¸º <code>185.199.109.153</code>ã€‚</li><li>æ·»åŠ ç¬¬ä¸‰æ¡ A è®°å½•ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œä½†å°†è®°å½•å€¼æ›´æ”¹ä¸º <code>185.199.110.153</code>ã€‚</li><li>æ·»åŠ ç¬¬å››æ¡ A è®°å½•ï¼Œé‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œä½†å°†è®°å½•å€¼æ›´æ”¹ä¸º <code>185.199.111.153</code>ã€‚</li></ul><ol start="5"><li>å¦‚æœæ‚¨å¸Œæœ›ä½¿ç”¨ www å­åŸŸå ï¼Œä¾‹å¦‚ <a href="http://www.example.com/">www.example.com</a> ï¼Œåˆ™éœ€è¦æ·»åŠ ä¸€æ¡ CNAME è®°å½•ï¼š</li></ol><ul><li>ä¸»æœºè®°å½•ï¼šwww</li><li>è®°å½•ç±»å‹ï¼šCNAME</li><li>è®°å½•å€¼ï¼šç”¨æˆ·å. Github. Ioï¼ˆå°†ç”¨æˆ·åæ›¿æ¢ä¸ºæ‚¨çš„ GitHub ç”¨æˆ·åï¼‰</li><li>TTLï¼šæ ¹æ®æ‚¨çš„éœ€æ±‚è®¾ç½®ï¼Œå»ºè®®è®¾ç½®ä¸º 600ï¼ˆ10 åˆ†é’Ÿï¼‰ã€‚</li></ul><p>ç­‰å¾… DNS è§£æç”Ÿæ•ˆã€‚è¿™å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œé€šå¸¸åœ¨å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ä¹‹é—´ï¼Œæœ€å¤šå¯èƒ½éœ€è¦ 48 å°æ—¶ã€‚</p><p>å®Œæˆè¿™äº›æ­¥éª¤åï¼Œæ‚¨çš„åŸŸååº”è¯¥ä¼šæˆåŠŸæŒ‡å‘æ‚¨çš„ GitHub ä¸ªäººä¸»é¡µã€‚</p><p>å¦‚æœåœ¨å®Œæˆä¸Šè¿°æ­¥éª¤åä»æ— æ³•è®¿é—®æ‚¨çš„åŸŸåï¼Œè¯·æ£€æŸ¥æ‚¨çš„è®¾ç½®æˆ–ç­‰å¾… DNS è§£æç”Ÿæ•ˆã€‚</p><h2 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h2><h3 id="A-è¿™äº›è®°å½•å€¼æ˜¯åœ¨åšä»€ä¹ˆ"><a href="#A-è¿™äº›è®°å½•å€¼æ˜¯åœ¨åšä»€ä¹ˆ" class="headerlink" title="A. è¿™äº›è®°å½•å€¼æ˜¯åœ¨åšä»€ä¹ˆ"></a>A. è¿™äº›è®°å½•å€¼æ˜¯åœ¨åšä»€ä¹ˆ</h3><p>è¿™é‡Œçš„è®°å½•å€¼æ˜¯ DNS è®°å½•çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº† A è®°å½•å’Œ CNAME è®°å½•ã€‚ä¸‹é¢æ˜¯è¿™äº›è®°å½•å€¼çš„è§£é‡Šï¼š</p><ol><li><p><strong>A è®°å½•ï¼ˆåœ°å€è®°å½•ï¼‰ï¼š</strong><br>A è®°å½•ç”¨äºå°†åŸŸåè§£æåˆ°ä¸€ä¸ª IPv4 åœ°å€ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†å››ä¸ª A è®°å½•ï¼Œæ¯ä¸ªè®°å½•å€¼æ˜¯ GitHub Pages çš„æœåŠ¡å™¨ IP åœ°å€ï¼š</p><ul><li><p>185.199.108.153</p></li><li><p>185.199.109.153</p></li><li><p>185.199.110.153</p></li><li><p>185.199.111.153</p></li></ul><p>å½“ç”¨æˆ·è®¿é—®æ‚¨çš„åŸŸåæ—¶ï¼ˆä¾‹å¦‚ï¼šexample.comï¼‰ï¼ŒDNS æœåŠ¡å™¨ä¼šæŸ¥æ‰¾ä¸è¯¥åŸŸåå…³è”çš„ IP åœ°å€ã€‚é€šè¿‡è®¾ç½®è¿™äº› A è®°å½•ï¼Œæ‚¨å‘Šè¯‰ DNS æœåŠ¡å™¨ï¼Œæ‚¨çš„åŸŸååº”è¯¥è§£æåˆ°è¿™å››ä¸ª GitHub Pages æœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·è®¿é—®æ‚¨çš„åŸŸåæ—¶ï¼Œä»–ä»¬å°†è¢«å¼•å¯¼åˆ°æ‰˜ç®¡åœ¨ GitHub Pages ä¸Šçš„ç½‘ç«™ã€‚</p></li><li><p><strong>CNAME è®°å½•ï¼ˆè§„èŒƒåç§°è®°å½•ï¼‰ï¼š</strong><br>CNAME è®°å½•ç”¨äºå°†ä¸€ä¸ªåŸŸåï¼ˆé€šå¸¸æ˜¯å­åŸŸåï¼‰æ˜ å°„åˆ°å¦ä¸€ä¸ªåŸŸåã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª CNAME è®°å½•ï¼Œå°† www å­åŸŸåï¼ˆå¦‚ï¼š<a href="http://www.example.com)æ˜ å°„åˆ°æ‚¨çš„/">www.example.comï¼‰æ˜ å°„åˆ°æ‚¨çš„</a> GitHub Pages ä¸ªäººä¸»é¡µåŸŸåï¼ˆå¦‚ï¼šç”¨æˆ·å.github.ioï¼Œå°† ç”¨æˆ·å æ›¿æ¢ä¸ºæ‚¨çš„ GitHub ç”¨æˆ·åï¼‰ã€‚</p><p>æ·»åŠ è¿™ä¸ª CNAME è®°å½•åï¼Œå½“ç”¨æˆ·è®¿é—® <a href="http://www.example.com/">www.example.com</a> æ—¶ï¼Œä»–ä»¬å°†è¢«å¼•å¯¼åˆ°ä¸ ç”¨æˆ·å.github.io å…³è”çš„ç›¸åŒ GitHub Pages ç½‘ç«™ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ç”¨æˆ·åœ¨è®¿é—® example.com å’Œ <a href="http://www.example.com/">www.example.com</a> æ—¶çœ‹åˆ°çš„å†…å®¹æ˜¯ä¸€è‡´çš„ã€‚</p></li></ol><p>æ€»ä¹‹ï¼Œè¿™äº›è®°å½•å€¼ç”¨äºæŒ‡å¯¼ DNS è§£æè¿‡ç¨‹ï¼Œå°†æ‚¨çš„è‡ªå®šä¹‰åŸŸåè§£æåˆ°æ‰˜ç®¡åœ¨ GitHub Pages ä¸Šçš„ç½‘ç«™ã€‚è¿™æ ·ï¼Œæ— è®ºç”¨æˆ·è®¿é—®æ‚¨çš„è£¸åŸŸåï¼ˆå¦‚ï¼šexample.comï¼‰è¿˜æ˜¯å¸¦æœ‰ www å­åŸŸåçš„ç‰ˆæœ¬ï¼ˆå¦‚ï¼š<a href="http://www.example.com),ä»–ä»¬éƒ½ä¼šçœ‹åˆ°æ‚¨çš„/">www.example.comï¼‰ï¼Œä»–ä»¬éƒ½ä¼šçœ‹åˆ°æ‚¨çš„</a> GitHub ä¸ªäººä¸»é¡µã€‚</p><h3 id="B-å¦‚æœåŸŸåè§£æè¿˜æ˜¯å­˜åœ¨é—®é¢˜"><a href="#B-å¦‚æœåŸŸåè§£æè¿˜æ˜¯å­˜åœ¨é—®é¢˜" class="headerlink" title="B. å¦‚æœåŸŸåè§£æè¿˜æ˜¯å­˜åœ¨é—®é¢˜"></a>B. å¦‚æœåŸŸåè§£æè¿˜æ˜¯å­˜åœ¨é—®é¢˜</h3><p>å¦‚æœæ‚¨çš„åŸŸåè§£æä»ç„¶å­˜åœ¨é—®é¢˜ï¼Œæ‚¨å¯ä»¥å°è¯•ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p><ol><li><p>æ£€æŸ¥æ‚¨çš„ DNS è®¾ç½®æ˜¯å¦æ­£ç¡®ï¼š</p><ul><li>ç¡®ä¿æ‚¨åœ¨é˜¿é‡Œäº‘çš„åŸŸåç®¡ç†ä¸­å·²ç»æ·»åŠ äº†æ­£ç¡®çš„ A è®°å½•å’Œ CNAME è®°å½•ã€‚</li><li>ç¡®ä¿æ‚¨åœ¨ GitHub ä»“åº“ä¸­æ·»åŠ äº†æ­£ç¡®çš„ CNAME æ–‡ä»¶ï¼Œå†…å®¹åº”ä¸ºæ‚¨çš„è‡ªå®šä¹‰åŸŸåã€‚</li><li>å¦‚æœæ‚¨åœ¨è®¾ç½®è¿‡ç¨‹ä¸­æ›´æ”¹äº†ä»»ä½•è®¾ç½®ï¼Œè¯·ç¡®ä¿ä¿å­˜æ›´æ”¹ã€‚</li></ul></li><li><p>ç­‰å¾… DNS è§£æç”Ÿæ•ˆï¼š</p><ul><li>è¯·è€å¿ƒç­‰å¾…ï¼Œå› ä¸º DNS è§£æå¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´ï¼ˆä»å‡ åˆ†é’Ÿåˆ° 48 å°æ—¶ï¼‰ã€‚</li><li>æ‚¨å¯ä»¥ä½¿ç”¨åœ¨çº¿ DNS æŸ¥è¯¢å·¥å…·ï¼ˆå¦‚ Google Public DNS æˆ–å…¶ä»–ç¬¬ä¸‰æ–¹å·¥å…·ï¼‰æ¥æ£€æŸ¥æ‚¨çš„åŸŸåè§£æçŠ¶æ€ã€‚</li></ul></li><li><p>æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’Œ DNS ç¼“å­˜ï¼š</p><ul><li>æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ä»¥ç¡®ä¿æ‚¨æŸ¥çœ‹çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„ç½‘ç«™ã€‚</li><li>å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Windowsï¼Œå¯ä»¥å°è¯•é€šè¿‡å‘½ä»¤æç¤ºç¬¦è¿è¡Œ <code>ipconfig /flushdns</code> å‘½ä»¤æ¥æ¸…é™¤ DNS ç¼“å­˜ã€‚</li><li>å¯¹äº macOSï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>sudo killall -HUP mDNSResponder</code> å‘½ä»¤æ¥æ¸…é™¤ DNS ç¼“å­˜ã€‚</li><li>åœ¨ Linux ä¸Šï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>sudo systemctl restart nscd</code> æˆ– <code>sudo /etc/init.d/nscd restart</code> å‘½ä»¤æ¸…é™¤ DNS ç¼“å­˜ã€‚</li></ul></li><li><p>æ£€æŸ¥é˜²ç«å¢™æˆ–å®‰å…¨è®¾ç½®ï¼š</p><ul><li>æŸäº›é˜²ç«å¢™æˆ–å®‰å…¨è®¾ç½®å¯èƒ½ä¼šé˜»æ­¢åŸŸåè§£æã€‚è¯·æ£€æŸ¥æ‚¨çš„é˜²ç«å¢™æˆ–å®‰å…¨è®¾ç½®ï¼Œä»¥ç¡®ä¿å®ƒä»¬æ²¡æœ‰é˜»æ­¢æ‚¨çš„åŸŸåè§£æã€‚</li></ul></li><li><p>å¯»æ±‚æŠ€æœ¯æ”¯æŒï¼š</p><ul><li>å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·è”ç³»é˜¿é‡Œäº‘å’Œ GitHub Pages çš„æŠ€æœ¯æ”¯æŒï¼Œä»–ä»¬å¯ä»¥å¸®åŠ©æ‚¨è¿›ä¸€æ­¥è¯Šæ–­é—®é¢˜ã€‚</li></ul></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>åŸŸå</tag>
      
      <tag>é˜¿é‡Œäº‘</tag>
      
      <tag>DNS</tag>
      
      <tag>GitHub</tag>
      
      <tag>Pages</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½¿ç”¨Nginxæˆ–ä¿®æ”¹åç«¯ä»£ç è§£å†³è·¨åŸŸé—®é¢˜</title>
    <link href="/2024/04/29/%E4%BD%BF%E7%94%A8Nginx%E6%88%96%E4%BF%AE%E6%94%B9%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/"/>
    <url>/2024/04/29/%E4%BD%BF%E7%94%A8Nginx%E6%88%96%E4%BF%AE%E6%94%B9%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>æµè§ˆå™¨ä¸ºäº†ç”¨æˆ·çš„å®‰å…¨ï¼Œä»…å…è®¸å‘ <strong>åŒåŸŸåã€åŒç«¯å£</strong> çš„æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚</p><p>å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ</p><p>æœ€ç›´æ¥çš„æ–¹å¼ï¼šæŠŠåŸŸåã€ç«¯å£æ”¹æˆç›¸åŒçš„</p><h3 id="æ·»åŠ è·¨åŸŸå¤´"><a href="#æ·»åŠ è·¨åŸŸå¤´" class="headerlink" title="æ·»åŠ è·¨åŸŸå¤´"></a>æ·»åŠ è·¨åŸŸå¤´</h3><p>è®©æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼šå…è®¸è·¨åŸŸï¼ˆè¿”å› cross-origin-allow å“åº”å¤´ï¼‰</p><h4 id="1-ç½‘å…³æ”¯æŒï¼ˆNginxï¼‰"><a href="#1-ç½‘å…³æ”¯æŒï¼ˆNginxï¼‰" class="headerlink" title="1. ç½‘å…³æ”¯æŒï¼ˆNginxï¼‰"></a>1. ç½‘å…³æ”¯æŒï¼ˆNginxï¼‰</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># è·¨åŸŸé…ç½®</span><br><span class="hljs-section">location</span><span class="hljs-regexp"> ^~</span> /api/ &#123;<br>    <span class="hljs-attribute">proxy_pass</span> http://127.0.0.1:8080/api/;<br>    <span class="hljs-attribute">add_header</span> <span class="hljs-string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="hljs-variable">$http_origin</span>;<br>    <span class="hljs-attribute">add_header</span> <span class="hljs-string">&#x27;Access-Control-Allow-Credentials&#x27;</span> <span class="hljs-string">&#x27;true&#x27;</span>;<br>    <span class="hljs-attribute">add_header</span> Access-Control-Allow-Methods <span class="hljs-string">&#x27;GET, POST, OPTIONS&#x27;</span>;<br>    <span class="hljs-attribute">add_header</span> Access-Control-Allow-Headers <span class="hljs-string">&#x27;*&#x27;</span>;<br>    <span class="hljs-attribute">if</span> (<span class="hljs-variable">$request_method</span> = <span class="hljs-string">&#x27;OPTIONS&#x27;</span>) &#123;<br>        <span class="hljs-attribute">add_header</span> <span class="hljs-string">&#x27;Access-Control-Allow-Credentials&#x27;</span> <span class="hljs-string">&#x27;true&#x27;</span>;<br>        <span class="hljs-attribute">add_header</span> <span class="hljs-string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="hljs-variable">$http_origin</span>;<br>        <span class="hljs-attribute">add_header</span> <span class="hljs-string">&#x27;Access-Control-Allow-Methods&#x27;</span> <span class="hljs-string">&#x27;GET, POST, OPTIONS&#x27;</span>;<br>        <span class="hljs-attribute">add_header</span> <span class="hljs-string">&#x27;Access-Control-Allow-Headers&#x27;</span> <span class="hljs-string">&#x27;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range&#x27;</span>;<br>        <span class="hljs-attribute">add_header</span> <span class="hljs-string">&#x27;Access-Control-Max-Age&#x27;</span> <span class="hljs-number">1728000</span>;<br>        <span class="hljs-attribute">add_header</span> <span class="hljs-string">&#x27;Content-Type&#x27;</span> <span class="hljs-string">&#x27;text/plain; charset=utf-8&#x27;</span>;<br>        <span class="hljs-attribute">add_header</span> <span class="hljs-string">&#x27;Content-Length&#x27;</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-attribute">return</span> <span class="hljs-number">204</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-ä¿®æ”¹åç«¯æœåŠ¡"><a href="#2-ä¿®æ”¹åç«¯æœåŠ¡" class="headerlink" title="2. ä¿®æ”¹åç«¯æœåŠ¡"></a>2. ä¿®æ”¹åç«¯æœåŠ¡</h4><ol><li><p>é…ç½® @CrossOrigin æ³¨è§£</p></li><li><p>æ·»åŠ  web å…¨å±€è¯·æ±‚æ‹¦æˆªå™¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcConfg</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> &#123;<br> <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCorsMappings</span><span class="hljs-params">(CorsRegistry registry)</span> &#123;<br>        <span class="hljs-comment">//è®¾ç½®å…è®¸è·¨åŸŸçš„è·¯å¾„</span><br>        registry.addMapping(<span class="hljs-string">&quot;/**&quot;</span>)<br>                <span class="hljs-comment">//è®¾ç½®å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸå</span><br>                <span class="hljs-comment">//å½“**Credentialsä¸ºtrueæ—¶ï¼Œ**Originä¸èƒ½ä¸ºæ˜Ÿå·ï¼Œéœ€ä¸ºå…·ä½“çš„ipåœ°å€ã€å¦‚æœæ¥å£ä¸å¸¦cookie,ipæ— éœ€è®¾æˆå…·ä½“ipã€‘</span><br>                .allowedOrigins(<span class="hljs-string">&quot;http://localhost:9527&quot;</span>, <span class="hljs-string">&quot;http://127.0.0.1:9527&quot;</span>, <span class="hljs-string">&quot;http://127.0.0.1:8082&quot;</span>, <span class="hljs-string">&quot;http://127.0.0.1:8083&quot;</span>)<br>                <span class="hljs-comment">//æ˜¯å¦å…è®¸è¯ä¹¦ ä¸å†é»˜è®¤å¼€å¯</span><br>                .allowCredentials(<span class="hljs-literal">true</span>)<br>                <span class="hljs-comment">//è®¾ç½®å…è®¸çš„æ–¹æ³•</span><br>                .allowedMethods(<span class="hljs-string">&quot;*&quot;</span>)<br>                <span class="hljs-comment">//è·¨åŸŸå…è®¸æ—¶é—´</span><br>                .maxAge(<span class="hljs-number">3600</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>å®šä¹‰æ–°çš„ corsFilter Beanï¼Œå‚è€ƒï¼š<a href="https://www.jianshu.com/p/b02099a435bd">https://www.jianshu.com/p/b02099a435bd</a></p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>è·¨åŸŸ</tag>
      
      <tag>Nginx</tag>
      
      <tag>ç½‘å…³</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBooté¡¹ç›®åˆå§‹æ¨¡æ¿</title>
    <link href="/2024/04/29/SpringBoot%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E6%A8%A1%E6%9D%BF/"/>
    <url>/2024/04/29/SpringBoot%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E6%A8%A1%E6%9D%BF/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Java SpringBoot é¡¹ç›®åˆå§‹æ¨¡æ¿ï¼Œæ•´åˆäº†å¸¸ç”¨æ¡†æ¶å’Œç¤ºä¾‹ä»£ç ï¼Œå¤§å®¶å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå¿«é€Ÿå¼€å‘è‡ªå·±çš„é¡¹ç›®ã€‚</p><p> GitHubä»“åº“ï¼š<code>https://github.com/Ohheng/sptingboot-init</code></p></blockquote><h2 id="æ¨¡æ¿åŠŸèƒ½"><a href="#æ¨¡æ¿åŠŸèƒ½" class="headerlink" title="æ¨¡æ¿åŠŸèƒ½"></a>æ¨¡æ¿åŠŸèƒ½</h2><ul><li>Spring Boot 2.7.0ï¼ˆè´¼æ–°ï¼‰</li><li>Spring MVC</li><li>MySQL é©±åŠ¨</li><li>MyBatis</li><li>MyBatis Plus</li><li>Spring Session Redis åˆ†å¸ƒå¼ç™»å½•</li><li>Spring AOP</li><li>Apache Commons Lang3 å·¥å…·ç±»</li><li>Lombok æ³¨è§£</li><li>Swagger + Knife4j æ¥å£æ–‡æ¡£</li><li>Spring Boot è°ƒè¯•å·¥å…·å’Œé¡¹ç›®å¤„ç†å™¨</li><li>å…¨å±€è¯·æ±‚å“åº”æ‹¦æˆªå™¨ï¼ˆè®°å½•æ—¥å¿—ï¼‰</li><li>å…¨å±€å¼‚å¸¸å¤„ç†å™¨</li><li>è‡ªå®šä¹‰é”™è¯¯ç </li><li>å°è£…é€šç”¨å“åº”ç±»</li><li>ç¤ºä¾‹ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æœç´¢åŠŸèƒ½</li><li>ç¤ºä¾‹å•å…ƒæµ‹è¯•ç±»</li><li>ç¤ºä¾‹ SQLï¼ˆç”¨æˆ·è¡¨ï¼‰</li></ul><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><ol><li>å…¨å±€æ›¿æ¢<code>ctrl+shift+r</code></li></ol><p><img src="http://cdn.ohheng.cn/202404292132269.png" alt="image-20240329163141569"></p><ol><li><p>ä¿®æ”¹pomæ–‡ä»¶ä¸­çš„æè¿°æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>LinkSauce APIå¼€æ”¾å¹³å°<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹<code>application.yml</code>æ–‡ä»¶ä¸­mysqlå’Œredisçš„é…ç½®</p></li><li><p>å…¨å±€æ›¿æ¢æ•°æ®åº“åç§°</p><p><img src="http://cdn.ohheng.cn/202404292132273.png" alt="image-20240329164528352"></p></li><li><p>å…¨å±€æ›¿æ¢åŒ…å , å¹¶æ‰‹åŠ¨ä¿®æ”¹åŒ…åç§°</p><p><img src="http://cdn.ohheng.cn/202404292132251.png" alt="image-20240329164817957"></p><p><img src="http://cdn.ohheng.cn/202404292132271.png" alt="image-20240329165114772"></p></li><li><p>åˆ·æ–°maven</p></li><li><p>è¿è¡Œå¹¶æµ‹è¯•,åˆ©ç”¨swaggeræµ‹è¯•å¢åˆ æ”¹æŸ¥</p><blockquote><p>è®¿é—®<code>http://localhost:7529/api/doc.html#/home</code></p></blockquote><p><img src="http://cdn.ohheng.cn/202404292132259.png" alt="image-20240329165918440"></p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>SpringBoot</tag>
      
      <tag>åˆå§‹åŒ–</tag>
      
      <tag>åç«¯</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¦‚ä½•ç”¨Hexoæ­å»ºä¸ªäººåšå®¢?</title>
    <link href="/2024/04/29/%E5%A6%82%E4%BD%95%E7%94%A8Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <url>/2024/04/29/%E5%A6%82%E4%BD%95%E7%94%A8Hexo%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<p>æˆ‘çš„ä¸ªäººåšå®¢æ­å»ºæˆåŠŸå•¦ï¼</p><p>è¿™ç¯‡æ–‡ç« ä¼šç»™å¤§å®¶åˆ†äº«æˆ‘æ˜¯å¦‚ä½•ä»0å¼€å§‹æ­å»ºæˆ‘çš„ä¸ªäººç‹¬ç«‹åšå®¢çš„</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å§</p><p><strong>æ–‡ç« æ¯”è¾ƒç²¾ç®€ï¼Œæ²¡æœ‰åºŸè¯ï¼Œä¸è¦è·³æ­¥</strong></p><h2 id="ä¸€ã€å‡†å¤‡å·¥å…·"><a href="#ä¸€ã€å‡†å¤‡å·¥å…·" class="headerlink" title="ä¸€ã€å‡†å¤‡å·¥å…·"></a>ä¸€ã€å‡†å¤‡å·¥å…·</h2><h3 id="1ã€å®˜ç½‘å®‰è£…Nodejs-å»ºè®®ä½¿ç”¨-Node-js-12-0-åŠä»¥ä¸Šç‰ˆæœ¬"><a href="#1ã€å®˜ç½‘å®‰è£…Nodejs-å»ºè®®ä½¿ç”¨-Node-js-12-0-åŠä»¥ä¸Šç‰ˆæœ¬" class="headerlink" title="1ã€å®˜ç½‘å®‰è£…Nodejs(å»ºè®®ä½¿ç”¨ Node.js 12.0 åŠä»¥ä¸Šç‰ˆæœ¬)"></a>1ã€å®˜ç½‘å®‰è£…Nodejs(å»ºè®®ä½¿ç”¨ Node.js 12.0 åŠä»¥ä¸Šç‰ˆæœ¬)</h3><p>NodeJsæ˜¯Hexoæ‰€å¿…éœ€çš„ç¯å¢ƒã€‚</p><p>ç‚¹å‡» NodeJs å®˜ç½‘ï¼Œä¸‹è½½å·¦è¾¹é‚£ä¸ªå³å¯ï¼Œä¸‹è½½å¥½ä¸€ç›´ nextï¼Œé€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹ä½ç½®åœ¨ä¸€ç›´ next å³å¯å®Œæˆã€‚å®‰è£…Node.jsä¼šåŒ…å«ç¯å¢ƒå˜é‡åŠnpmçš„å®‰è£…ã€‚</p><p><img src="http://cdn.ohheng.cn/202404291759751.png"></p><p>éªŒè¯å®‰è£…å®Œæˆcmdä¸­è¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">node -v<br>npm -v<br>è¿”å›ç‰ˆæœ¬å·ä»£è¡¨å®‰è£…å®Œæˆã€‚<br></code></pre></td></tr></table></figure><h3 id="2ã€å®‰è£…git"><a href="#2ã€å®‰è£…git" class="headerlink" title="2ã€å®‰è£…git"></a>2ã€å®‰è£…git</h3><p>Gitæ˜¯å¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨äºæ•æ·é«˜æ•ˆåœ°å¤„ç†é¡¹ç›®ã€‚</p><p>æˆ‘ä»¬ç½‘ç«™åœ¨æœ¬åœ°æ­å»ºå¥½äº†ï¼Œéœ€è¦ä½¿ç”¨GitåŒæ­¥åˆ°äº‘æœåŠ¡å™¨æˆ–è€…GitHubçš„ä»£ç åº“é‡Œã€‚ç‚¹å‡» git å®˜ç½‘ï¼Œä¸‹è½½å®‰è£…åŒ…ã€‚ç‚¹å‡» nextï¼Œé€‰æ‹©æ–‡ä»¶å¤¹ä½ç½®ï¼Œç„¶åä¸€ç›´ next åˆ°åº•å°±è¡Œäº†ï¼Œé€‰æ‹©é»˜è®¤é…ç½®å°±å¥½ï¼Œé»˜è®¤é…ç½®ä¼šå°†ç¯å¢ƒå˜é‡é…ç½®å¥½çš„ã€‚å®‰è£…æˆåŠŸå³å‡»é¼ æ ‡å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="http://cdn.ohheng.cn/202404291759753.png"></p><p><strong>æ¥ä¸‹æ¥æˆ‘ä»¬æµ‹è¯•ä¸‹æ˜¯å¦éƒ½ä¸‹è½½æˆåŠŸ</strong></p><p>ç®¡ç†å‘˜è¿è¡Œcmdï¼Œä¾æ¬¡è¾“å…¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">node -v<br>npm -vï¼ˆè¿™ä¸ªæ˜¯nodeé™„å¸¦çš„ï¼‰<br>git -v<br></code></pre></td></tr></table></figure><h3 id="3ã€ä¸‹è½½å®‰è£…Hexoåšå®¢æ¡†æ¶"><a href="#3ã€ä¸‹è½½å®‰è£…Hexoåšå®¢æ¡†æ¶" class="headerlink" title="3ã€ä¸‹è½½å®‰è£…Hexoåšå®¢æ¡†æ¶"></a>3ã€ä¸‹è½½å®‰è£…Hexoåšå®¢æ¡†æ¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install -g hexo-cli<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åˆå§‹åŒ–ä¸€ä¸‹hexoï¼Œï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹é¼ æ ‡å³é”®gitbashåè¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo init blog<br></code></pre></td></tr></table></figure><p>â€œblogâ€æ˜¯ä½ è¦ç”Ÿæˆåšå®¢çš„æ–‡ä»¶å¤¹åç§°ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥å–åã€‚ç”Ÿæˆçš„æ–‡ä»¶å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="http://cdn.ohheng.cn/202404291759757.png"></p><p>è¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo g<br>hexo s<br></code></pre></td></tr></table></figure><p>å®Œæˆåï¼Œæ‰“å¼€æµè§ˆå™¨è¾“å…¥åœ°å€ï¼š<a href="">localhost:4000 </a>å°±å¯ä»¥çœ‹åˆ°ä½ ç”Ÿæˆçš„åšå®¢äº†ã€‚ä½¿ç”¨ctrl+cå¯ä»¥æŠŠæœåŠ¡å…³æ‰ã€‚</p><p><strong>å®‰è£…fluidä¸»é¢˜</strong><br>ä¸»é¢˜ä¸‹è½½ï¼š<a href="https://github.com/fluid-dev/hexo-theme-fluid">https://github.com/fluid-dev/hexo-theme-fluid</a></p><p>è§£å‹å¤åˆ¶åˆ°åšå®¢æ ¹ç›®å½•<code>\themes</code>ç›®å½•ä¸‹ï¼Œæ›´åä¸º<strong>fluid</strong></p><p>ä¿®æ”¹åšå®¢æ ¹ç›®å½•ç›®å½•ä¸‹<code>_config.yml</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">theme: fluid  # æŒ‡å®šä¸»é¢˜<br>language: zh-CN  # æŒ‡å®šè¯­è¨€ï¼Œä¼šå½±å“ä¸»é¢˜æ˜¾ç¤ºçš„è¯­è¨€ï¼ŒæŒ‰éœ€ä¿®æ”¹<br></code></pre></td></tr></table></figure><p>ä¸ªæ€§åŒ–ä¸»é¢˜é¡µé¢ï¼Œæ›´è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å‚è€ƒ<a href="https://hexo.fluid-dev.com/docs/">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="äºŒã€å°†åšå®¢æ‰˜ç®¡åˆ°GitHub"><a href="#äºŒã€å°†åšå®¢æ‰˜ç®¡åˆ°GitHub" class="headerlink" title="äºŒã€å°†åšå®¢æ‰˜ç®¡åˆ°GitHub"></a>äºŒã€å°†åšå®¢æ‰˜ç®¡åˆ°GitHub</h2><h3 id="1ã€GitHubç”Ÿæˆä»£ç åº“"><a href="#1ã€GitHubç”Ÿæˆä»£ç åº“" class="headerlink" title="1ã€GitHubç”Ÿæˆä»£ç åº“"></a>1ã€GitHubç”Ÿæˆä»£ç åº“</h3><p>é¦–å…ˆï¼Œä½ å…ˆè¦æœ‰ä¸€ä¸ªGitHubè´¦æˆ·ã€‚ç‚¹å‡»+å·ï¼Œé€‰æ‹©New repositoryï¼Œæ–°å»ºä»“åº“</p><p><img src="http://cdn.ohheng.cn/202404291759777.png"></p><p>åˆ›å»ºä¸€ä¸ªå’Œä½ ç”¨æˆ·åç›¸åŒçš„ä»“åº“ï¼Œåé¢åŠ **.github.io<strong>ï¼Œåªæœ‰è¿™æ ·ï¼Œå°†æ¥è¦éƒ¨ç½²åˆ°GitHub pageçš„æ—¶å€™ï¼Œæ‰ä¼šè¢«è¯†åˆ«ï¼Œä¹Ÿå°±æ˜¯<code>xxxx.github.io</code>ï¼Œå…¶ä¸­xxxå°±æ˜¯ä½ æ³¨å†ŒGitHubçš„ç”¨æˆ·åï¼Œç‚¹å‡»</strong>create repository**ã€‚</p><p><img src="http://cdn.ohheng.cn/202404291759764.png"></p><h3 id="2ã€æœ¬åœ°SSHç”Ÿæˆå¯†é’¥ï¼Œå°†å…¬é’¥å¤åˆ¶åˆ°äº‘ç«¯"><a href="#2ã€æœ¬åœ°SSHç”Ÿæˆå¯†é’¥ï¼Œå°†å…¬é’¥å¤åˆ¶åˆ°äº‘ç«¯" class="headerlink" title="2ã€æœ¬åœ°SSHç”Ÿæˆå¯†é’¥ï¼Œå°†å…¬é’¥å¤åˆ¶åˆ°äº‘ç«¯"></a>2ã€æœ¬åœ°SSHç”Ÿæˆå¯†é’¥ï¼Œå°†å…¬é’¥å¤åˆ¶åˆ°äº‘ç«¯</h3><p>å›åˆ°æœ¬åœ°ä¸»æœºgit bashä¸­ï¼Œåˆ›å»ºç”¨æˆ·åå’Œå¯†ç </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">git config --global user.name &quot;GitHubç”¨æˆ·å&quot;<br>git config --global user.email &quot;GitHubæ³¨å†Œé‚®ç®±&quot;<br>git config --global user.password &quot;GitHubç™»å½•å¯†ç &quot;<br></code></pre></td></tr></table></figure><p>åˆ›å»ºSSHå¯†é’¥ï¼Œä¸€è·¯å›è½¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh-keygen -t rsa -C &quot;GitHubæ³¨å†Œé‚®ç®±&quot;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™å®ƒä¼šå‘Šè¯‰ä½ å·²ç»ç”Ÿæˆäº†.sshçš„æ–‡ä»¶å¤¹ã€‚åœ¨ä½ çš„ç”µè„‘ä¸­æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨C:\Users\24714.sshä¸­ã€‚<br>sshï¼Œç®€å•æ¥è®²ï¼Œå°±æ˜¯ä¸€ä¸ªç§˜é’¥ï¼Œå…¶ä¸­ï¼Œid_rsaæ˜¯ä½ è¿™å°ç”µè„‘çš„ç§äººç§˜é’¥ï¼Œç›¸å½“äºé’¥åŒ™ï¼Œid_rsa.pubæ˜¯å…¬å…±ç§˜é’¥ï¼Œç›¸å½“äºé”ã€‚è¦æŠŠid_rsa.pubå…¬å…±ç§˜é’¥ç»™GitHubï¼Œè¿™æ ·æ‰èƒ½ç”¨è‡ªå·±çš„ç§äººå¯†é’¥å»å¼€è¿™æŠŠé”ã€‚å½“èƒ½å¤Ÿç›¸äº’åŒ¹é…æ—¶ï¼Œæ‰èƒ½å¤Ÿé¡ºåˆ©çš„é€šè¿‡gitä¸Šä¼ ä½ çš„æ–‡ä»¶åˆ°GitHubä¸Šã€‚</p><p>å°†id_rsa.pubä¸­çš„å†…å®¹å¤åˆ¶ï¼Œè€Œååœ¨GitHubçš„settingä¸­ï¼š</p><p><img src="http://cdn.ohheng.cn/202404291759781.png"></p><p>ç‚¹å‡»å·¦ä¾§SSH and GPG keysçš„è®¾ç½®é€‰é¡¹ï¼Œç‚¹å‡»New SSH keyï¼ŒæŠŠä½ çš„id_rsa.pubé‡Œé¢çš„ä¿¡æ¯å¤åˆ¶è¿›å»ã€‚titleéšä¾¿å¡«ï¼Œæœ¬åœ°çš„å…¬é’¥å¤åˆ¶åˆ°keyä¸­ã€‚</p><p><img src="http://cdn.ohheng.cn/202404291759278.png"></p><p>åœ¨æœ¬åœ°gitbashä¸­æ£€æµ‹GitHubå…¬é’¥è®¾ç½®æ˜¯å¦æˆåŠŸ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh git@github.com<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡ç™»å½•éœ€è¦è¾“å…¥GitHubçš„ç™»å½•ç”¨æˆ·åå’Œå¯†ç ã€‚</p><h3 id="3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>3ã€ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>ä¸‹ä¸€æ­¥å°†æˆ‘ä»¬çš„Hexoä¸GitHubå…³è”èµ·æ¥ï¼Œæ‰“å¼€ç«™åšå®¢æ ¹ç›®å½•blogçš„é…ç½®æ–‡ä»¶_config.yml<br>ç¿»åˆ°æœ€åä¿®æ”¹ä¸ºï¼šï¼ˆæ³¨æ„åé¢ä¸‰è¡Œç¼©è¿›ä¸¤æ ¼ï¼‰</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span> <br>  <span class="hljs-attr">repository:</span> <span class="hljs-string">https://github.com/lixinyiceline/lixinyiceline.github.io.gitï¼ˆæ”¹ï¼‰</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">main</span><br></code></pre></td></tr></table></figure><p>repositoryé‡Œçš„å†…å®¹æ˜¯GitHubä»£ç ä»“åº“æµè§ˆå™¨ç½‘å€æ çš„ç½‘å€ï¼Œæ³¨æ„åé¢åŠ ä¸Š.gitï¼Œä¿å­˜ç«™ç‚¹é…ç½®æ–‡ä»¶ã€‚</p><p>4.æœ¬åœ°ä¸Šä¼ åˆ°GitHub<br>æœ¬åœ°gitbashå®‰è£…Gitéƒ¨ç½²æ’ä»¶</p><p>åœ¨<strong>blog</strong>ç›®å½•ä¸‹æ‰“å¼€æ§åˆ¶å°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œæˆ‘ä»¬åˆ†åˆ«è¾“å…¥å››æ¡å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install<br>hexo clean <br>hexo g <br>hexo d<br></code></pre></td></tr></table></figure><p>å®Œæˆåï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ è¾“å…¥ä½ çš„æ”¾ç½®ä¸ªäººç½‘ç«™çš„ä»“åº“è·¯å¾„ï¼Œå³ <a href="http://xxxx.github.io,ä½ å°±ä¼šå‘ç°ä½ çš„åšå®¢å·²ç»ä¸Šçº¿äº†,å¯ä»¥åœ¨ç½‘ç»œä¸Šè¢«è®¿é—®äº†./">http://xxxx.github.ioï¼Œä½ å°±ä¼šå‘ç°ä½ çš„åšå®¢å·²ç»ä¸Šçº¿äº†ï¼Œå¯ä»¥åœ¨ç½‘ç»œä¸Šè¢«è®¿é—®äº†ã€‚</a></p><h2 id="ä¸‰ã€ç½‘ç«™èµ„æ–™"><a href="#ä¸‰ã€ç½‘ç«™èµ„æ–™" class="headerlink" title="ä¸‰ã€ç½‘ç«™èµ„æ–™"></a>ä¸‰ã€ç½‘ç«™èµ„æ–™</h2><p>æˆ‘ä»¬çš„åšå®¢æ ‡é¢˜è¿˜æ˜¯é»˜è®¤çš„hexoï¼Œæ•´ä¸ªé¡µé¢æ˜¯åˆå§‹é»˜è®¤çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯¹å…¶è¿›è¡Œä¿®æ”¹</p><p>ç”¨è®°äº‹æœ¬æ‰“å¼€æˆ‘ä»¬blogæ–‡ä»¶å¤¹ä¸­çš„<code>_config.yml</code>æ–‡ä»¶</p><p>å°†#Siteä¸‹é¢æŒ‰è‡ªå·±çš„éœ€æ±‚å¡«ä¸Š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Site</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">æ ‡é¢˜</span><br><span class="hljs-attr">subtitle:</span> <span class="hljs-string">å‰¯æ ‡é¢˜</span><br><span class="hljs-attr">description:</span> <span class="hljs-string">æè¿°</span><br><span class="hljs-attr">keywords:</span> <span class="hljs-string">å…³é”®è¯</span><br><span class="hljs-attr">author:</span> <span class="hljs-string">ç«™ä¸»</span><br><span class="hljs-attr">language:</span> <span class="hljs-string">è¯­è¨€ï¼ˆå¯ä»¥å¡«å†™zh-CNï¼‰</span><br><span class="hljs-attr">timezone:</span> <span class="hljs-string">æ—¶åŒºï¼ˆå¯ä»¥å¡«å†™Asia/Shanghaiï¼‰</span><br></code></pre></td></tr></table></figure><p>ç„¶åä¿å­˜</p><h2 id="å››ã€å¦‚ä½•ä¸Šä¼ æ–‡ç« "><a href="#å››ã€å¦‚ä½•ä¸Šä¼ æ–‡ç« " class="headerlink" title="å››ã€å¦‚ä½•ä¸Šä¼ æ–‡ç« "></a>å››ã€å¦‚ä½•ä¸Šä¼ æ–‡ç« </h2><p>æˆ‘ä»¬åœ¨Blogæ–‡ä»¶å¤¹ä¸­æ‰“å¼€git bash,è¾“å…¥ä¸‹æ–¹ä»£ç å°±å¯ä»¥ç”Ÿæˆæ–°çš„æ–‡ç« mdæ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo new æ–‡ç« æ ‡é¢˜<br></code></pre></td></tr></table></figure><p>æ–‡ç« æ˜¯.mdæ ¼å¼ï¼Œåœ¨æˆ‘ä»¬çš„Blogæ–‡ä»¶å¤¹ä¸­çš„<code>source/_posts</code>ä¸­</p><p>æ¨èç”¨Typoraè½¯ä»¶æ¥ç¼–è¾‘.mdæ ¼å¼çš„æ–‡ä»¶</p><blockquote><p>Typoraå®˜ç½‘ï¼š<a href="https://www.typoraio.cn/%EF%BC%8889%E5%85%83%E7%BB%88%E8%BA%AB%E4%BD%BF%E7%94%A8%EF%BC%8C%E6%8E%A8%E8%8D%90%E6%AD%A3%E7%89%88%EF%BC%89">https://www.typoraio.cn/ï¼ˆ89å…ƒç»ˆèº«ä½¿ç”¨ï¼Œæ¨èæ­£ç‰ˆï¼‰</a></p><p>ç ´è§£ç‰ˆå¥‰ä¸Šï¼š<a href="https://kevinwu06.lanzout.com/iXkq30icv1ha">è“å¥äº‘æ–‡ä»¶</a></p></blockquote><p>ç„¶åæˆ‘ä»¬ç”¨Typoraè½¯ä»¶æ‰“å¼€è¯¥.mdæ–‡ä»¶å°±å¯ä»¥å¼€å§‹å†™æ–‡ç« äº†</p><p>å†™å¥½ä»¥åï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸€æ ·æ‰“å¼€git bashç”Ÿæˆã€ä¸Šä¼ </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">hexo clean <br>hexo g<br>hexo d<br></code></pre></td></tr></table></figure><blockquote><p>å‚è€ƒé“¾æ¥ï¼š</p><p><a href="https://blog.csdn.net/m0_50609661/article/details/125216866">æ­å»ºä¸ªäººåšå®¢ã€æ­å»ºHexo+Fluidåšå®¢å¹¶éƒ¨ç½²åˆ°GitHub&#x2F;äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘&#x2F;è…¾è®¯äº‘ï¼‰ã€‘</a></p><p><a href="https://blog.csdn.net/qq_21808961/article/details/84476504">hexo då‘½ä»¤æŠ¥é”™ ERROR Deployer not found: git</a></p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>åˆå§‹åŒ–</tag>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2024/04/29/hello-world/"/>
    <url>/2024/04/29/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
